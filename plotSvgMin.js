{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=12,f=10,g="Lucida Sans Typewriter",h=20,i=4,j=4,k=400,l=4,m=24,n=12,o=[10,10],p=[10,10],q=[1,2,5,10],r=4*e,s=2*e,t=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"];function gE(e){return document.getElementById(e)}function sAt(e,t,l){e.setAttribute(t,l)}function gAt(e,t){return e.getAttribute(t)}function sLi(a,n){if(n.length<2){let e=a.length,t=-1/0,l=1/0;for(;e--;)isFinite(a[e])&&(l=a[e]<l?a[e]:l,t=a[e]>t?a[e]:t);n=[l,t]}return n[0]==n[1]&&(n[0]=n[0]-.5,n[1]=n[1]+.5),n}function n2e(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(l.length);for(let t=0;t<l.length;++t){var s=l[t].toExponential(5).split(/e/);let e=b(+s[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),i[t]=a(s[0]*10**(+s[1]-3*(e-8))*1e3)/1e3+n[e]}return i}function lis(t,l,e){var a=b((e-t)/l*(1+1e-12))+1;out=Array(a);for(let e=0;e<a;++e)out[e]=t+l*e;return out}function los(e,t,l){return lis(e,t,l).map(c)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var a,n="string"==typeof t?document.createElementNS("http://www.w3.org/2000/svg",t):t;for(a in l)sAt(n,a,l[a]);return null!=e&&e.appendChild(n),n}function aST(e,t,l,a,n,i="middle",s="Sans,Arial",o="black"){e=aSE(e,"text",{x:l,y:a,fill:o,"font-size":n,"text-anchor":i,"font-family":s,"stroke-width":1});return e.append(document.createTextNode(t)),e}function aSL(e,t,l,a,n,i="black",s=""){return aSE(e,"line",{x1:t,y1:l,x2:a,y2:n,stroke:i,"stroke-width":1,"stroke-dasharray":s,"vector-effect":"non-scaling-stroke"})}function aSR(e,t,l,a,n,i="none",s="none",o=2,r=0){return aSE(e,"rect",{x:t,y:l,width:a,height:n,rx:r,stroke:s,"stroke-width":o,fill:i,"vector-effect":"non-scaling-stroke"})}function lC(e,t,l,a,n){var i=gE("svg_leg_"+a),e=e.offsetY-gAt(i,"y"),s=b((e-l/2)/(t+l)),i=gE("pl_"+a+"_"+s);if(null!=i){var o=i.style.display;if(0==n){e=gE("gpl_"+a+"_"+s);"none"===o?(gE("pl_"+a+"_"+s).style.display="block",gE("lgi_"+a+"_"+s).style.opacity=1,null!=e&&(e.style.display="block")):(gE("pl_"+a+"_"+s).style.display="none",gE("lgi_"+a+"_"+s).style.opacity=.3,null!=e&&(e.style.display="none"))}else for(let e=0;e<n;++e){var r=gE("gpl_"+a+"_"+e);"none"===o?(gE("pl_"+a+"_"+e).style.display="block",gE("lgi_"+a+"_"+e).style.opacity=1,null!=r&&(r.style.display="block")):e!=s&&(gE("pl_"+a+"_"+e).style.display="none",gE("lgi_"+a+"_"+e).style.opacity=.3,null!=r)&&(r.style.display="none")}}}function rS(e,t,l,a,n){var i=gE("svg_leg_"+e),s=gE("svg_draw_"+e),o=gE("svg_bg_"+e),r=gE("svg_top_"+e),g=gE("svg_bottom_"+e),h=gE("svg_left_"+e),v=gE("svg_"+e),d=v.width.baseVal.value-t,c=v.height.baseVal.value-l,u=s.width.baseVal.value,f=s.height.baseVal.value,y=document.getElementsByClassName("tooltip_"+e);if(u!=d){sAt(s,"width",d),sAt(o,"width",d),sAt(r,"width",d),sAt(g,"width",d),null!=i&&(i.x.baseVal.value+=d-u);for(let e=0;e<y.length;++e){var x=s.x.baseVal.value,_=y[e].transform.baseVal[0].matrix.e;y[e].transform.baseVal[0].matrix.e=x+(_-x)*d/u}}if(f!=c){sAt(s,"height",c),sAt(o,"height",c),sAt(h,"height",c),null!=i&&(sAt(i,"height",t=a<(t=c-n)?a:t),i.viewBox.baseVal.height=t);for(let e=0;e<y.length;++e){var b=s.y.baseVal.value,p=y[e].transform.baseVal[0].matrix.f;y[e].transform.baseVal[0].matrix.f=b+(p-b)*c/f}}}function sL(e,t,l){var a=gE("svg_leg_"+t),t=gE("rect_leg_"+t),e=(a.viewBox.baseVal.y+=e.deltaY,l-a.height.baseVal.value);return a.viewBox.baseVal.y<0&&(a.viewBox.baseVal.y=0),a.viewBox.baseVal.y>e&&(a.viewBox.baseVal.y=e),t.y.baseVal.value=a.viewBox.baseVal.y,!1}function pC(l,a,n,i,s,o){var r=gE("svg_draw_"+a),g=gE("svg_"+a),h=r.x.baseVal.value,v=r.y.baseVal.value,d=r.width.baseVal.value,c=r.height.baseVal.value,d=r.viewBox.baseVal.width/d,c=r.viewBox.baseVal.height/c,u=r.viewBox.baseVal.x,r=r.viewBox.baseVal.y,f=(l.offsetX-h)*d+u,f=(result=gNL(a,f,(l.offsetY-v)*c+r,6*d,6*c)).ele;if(null!=f){var l=result.x,y=result.y,u=(l-u)/d+h,d=(y-r)/c+v,h=f.id,r=h.slice(("pl_"+a).length,h.length),c=gE("lti_"+a+r),v=gAt(gE("pl_"+a+r),"stroke"),f=cC([l,y],n,o);let e=gE("gpl_"+a+r);null==e&&(e=aSE(g,"g",{id:"gpl_"+a+r}));h=aSE(e,"g",{class:"tooltip_"+a,transform:"translate("+u+" "+d+")"}),l=aSR(h,5,-9,0,32,v,"rgb(223,223,223)",1,rx=4);h.onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove(),1<e.detail&&sAL(a,n,n,i,s,o)};let t=null;null!=c&&(aSE(null,text=aST(h,c.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),t=aSL(h,5,-8,5,-8,stroke="white"),aSE(null,l,{y:-23,height:46})),aST(h,"x: "+n2e([f[0]]),7,4,12,"start","Sans,Arial","white"),aST(h,"y: "+n2e([f[1]]),7,18,12,"start","Sans,Arial","white");y=h.getBBox();aSE(null,l,{width:y.width+4}),null!=t&&sAt(t,"x2",y.width+4+5),aSR(h,-2,-2,4,4,"black"),aSE(h,"circle",{r:6,fill:"none","pointer-events":"visible"})}}function cC(e,t,l){return x=e[0]/100*t[2]+t[0],y=(1-e[1]/100)*t[3]+t[1],x=l[0]?10**x:x,y=l[1]?10**y:y,[x,y]}function gNL(e,l,a,n,i){let s=null,o=1/0,r=0,g=0;var h=gE("gp_"+e),v=h.children.length;for(let t=0;t<v;++t){var d=h.children[t].points;for(let e=1;e<d.length;++e){var c,u,f,y,x,_,b=d[e-1],p=d[e];l<b.x-n&&l<p.x-n||l>b.x+n&&l>p.x+n||a<b.y-i&&a<p.y-i||a>b.y+i&&a>p.y+i||(f=((c=p.x-b.x)*(l-b.x)+(u=p.y-b.y)*(a-b.y))/(c*c+u*u),1<=(f=((c=b.x+c*f)-l)*(c-l)/n/n+((u=b.y+u*f)-a)*(u-a)/i/i))||f>o||(o=f,s=h.children[t],f=b.x<l?l-b.x:b.x-l,y=b.y<a?a-b.y:b.y-a,x=p.x<l?l-p.x:p.x-l,_=p.y<a?a-p.y:p.y-a,g=f<x&&f<n&&y<i?(r=b.x,b.y):x<n&&_<i?(r=p.x,p.y):(r=c,u))}}return{ele:s,x:r,y:g}}function pM(e,t){if(0==e.button){var l=gE("svg_"+t);const a=e.offsetX,n=e.offsetY;aSE(null,aSR(l,a,n,0,0,"black"),{id:"zoom_rect"+t,"fill-opacity":"0.3"}),l.onmousemove=e=>pDZ(e,t,a,n)}}function pDZ(e,t,l,a){var t=gE("zoom_rect"+t),n=e.offsetX,e=e.offsetY,l=n-l,a=e-a;0<=l?sAt(t,"width",l):aSE(null,t,{width:-l,x:n}),0<=a?sAt(t,"height",a):aSE(null,t,{height:-a,y:e})}function pZ(e,t,l,a,n){var i,s,o=gE("zoom_rect"+e);(gE("svg_"+e).onmousemove=null)!=o&&(o.remove(),0!=(o=[o.x.baseVal.value,o.y.baseVal.value,o.width.baseVal.value,o.height.baseVal.value])[2])&&0!=o[3]&&(s=[(i=gE("svg_draw_"+e)).viewBox.baseVal.x,i.viewBox.baseVal.y,i.viewBox.baseVal.width,i.viewBox.baseVal.height],i=[i.x.baseVal.value,i.y.baseVal.value,i.width.baseVal.value,i.height.baseVal.value],sAL(e,[(e=[t[0]+t[2]*s[0]/100,t[1]+t[3]*(100-s[3]-s[1])/100,t[2]*s[2]/100,t[3]*s[3]/100])[0]+(s=[(o[0]-i[0])/i[2],1-(o[1]+o[3]-i[1])/i[3],o[2]/i[2],o[3]/i[3]])[0]*e[2],e[1]+s[1]*e[3],s[2]*e[2],s[3]*e[3]],t,l,a,n))}function sAL(e,t,l,a,n,i){for(var s=gE("svg_draw_"+e),o=100*(t[0]-l[0])/l[2],r=100*(l[1]+l[3]-t[1]-t[3])/l[3],l=(s.viewBox.baseVal.width=100*t[2]/l[2],s.viewBox.baseVal.height=100*t[3]/l[3],s.viewBox.baseVal.x=o,s.viewBox.baseVal.y=r,gE("plr_"+e)),g=(aSE(null,l,{x:o,y:r}),document.getElementsByClassName("cg_"+e));0<g.length;)g[0].remove();cGr(e,t,a,n,i)}function cTi(e,t,l){var t=e/t,a=b(c(t));const n=d(t/10**a);var i=q.findIndex(function(e){return e>=n}),t=q[i]*10**a;return l&&1<=e&&t<1?1:t}function cGr(v,c,u,f,y){var x=gE("svg_bg_"+v),_=gE("svg_left_"+v),w=gE("svg_bottom_"+v);for(let h=0;h<2;++h){var E=0<h?_:w,S=cTi(c[2+h],o[h],y[h]),m=c[h]+c[2+h],V=d(c[h]/S)*S,m=b(m/S)*S,k=100*(0<h?c[h]+c[h+2]-m:V-c[h])/c[2+h],A=a((m-V)/S);let n=Array();n=y[h]?n2e(dec(V,S,m)):n2e(lis(V,S,m));const N=100*S/c[2+h];var V=aSE(x,"defs",{class:"cg_"+v}),B=aSE(V,"g",{id:"mg"+h+"_"+v});if(f[h]&&0<p[h]){const C=l[idx],M=l[idx],R=0,z=100;0<h&&([C,R,M,z]=[R,C,z,M]);let l=Array();y[h]&&1==S?(l=los(1,9/(p[h]-1),10)).forEach((e,t)=>{l[t]=(1-l[t])*N}):l=lis(0,1/p[h]*N,N);for(let e=1;e<l.length-1;++e)aSL(B,C,R,M,z,"rgb(223,223,223)","2 4")}let t="0%",l="99%",i="0%",s="100%",r="0%",g="1%";0<h&&([t,l,i,s,r,g]=[l,t,s,i,g,r]),u&&aSL(B,0,0,i,s,"rgb(223,223,223)"),aSL(B,t,l,i,s),aSL(B,0,0,r,g);for(let l=0;l<=A;++l){var L=k+N*l;let t=null;aSE(null,t=0<h?aST(E,n[A-l],E.width.baseVal.value-.5*e,L+"%",e,"end"):aST(E,n[l],L+"%",.9*e,e),{"dominant-baseline":"central",class:"cg_"+v});var T=0<h?0:L,L=0<h?L:0;aSE(x,"use",{href:"#mg"+h+"_"+v,x:T,y:L,class:"cg_"+v})}}}function plotSvg(v,a,u,y,{title:x="",subtitle:_="",xlabel:p="",ylabel:w="",xlim:E=[],ylim:S=[],legend:V=[],xScale:$="lin",yScale:ee="lin",grid:A=!0,gridMinor:B=[],legendLocation:L="northeastoutside"}={}){let T=[!1,!1];"log"==$&&(a=a.map(c),1<E.length&&(E=E.map(c),isNaN(E[0])||isNaN(E[1])?E=[]:(E[0]=E[0]==-1/0?0:E[0],E[1]=E[1]==-1/0?0:E[1])),T[0]=!0),"log"==ee&&(u=u.map(c),1<S.length&&(S=S.map(c),isNaN(S[0])||isNaN(S[1])?S=[]:(S[0]=S[0]==-1/0?0:S[0],S[1]=S[1]==-1/0?0:S[1])),T[1]=!0);var N=gE(v),C=document.createElement("div"),N=(N.appendChild(C),sAt(C,"style","width:100%;height:100%;min-width:"+k+"px;min-height:200px;overflow:none"),aSE(C,"svg",{id:"svg_"+v,width:"100%",height:"100%"})),C=N.width.baseVal.value,M=N.height.baseVal.value;N.innerHTML+="<style>\n<![CDATA[\npolyline.l {\nstroke-width:2;\nvector-effect:non-scaling-stroke;\nfill:none;\n}\ntext.cll {\nfont-size:"+f+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+g+";\n}\n]]>\n</style>\n";let R=0,z=r;var D=x.split("\n"),Y=_.split("\n");0<x.length&&(R+=(m+l)*D.length),0<_.length&&(R+=(n+l)*Y.length);let G=M-(R+=10)-s,Z=C-z;0<p.length&&(G=G-e-l),0<w.length&&(z=z+e+l,Z=Z-e-l);var F=aSE(null,"g",{"pointer-events":"visible"});F.onclick=e=>lC(e,f,j,v,0),F.ondblclick=e=>lC(e,f,j,v,y);let I=0,X=0;if(0<V.length&&0<y&&0<a.length){let e="";switch(L){case"northeast":yLegend=R+2*j,I=4*j,e="white";break;case"northeastoutside":yLegend=R,e="none";break;default:throw new Error("LegendLocation not supported")}var P=G-I,H=(N.appendChild(F),aSE(N,"defs")),O=(aSE(H,"line",{id:"ll_"+v,x1:0,y1:0,x2:h,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),aSE(F,"svg",{id:"svg_leg_"+v})),te=y;let a=V;V.length>y&&(a=V.slice(0,te));H=(X=te*(f+j)+j)>P?P:X,P=(aSE(null,O,{x:"100%",height:H}),aSR(O,0,0,0,"100%",e,"black"));aSE(null,P,{id:"rect_leg_"+v});for(let l=0;l<te;++l){var le=l%t.length,ae=l*(f+j)+j,ne=new aSE(O,"g",{id:"lgi_"+v+"_"+l}),le=(aSE(ne,"use",{id:"lli_"+v+"_"+l,x:i,y:ae+f/2,href:"#ll_"+v,stroke:t[le]}),aSE(ne,"text",{id:"lti_"+v+"_"+l,class:"cll",x:i+h+i,y:ae+f/2}));let e="";l<a.length&&(e=a[l]),le.append(document.createTextNode(e))}var q=(q=F.getBBox().width+2*i)>k?k:q;sAt(P,"width","100%"),sAt(O,"width",q);let l=0;switch(L){case"northeast":l=-q-2*i-r,Z-=r;break;case"northeastoutside":l=-q-i,Z-=q+2*i;break;default:throw new Error("LegendLocation not supported")}aSE(null,O,{x:N.width.baseVal.value+l,y:yLegend,viewBox:"0 0 "+q+" "+H})}else Z-=r;P=[z,R,Z,G];let ie=[C-P[2],M-P[3]];var se=aSE(N,"svg",{id:"svg_top_"+v,x:P[0],overflow:"visible",width:P[2]});let J=0;if(0<x.length)for(let e=0;e<D.length;++e)J=J+m+l,aST(se,D[e],"50%",J,m);if(0<_.length)for(let e=0;e<Y.length;++e)J=J+n+l,aST(se,Y[e],"50%",J,n);L=aSE(N,"g",{transform:"translate("+P[0]+" "+(-M+P[1]+P[3])+")"}),H=aSE(L,"svg",{id:"svg_bottom_"+v,overflow:"visible",y:"100%",width:P[2]}),0<p.length&&aST(H,p,"50%",3*e,e),C=aSE(N,"svg",{id:"svg_left_"+v,width:P[0],y:P[1],overflow:"visible",height:P[3]}),0<w.length&&aSE(C,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":e,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:P[0]-4*e-l}).append(document.createTextNode(w)),x=sLi(a,E),_=sLi(u,S);let K=[x[0],_[0],x[1]-x[0],_[1]-_[0]];aSE(N,"svg",{id:"svg_bg_"+v,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:P[2],height:P[3],x:P[0],y:P[1]});var Q=aSE(N,"svg",{id:"svg_draw_"+v,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:P[2],height:P[3],x:P[0],y:P[1]});let U=[!1,!1];B.length<1?(U[0]="log"==$,U[1]="log"==ee):(U[0]=B[0],U[1]=B[1]);var M=cTi(K[2],o[0],T[0]),L=cTi(K[3],o[1],T[1]),W=(E.length<1&&4<=K[2]/M&&(K[0]=b(x[0]/M)*M,K[2]=d(x[1]/M)*M-K[0]),S.length<1&&4<=K[3]/L&&(K[1]=b(_[0]/L)*L,K[3]=d(_[1]/L)*L-K[1]),cGr(v,K,A,U,T),u.length/y),oe=a.length==u.length;if(!oe&&W!=a.length)throw new Error("Dimension must agree");var re=aSE(Q,"g",{id:"gp_"+v});for(let l=0;l<y;++l){var ge=l%t.length,he=aSE(re,"polyline",{class:"l",id:"pl_"+v+"_"+l,stroke:t[ge]});for(let e=0;e<W;++e){var ve,de=oe?a[l*W+e]:a[e],ce=u[l*W+e];isFinite(de)&&isFinite(ce)&&((ve=Q.createSVGPoint()).x=100*(de-K[0])/K[2],ve.y=100-100*(ce-K[1])/K[3],he.points.appendItem(ve))}}H=aSR(Q,0,0,"100%","100%","none","black");aSE(null,H,{id:"plr_"+v,"pointer-events":"visible"}),N.appendChild(F),H.onclick=e=>pC(e,v,K,A,U,T),N.oncontextmenu=e=>{e.preventDefault()},Q.onmousedown=e=>pM(e,v),Q.ondblclick=()=>sAL(v,K,K,A,U,T),N.onmousedown=e=>{e.preventDefault()},N.onmouseup=()=>pZ(v,K,A,U,T),0<V.length&&(F.onwheel=e=>sL(e,v,X)),new ResizeObserver(()=>rS(v,ie[0],ie[1],X,I)).observe(N)}}
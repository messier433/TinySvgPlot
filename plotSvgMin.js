{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=Array.isArray,f=1/0,g=document,h=2,i=1,j=12,k=10,l="Lucida Sans Typewriter",m=30,n=4,o=4,p=400,q=4,r=24,s=12,t=[10,10],u=[10,10],v=8,w=v/2,x=[1,2,5,10],y=4*j,z=2*j,A=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],B="http://www.w3.org/2000/svg";function plotSvg(_,V,N,S,{color:he="",title:ge="",subtitle:E="",xlabel:T="",ylabel:M="",xlim:C=[],ylim:L=[],style:ue="-",marker:O="",legend:fe=[],xScale:de="lin",yScale:ve="lin",grid:ye=!0,gridMinor:Y=[],xtick:me=[],ytick:xe=[],xticklbl:pe=[],yticklbl:be=[],xtickangle:ke=0,ytickangle:we=0,legendLocation:R="northeastoutside",linTip:_e=!0}={}){let D=[!1,!1];"log"==de&&(V=V.map(c),1<C.length&&(C=C.map(c),isNaN(C[0])||isNaN(C[1])?C=[]:(C[0]=C[0]==-f?0:C[0],C[1]=C[1]==-f?0:C[1])),0<me.length&&(me=me.map(c)),D[0]=!0),"log"==ve&&(N=N.map(c),1<L.length&&(L=L.map(c),isNaN(L[0])||isNaN(L[1])?L=[]:(L[0]=L[0]==-f?0:L[0],L[1]=L[1]==-f?0:L[1])),0<xe.length&&(xe=xe.map(c)),D[1]=!0);var U=le(_);const Be=g.createElement("div"),X=(oe(U,Be),ne(Be,"style","width:100%;height:100%;min-width:"+p+"px;min-height:200px;overflow:none"),oe(Be,"svg",{id:"s_"+_,width:"100%",height:"100%"}));U=re(X);X.innerHTML+="<style>\n<![CDATA[\ntext.cll {\nfont-size:"+k+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+l+";\n}\n.b:hover polyline{\nopacity:0.5;\n}\n]]>\n</style>\n";let F=0,Ve=y;var Ae=ge.split("\n"),Ne=E.split("\n");0<ge.length&&(F+=(r+q)*Ae.length),0<E.length&&(F+=(s+q)*Ne.length),F=F<19?25:F+6;let Se=U[3]-F-z,H=U[2]-Ve;0<T.length&&(Se=Se-j-q),0<M.length&&(Ve=Ve+j+2*q,H=H-j-2*q);var I=oe(null,"g",{"pointer-events":"visible"});I.onclick=e=>rt(e,0),I.ondblclick=e=>rt(e,S);let Ee=0,G=0,Te="none",K=null,ze=null,Me=null;if(0<fe.length&&0<S&&0<V.length){let e=F;"northeast"==R&&(e=F+2*o,Ee=4*o,Te="white");var P=Se-Ee,Ce=(K=oe(I,"svg",{id:"sl_"+_}),Me=oe(K,"defs"),oe(X,I),S);let l=fe;fe.length>S&&(l=fe.slice(0,Ce));P=(G=Ce*(k+o)+o)>P?P:G;oe(null,K,{x:"100%",height:P}),oe(null,ze=ce(K,0,0,0,"100%",Te,"black"),{id:"rect_leg_"+_});for(let t=0;t<Ce;++t){var Le=t*(k+o)+o,Oe=new oe(K,"g",{id:"lgi_"+_+"_"+t}),Ye=oe(Oe,"text",{id:"lti_"+_+"_"+t,class:"cll",x:n+m+n,y:Le+k/2}),Le=Le+k/2;vt(Oe,n+","+Le+" "+(n+m/2)+","+Le+" "+(n+m)+","+Le);let e="";t<l.length&&(e=l[t]),Ye.append(g.createTextNode(e))}var W=(W=I.getBBox().width+2*n)>p?p:W;ne(ze,"width","100%"),ne(K,"width",W);let t=-W-n;H-=W+2*n,"northeast"==R&&(t-=n+y,H-=y-W-2*n),oe(null,K,{x:U[2]+t,y:e,viewBox:"0 0 "+W+" "+P})}else H-=y;R=[Ve,F,H,Se];let Re=[U[2]-R[2],U[3]-R[3]];const De=oe(X,"svg",{id:"st_"+_,x:R[0],overflow:"visible",width:R[2]});let Z=0;if(0<ge.length)for(let e=0;e<Ae.length;++e)Z=Z+r+q,ae(De,Ae[e],"50%",Z,r);if(0<E.length)for(let e=0;e<Ne.length;++e)Z=Z+s+q,ae(De,Ne[e],"50%",Z,s);W=-U[3]+R[1]+R[3],P=oe(X,"g");ie(P,[R[0],W]);const Ue=oe(P,"svg",{id:"s_btm_"+_,overflow:"visible",y:"100%",width:R[2]}),Xe=(0<T.length&&ae(Ue,T,"50%",3*j,j),oe(X,"svg",{id:"sy_"+_,width:R[0],y:R[1],overflow:"visible",height:R[3]}));0<M.length&&(oe(null,E=ae(Xe,M,R[0]-j,"50%",j),{"writing-mode":"vertical-rl","transform-origin":"center"}),ie(E,null,[-1,-1]));U=lt(V,C),W=lt(N,L);let J=[U[0],W[0],U[1]-U[0],W[1]-W[0]];const Fe=oe(X,"svg",{id:"s_bg_"+_,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:R[2],height:R[3],x:R[0],y:R[1]}),Q=oe(X,"svg",{id:"sd_"+_,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:R[2],height:R[3],x:R[0],y:R[1]});Q.style.cursor="crosshair";let $=[0,0];Y.length<1?($[0]="log"==de,$[1]="log"==ve):1<Y.length?($[0]=Y[0],$[1]=Y[1]):($[0]=Y,$[1]=Y);P=ct(J[2],t[0],D[0]),T=ct(J[3],t[1],D[1]),M=[0==me.length,0==xe.length];const He=[(D[0]||$[0])&&M[0],(D[1]||$[1])&&M[1]],Ie=($=[$[0]&&M[0],$[1]&&M[1]],C.length<1&&4<=J[2]/P&&(J[0]=b(U[0]/P)*P,J[2]=d(U[1]/P)*P-J[0]),L.length<1&&4<=J[3]/T&&(J[1]=b(W[0]/T)*T,J[3]=d(W[1]/T)*T-J[1]),st(J),oe(Q,"defs"));""!=O&&(te("o",[oe(null,"circle",{r:"5"})],1),te("+",[se(null,0,-5,0,5,"","",""),se(null,-5,0,5,0,"","","")]),te("*",[se(null,0,-5,0,5,"","",""),se(null,-5,0,5,0,"","",""),se(null,-3.5,-3.5,3.5,3.5,"","",""),se(null,-3.5,3.5,3.5,-3.5,"","","")]),te(".",[oe(null,"circle",{r:"1.5","stroke-width":3})]),te("x",[se(null,-3.5,-3.5,3.5,3.5,"","",""),se(null,-3.5,3.5,3.5,-3.5,"","","")]),te("_",[se(null,-5,0,5,0,"","","")]),te("|",[se(null,0,-5,0,5,"","","")]),te("sq",[ce(null,-5,-5,10,10,"","","")],1),te("^",[oe(null,"polygon",{points:"-5 3, 0 -5, 5 3"})],1),te("v",[oe(null,"polygon",{points:"-5 -3, 0 5, 5 -3"})],1),te("tr",[oe(null,"polygon",{points:"-3 -5, 5 0, -3 5"})],1),te("tl",[oe(null,"polygon",{points:"-5 0, 3 5, 3 -5"})],1));var je=N.length/S,Ge=V.length==N.length;if(!Ge&&je!=V.length)throw new Error("Dimension must agree");var Ke=oe(Q,"g",{id:"gp_"+_});for(let n=0;n<S;++n){var Pe=n%A.length,qe=e(ue)?ue[n]:ue,We="url(#m"+(Array.isArray(O)?O[n]:O)+"_"+_+")",Ze=e(he)?n<he.length?he[n]:"":he,Pe=""==Ze?A[Pe]:Ze;let t="",l=2;switch(qe){case":":t="2 3";break;case"--":t="12 6";break;case"-.":t="0 1.5 9 3 3 2.5";break;case"*":l=0}var Je=vt(Ke,"",Pe,t,l);oe(null,Je,{id:"pl_"+_+"_"+n,"marker-start":We,"marker-mid":We,"marker-end":We,"stroke-width":l}),null!=K&&(Ze="url(#ml"+(e(O)?O[n]:O)+"_"+_+")",oe(null,K.childNodes[n+2].childNodes[1],{"stroke-dasharray":t,"marker-mid":Ze,"stroke-width":l,stroke:Pe}));for(let e=0;e<je;++e){var Qe,$e=Ge?V[n*je+e]:V[e],et=N[n*je+e];isFinite($e)&&isFinite(et)&&((Qe=Q.createSVGPoint()).x=100*($e-J[0])/J[2],Qe.y=100-100*(et-J[1])/J[3],Je.points.appendItem(Qe))}}E=ce(Q,0,0,"100%","100%","none","black");const tt=oe(null,E,{id:"plr_"+_,"pointer-events":"visible"}),ee=("white"==Te&&oe(X,I),oe(De,"g",{id:"bd_"+_,"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round",class:"b","pointer-events":"visible"}));function lt(n,r){if(r.length<2){let e=n.length,t=-f,l=f;for(;e--;)isFinite(n[e])&&(l=n[e]<l?n[e]:l,t=n[e]>t?n[e]:t);r=[l,t]}return r[0]==r[1]&&(r[0]=r[0]-.5,r[1]=r[1]+.5),r}function te(e,t,l=0){var n=oe(Ie,"marker",{id:"m"+e+"_"+_,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"userSpaceOnUse",fill:"none",stroke:"context-stroke"}),r=oe(n,"g",{"stroke-width":1.5,"vector-effect":"non-scaling-stroke",class:"marker_"+_});ie(r,[5,5],[1,1]);for(let e=0;e<t.length;++e)oe(r,t[e]);ne(oe(Me,n.cloneNode(!0),{id:"ml"+e+"_"+_}).childNodes[0],"class",""),l&&oe(Ie,n.cloneNode(!0),{id:"mf"+e+"_"+_,fill:"context-stroke"})}function nt(e,t,l=0){var n=le("gpl_"+e+"_"+t),r=l?"block":"none";le("pl_"+e+"_"+t).style.display=r,le("lgi_"+e+"_"+t).style.opacity=.3+.7*l,null!=n&&(n.style.display=r)}function rt(e,t){var e=e.offsetY-ft(K,"y")+dt(K)[1],l=b((e-o/2)/(k+o)),e=le("pl_"+_+"_"+l);if(null!=e){var n="none"!=e.style.display,r=0==t?l+1:t;for(let e=0==t?l:0;e<r;++e)n?e==l&&0!=t||nt(_,e):nt(_,e,1)}}function it(){var e=re(X),t=re(Q),l=e[2]-Re[0],e=e[3]-Re[1];t[2]!=l&&(ne(Q,"width",l),ne(Fe,"width",l),ne(De,"width",l),ne(Ue,"width",l),null!=K&&(K.x.baseVal.value+=l-t[2]),ee.transform.baseVal[0].matrix.e+=l-t[2]),t[3]!=e&&(ne(Q,"height",e),ne(Fe,"height",e),ne(Xe,"height",e),null!=K)&&(l=(l=e-Ee)>G?G:l,ne(K,"height",l),K.viewBox.baseVal.height=l),ot()}function ot(){var t=g.getElementsByClassName("marker_"+_);for(let e=0;e<t.length;++e){var l=re(Q),n=dt(Q),r=n[2]/l[2],n=n[3]/l[3];t[e].transform.baseVal[1].matrix.a=r,t[e].transform.baseVal[1].matrix.d=n}}function at(e){for(var t=100*(e[0]-J[0])/J[2],l=100*(J[1]+J[3]-e[1]-e[3])/J[3],n=(Q.viewBox.baseVal.width=100*e[2]/J[2],Q.viewBox.baseVal.height=100*e[3]/J[3],Q.viewBox.baseVal.x=t,Q.viewBox.baseVal.y=l,oe(null,tt,{x:t,y:l}),g.getElementsByClassName("cg_"+_));0<n.length;)n[0].remove();st(e),ot()}function st(e){tickOvr=[me,xe],ticklbl=[pe,be],tickangle=[ke,we];for(let l=0;l<2;++l){var n=l?Xe:Ue,r=ct(e[2+l],t[l],D[l]),i=e[l]+e[2+l],o=(d(e[l]/r)-1)*r,i=b(i/r)*r,a=0<tickOvr[l].length?tickOvr[l]:gt(o,r,i),s=0<ticklbl[l].length?ticklbl[l]:D[l]?ut(a.map(e=>10**e)):ut(a),h=100*r/e[2+l],o=oe(Fe,"defs",{class:"cg_"+_}),g=oe(o,"g",{id:"mg"+l+"_"+_}),i=D[l]&&1==r,o=He[l]?u[l]/(2-i):1;const x=gt(10/o,10/o,10);if(1<o){D[l]&&1==r&&x.forEach((e,t)=>{x[t]=10*c(x[t])});for(let e=0;e<x.length-1;++e)ht(g,x[e]/10*h*(1-2*l),l,w,"2 4",$[l])}ht(g,0,l,v,"",ye);var f=function(t,l,n){var r=Array(t.length);for(let e=0;e<t.length;++e)r[e]=100*(t[e]-l)/n;return r}(a,e[l],e[2+l]);for(let e=0;e<a.length;++e){var y=0<l?100-f[e]:f[e],m=l?[0,y]:[y,0],y=l?[re(n)[2]-.5*j,y+"%"]:[y+"%",.9*j];0<=f[e]&&(0<e||tickOvr)&&oe(null,ae(n,s[e],y[0],y[1],j,l?"end":"middle"),{"dominant-baseline":"central",class:"cg_"+_,transform:"rotate("+tickangle[l]+")","transform-origin":y[0]+" "+y[1]}),oe(Fe,"use",{href:"#mg"+l+"_"+_,x:m[0],y:m[1],class:"cg_"+_})}}}function ct(e,t,l){var t=e/t,n=b(c(t));const r=d(t/10**n);var i=x.findIndex(function(e){return e>=r}),t=x[i]*10**n;return l&&1<=e&&t<1?1:t}function ht(e,t,l,n,r,i){let o=[t,0,0,n,t,100];0<l&&(o=[o[1],o[0],o[3],o[2],o[5],o[4]]),i&&se(e,o[0],o[1],o[4],o[5],"rgb(223,223,223)",r);n=se(e,0,0,o[2],o[3]),t=se(e,-o[2],-o[3],0,0);ie(n,[o[0],o[1]],[1,1]),ie(t,[o[4],o[5]],[1,1]),oe(null,n,{class:"marker_"+_}),oe(null,t,{class:"marker_"+_})}function gt(t,l,e){var n=b((e-t)/l*(1+1e-12))+1;out=Array(n);for(let e=0;e<n;++e)out[e]=t+l*e;return out}function ut(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],r=Array(l.length);for(let t=0;t<l.length;++t){var i=l[t].toExponential(5).split(/e/);let e=b(+i[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),r[t]=a(i[0]*10**(+i[1]-3*(e-8))*1e3)/1e3+n[e]}return r}function le(e){return g.getElementById(e)}function ne(e,t,l){e.setAttribute(t,l)}function ft(e,t){return e.getAttribute(t)}function re(e){return[e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value]}function dt(e){return[e.viewBox.baseVal.x,e.viewBox.baseVal.y,e.viewBox.baseVal.width,e.viewBox.baseVal.height]}function ie(e,t,l){t=null!=t?"translate("+t[0]+" "+t[1]+")":"";t+=null!=l?"scale("+l[0]+" "+l[1]+")":"",e.setAttribute("transform",t)}function oe(e,t,l){var n,r="string"==typeof t?g.createElementNS(B,t):t;for(n in l)ne(r,n,l[n]);return null!=e&&e.appendChild(r),r}function ae(e,t,l,n,r,i="middle",o="Sans,Arial",a="black"){e=oe(e,"text",{x:l,y:n,fill:a,"font-size":r,"text-anchor":i,"font-family":o,"stroke-width":1});return e.append(g.createTextNode(t)),e}function se(e,t,l,n,r,i="black",o="",a=1){return oe(e,"line",{x1:t,y1:l,x2:n,y2:r,stroke:i,"stroke-width":a,"stroke-dasharray":o,"vector-effect":"non-scaling-stroke"})}function vt(e,t="",l="black",n="",r=2){return oe(e,"polyline",{points:t,fill:"none",stroke:l,"stroke-width":r,"stroke-dasharray":n,"vector-effect":"non-scaling-stroke"})}function ce(e,t,l,n,r,i="none",o="none",a=2,s=0){return oe(e,"rect",{x:t,y:l,width:n,height:r,rx:s,stroke:o,"stroke-width":a,fill:i,"vector-effect":"non-scaling-stroke"})}ie(ee,[R[2]-18,R[1]-24]),vt(ee,"8,0 8,16 2,9 8,16 14,9"),vt(ee,"0,17 0,20 16,20 16,17"),ce(ee,0,0,21,21),ee.onclick=()=>{var e,t;ee.style.display="none",Q.style.cursor="auto",e='<svg width="'+(e=re(X))[2]+'" height="'+e[3]+'" xmlns="'+B+'">',e=new Blob([e,X.innerHTML,"</svg>"],{type:"image/svg+xml;charset=utf-8"}),e=URL.createObjectURL(e),(t=g.createElement("a")).href=e,t.download="snapshot_"+ge+".svg",oe(g.body,t),t.click(),g.body.removeChild(t),ee.style.display="block",Q.style.cursor="crosshair"},E.onclick=t=>{var l=re(Q),n=(s=dt(Q))[2]/l[2],r=s[3]/l[3],a=(t.offsetX-l[0])*n+s[0],a=(result=function(e,t,l,n,r,i){let o=null,a=f,s=0,c=0;var h=le("gp_"+e),g=h.children.length;for(let e=0;e<g;++e){var u=h.children[e],d=u.points;if("none"!=u.style.display)for(let e=1;e<d.length;++e){var v,y,m,x,p,b,k=d[e-1],w=d[e];t<k.x-n&&t<w.x-n||t>k.x+n&&t>w.x+n||l<k.y-r&&l<w.y-r||l>k.y+r&&l>w.y+r||(v=w.x-k.x,m=(v*(t-k.x)+(y=w.y-k.y)*(l-k.y))/(v*v+y*y),1<=(m=((v=k.x+v*m)-t)*(v-t)/n/n+((y=k.y+y*m)-l)*(y-l)/r/r))||m>a||(a=m,o=u,m=k.x<t?t-k.x:k.x-t,x=k.y<l?l-k.y:k.y-l,p=w.x<t?t-w.x:w.x-t,b=w.y<l?l-w.y:w.y-l,m<p&&m<n&&x<r?(s=k.x,c=k.y):p<n&&b<r?(s=w.x,c=w.y):i&&0!=ft(u,"stroke-width")?(s=v,c=y):o=null)}}return{ele:o,x:s,y:c}}(_,a,t=(t.offsetY-l[1])*r+s[1],s=6*n,c=6*r,_e)).ele;if(null!=a){var t=result.x,s=result.y,c="pl_"+_,a=a.id,c=a.slice(c.length,a.length),a=le("lti_"+_+c),h=ft(le("pl_"+_+c),"stroke"),g=function(e,t,l){return V=e[0]/100*t[2]+t[0],N=(1-e[1]/100)*t[3]+t[1],[V=l[0]?10**V:V,N=l[1]?10**N:N]}([t,s],J,D);let e=le("gpl_"+_+c);null==e&&(e=oe(Q,"g",{id:"gpl_"+_+c}));const d=oe(e,"g",{class:"marker_"+_}),v=oe(d,"g");c=ce(v,0,-33,1,33,h,"rgb(223,223,223)",1,rx=4),h=(ie(d,[t,s],[n,r]),d.onclick=e=>{e.ctrlKey?u(1):(d.remove(),1<e.detail&&at(J))},null!=a&&(oe(null,text=ae(v,a.textContent,2,-35,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),oe(null,c,{y:-48,height:48})),ae(v,"x: "+ut([g[0]]),2,-19,12,"start","Sans,Arial","white"),ae(v,"y: "+ut([g[1]]),2,-5,12,"start","Sans,Arial","white"),d.getBBox());const y=[h.width+4,h.height],m=(oe(null,c,{width:y[0]}),null!=a&&se(v,0,-31,y[0],-31,stroke="white"),se(d,0,0,6,-6));t=v.getBoundingClientRect();let i=t.right+5+Be.offsetLeft>l[0]+l[2],o=t.y-5-Be.offsetTop<l[1];function u(e){let t=5,l=-5,n=1,r=1;e&&([i,o]=[!o,i]),i&&(t=-y[0]-5,n=-1),o&&(l=y[1]+5,r=-1),ie(v,[t,l]),ie(m,null,[n,r])}u(!1),ce(d,-2,-2,4,4,"black"),oe(d,"circle",{r:6,fill:"none","pointer-events":"visible"})}},X.oncontextmenu=e=>{e.preventDefault()},Q.onmousedown=t=>{{let e=0;if(t.button==i||t.button==h&&t.ctrlKey)e=1;else if(t.button!=h)return;Q.style.cursor=e?"move":"zoom-in";const o=t.offsetX,a=t.offsetY,l=ce(X,o,a,0,0,"black"),n=e?0:.3;oe(null,l,{id:"zoom_rect"+_,"fill-opacity":n}),X.onmousemove=e=>{var t=o,l=a,n=le("zoom_rect"+_),r=e.offsetX,t=r-t,l=(e=e.offsetY)-l,i=0==ft(n,"fill-opacity");i||0<=t?ne(n,"width",t):oe(null,n,{width:-t,x:r}),i||0<=l?ne(n,"height",l):oe(null,n,{height:-l,y:e})}}},Q.ondblclick=()=>at(J),X.onmousedown=e=>{e.preventDefault()},X.onmouseup=()=>{var t=le("zoom_rect"+_);if(Q.style.cursor="crosshair",(X.onmousemove=null)!=t){var l=0==ft(t,"fill-opacity"),n=re(t);if(t.remove(),!~l||0!=n[2]&&0!=n[3]){var t=dt(Q),r=re(Q);let e=[];e=l?[-n[2]/r[2],n[3]/r[3],1,1]:[(n[0]-r[0])/r[2],1-(n[1]+n[3]-r[1])/r[3],n[2]/r[2],n[3]/r[3]];l=[J[0]+J[2]*t[0]/100,J[1]+J[3]*(100-t[3]-t[1])/100,J[2]*t[2]/100,J[3]*t[3]/100];at([l[0]+e[0]*l[2],l[1]+e[1]*l[3],e[2]*l[2],e[3]*l[3]])}}},0<fe.length&&(I.onwheel=e=>{G;var t=re(K),l=dt(K),t=G-t[3];return l[1]+=e.deltaY,l[1]<0&&(l[1]=0),t<l[1]&&(l[1]=t),K.viewBox.baseVal.y=l[1],ze.y.baseVal.value=l[1],!1}),new ResizeObserver(()=>it()).observe(X),it()}}
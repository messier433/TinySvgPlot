function gE(e){return document.getElementById(e)}function gM(e){let t=e.length,l=-1/0;for(;t--;)l=e[t]>l?e[t]:l;return l}function gMi(e){let t=e.length,l=1/0;for(;t--;)l=e[t]<l?e[t]:l;return l}function n2e(t){var l=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(t.length);for(idx=0;idx<t.length;++idx){var a=t[idx].toExponential(5).split(/e/);let e=Math.floor(+a[1]/3)+8;e>l.length-1?e=l.length-1:e<0&&(e=0),i[idx]=Math.round(a[0]*Math.pow(10,+a[1]-3*(e-8))*1e3)/1e3+l[e]}return i}function linspace(e,t,l){for(numel=Math.floor((l-e)/t)+1,out=Array(numel),idx=0,val=e;val<=l;++idx,val+=t)out[idx]=val;return out}function los(e,t,l){for(numel=Math.floor((l-e)/t)+1,out=Array(numel),idx=0,val=e;val<=l;++idx,val+=t)out[idx]=Math.log10(val);return out}function dec(e,t,l){for(numel=Math.floor((l-e)/t)+1,out=Array(numel),idx=0,val=e;val<=l;++idx,val+=t)out[idx]=Math.pow(10,val);return out}function aSE(e,t,l){var i,a="string"==typeof t?document.createElementNS("http://www.w3.org/2000/svg",t):t;for(i in l)a.setAttribute(i,l[i]);return null!=e&&e.appendChild(a),a}function aST(e,t,l,i,a,n="middle",r="Sans,Arial",o="black"){e=aSE(e,"text",{x:l,y:i,fill:o,"font-size":a,"text-anchor":n,"font-family":r,"stroke-width":1});return e.append(document.createTextNode(t)),e}function aSL(e,t,l,i,a,n="black",r=""){return aSE(e,"line",{x1:t,y1:l,x2:i,y2:a,stroke:n,"stroke-width":1,"stroke-dasharray":r,"vector-effect":"non-scaling-stroke"})}function tL(e,t,l){var i=gE("pl_"+e+"_"+t).style.display;if(0==l){var a=gE("gpl_"+e+"_"+t);"none"===i?(gE("pl_"+e+"_"+t).style.display="block",gE("lli_"+e+"_"+t).style.opacity=1,gE("lti_"+e+"_"+t).style.opacity=1,null!=a&&(a.style.display="block")):(gE("pl_"+e+"_"+t).style.display="none",gE("lli_"+e+"_"+t).style.opacity=.3,gE("lti_"+e+"_"+t).style.opacity=.3,null!=a&&(a.style.display="none"))}else for(idx=0;idx<l;++idx){var n=gE("gpl_"+e+"_"+idx);"none"===i?(gE("pl_"+e+"_"+idx).style.display="block",gE("lli_"+e+"_"+idx).style.opacity=1,gE("lti_"+e+"_"+idx).style.opacity=1,null!=n&&(n.style.display="block")):idx!=t&&(gE("pl_"+e+"_"+idx).style.display="none",gE("lli_"+e+"_"+idx).style.opacity=.3,gE("lti_"+e+"_"+idx).style.opacity=.3,null!=n)&&(n.style.display="none")}}function rN(e){var t=e[0],l=e[1],i=Array(t.length),a=Array(l.length);if(t.length==l.length){var n=0;for(idx=0;idx<l.length;++idx)isFinite(t[idx])&&isFinite(l[idx])&&(i[n]=t[idx],a[n]=l[idx],++n);n<t.length&&(i=i.slice(0,n),a=a.slice(0,n))}else{var n=0,r=l.length/t.length,o=t.length;for(idx=0;idx<o;++idx){var s=isFinite(t[idx]),d=!0;for(idxLn=0;idxLn<r;++idxLn){if(!isFinite(l[idxLn*o+idx])){d=!1;break}a[idxLn*o+n]=l[idxLn*o+idx]}s&&d&&(i[n]=t[idx],++n)}if(n<t.length){for(i=i.slice(0,n),idx=n=0;idx<l.length;++idx)idx%o<i.length&&(a[n]=a[idx],++n);a=a.slice(0,i.length*r)}}return[i,a]}function rS(e,t,l,i,a){var n=gE("svg_leg_"+e),r=gE("svg_draw_"+e),e=gE("svg_"+e),o=e.width.baseVal.value-t,s=e.height.baseVal.value-l,d=r.width.baseVal.value,g=r.height.baseVal.value;if(tooltips=document.getElementsByClassName("tooltip"),d!=o)for(r.width.baseVal.value=o,idx=0;idx<tooltips.length;++idx){var h=r.x.baseVal.value,x=tooltips[idx].transform.baseVal[0].matrix.e;tooltips[idx].transform.baseVal[0].matrix.e=h+(x-h)*o/d}if(g!=s)for(r.height.baseVal.value=s,null!=n&&(n.height.baseVal.value=t=i<(t=s-a)?i:t,n.viewBox.baseVal.height=t),idx=0;idx<tooltips.length;++idx){var c=r.y.baseVal.value,p=tooltips[idx].transform.baseVal[0].matrix.f;tooltips[idx].transform.baseVal[0].matrix.f=c+(p-c)*s/g}}function sL(e,t,l){var i=gE("svg_leg_"+t),t=gE("rect_leg_"+t),e=(i.viewBox.baseVal.y+=e.deltaY,l-i.height.baseVal.value);return i.viewBox.baseVal.y<0&&(i.viewBox.baseVal.y=0),i.viewBox.baseVal.y>e&&(i.viewBox.baseVal.y=e),t.y.baseVal.value=i.viewBox.baseVal.y,!1}function pC(e,t,l,i,a,n,r,o,s,d){if(svgDraw=gE("svg_draw_"+t),svg=gE("svg_"+t),null!=(closestEl=gNL(e.clientX,e.clientY))){for(var g=e.offsetX-svgDraw.x.baseVal.value,e=e.offsetY-svgDraw.y.baseVal.value,h=l/svgDraw.width.baseVal.value,x=i/svgDraw.height.baseVal.value,c=(g*=h,e*=x,closestEl.points),p=g>c[c.length-1].x?c.length-1:0,f=1;f<c.length;++f){c[f].x,c[f].y;if(c[f].x>=g&&c[f-1].x<=g){p=f-1;break}}var f,u=c.length<=(u=p+1)?c.length-1:u,v=(c[f=g-c[p].x>c[u].x-g?u:p].x-g)*(c[f].x-g)+(c[f].y-e)*(c[f].y-e),v=c[p=v<36?f:p].x-c[u=v<36?f:u].x,y=c[p].y-c[u].y,b=v*v+y*y,v=v/b*(c[p].x-g)+y/b*(c[p].y-e),y=c[u].x*(v=u==p?1:v)+c[p].x*(1-v),b=c[u].y*v+c[p].y*(1-v),e=y/h+svgDraw.x.baseVal.value,u=b/x+svgDraw.y.baseVal.value,v=closestEl.id,h=v.slice(("pl_"+t).length,v.length),x=gE("lti_"+t+h),v=gE("pl_"+t+h),v=(lineColor=v.getAttribute("stroke"),sourceCoord=cC([y,b],l,i,[a,n],[r,o],s,d),gE("gpl_"+t+h)),y=(null==v&&(v=aSE(svg,"g",{id:"gpl_"+t+h})),aSE(v,"g",{class:"tooltip",transform:"translate("+e+" "+u+")"})),b=(y.onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove()},aSE(y,"rect",{x:5,y:-9,stroke:"rgb(223,223,223)",fill:lineColor,rx:4,"vector-effect":"non-scaling-stroke"})),l=null,i=(null!=x&&(aSE(null,text=aST(y,x.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),l=aSL(y,5,-8,5,-8,stroke="white"),b.setAttribute("y",-23)),aST(y,"x: "+n2e([sourceCoord[0]]),7,4,12,"start","Sans,Arial","white"),aST(y,"y: "+n2e([sourceCoord[1]]),7,18,12,"start","Sans,Arial","white"),y.getBBox());aSE(null,b,{width:i.width+4,height:i.height+4}),null!=l&&l.setAttribute("x2",i.width+4+5),aSE(y,"rect",{x:-2,y:-2,width:4,height:4,fill:"black"})}}function pM(e,t){2==e.button&&(aSE(svg=gE("svg_"+t),"rect",{id:"zoom_rect"+t,x:e.offsetX,y:e.offsetY,height:0,width:0,fill:"black","fill-opacity":"0.3"}),svg.onmousemove=e=>pZ(e,t))}function pZ(e,t){(rectZoom=gE("zoom_rect"+t)).width.baseVal.value=e.offsetX-rectZoom.x.baseVal.value,rectZoom.height.baseVal.value=e.offsetY-rectZoom.y.baseVal.value,2!=e.buttons&&(rectZoom.remove(),(svg=gE("svg_"+t)).onmousemove=null)}function cC(e,t,l,i,a,n,r){return x=e[0]/t*(i[1]-i[0])+i[0],y=(1-e[1]/l)*(a[1]-a[0])+a[0],x=n?Math.pow(10,x):x,y=r?Math.pow(10,y):y,[x,y]}function gNL(l,i){var a=null,n=1/0;for(let t=l-4;t<=l+4;t++)for(let e=i-4;e<=i+4;e++){var r,o=document.elementFromPoint(t,e);"polyline"==o?.tagName&&(r=(t-l)*(t-l)+(e-i)*(e-i))<n&&(n=r,a=o)}return a}function plotSvg(t,e,l,i,{title:a="",subtitle:n="",xlabel:r="",ylabel:o="",xlim:s=[],ylim:d=[],legend:g=[],xScale:X="linear",yScale:h="linear",grid:B=!0,gridMinor:x=[],legendLocation:c="northeastoutside"}={}){var p=10,f=10,u=[1,2,5,10],v=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],y=(logXEnbl=!1,"log"==X&&(e=e.map(Math.log10),1<s.length&&(s=s.map(Math.log10),isNaN(s[0])||isNaN(s[1])?s=[]:(s[0]=s[0]==-1/0?0:s[0],s[1]=s[1]==-1/0?0:s[1])),logXEnbl=!0),logYEnbl=!1,"log"==h&&(l=l.map(Math.log10),1<d.length&&(d=d.map(Math.log10),isNaN(d[0])||isNaN(d[1])?d=[]:(d[0]=d[0]==-1/0?0:d[0],d[1]=d[1]==-1/0?0:d[1])),logYEnbl=!0),e=(newPts=rN([e,l]))[0],l=newPts[1],gE(t)),b=document.createElement("div"),y=(y.appendChild(b),b.setAttribute("style","width:100%;height:calc(100vh - 16px);overflow:none"),aSE(b,"svg",{id:"svg_"+t,width:"100%",height:"100%"})),b=(b=y.width.baseVal.value)<1200?1200:b,w=(w=y.height.baseVal.value)<800?800:w,E=(y.innerHTML+="<style>\n<![CDATA[\n  polyline.l {\n    stroke-width:2;\n    vector-effect:non-scaling-stroke;\n    fill:none;\n  }\n  text.cll {\n    font-size:10px;\n    fill:black;\n    dominant-baseline:middle;\n    font-family:Lucida Sans Typewriter;\n  }\n]]>\n</style>\n",0),m=48,D=a.split("\n"),O=n.split("\n"),k=(0<a.length&&(E+=28*D.length),0<n.length&&(E+=16*O.length),w-(E+=10)-24),_=b-m,Z=(0<r.length&&(k=k-12-4),0<o.length&&(m=m+12+4,_=_-12-4),aSE(null,"g")),z=0;if(0<g.length&&0<i&&0<e.length){var F="";switch(c){case"northeast":yLegend=E+8,z=16,F="white";break;case"northeastoutside":yLegend=E,F="none";break;default:throw new Error("LegendLocation not supported")}hLegendMax=k-z,y.appendChild(Z);var S=aSE(y,"defs"),U=(aSE(S,"line",{id:"ll_"+t,x1:0,y1:0,x2:20,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),wLegendMax=400,hLetter=10,aSE(Z,"svg",{id:"svg_leg_"+t})),R=i,j=g,G=(g.length>i&&(j=g.slice(0,R)),R*(hLetter+4)+4),S=G>hLegendMax?hLegendMax:G,A=(aSE(null,U,{x:"100%",height:S}),aSE(U,"rect",{id:"rect_leg_"+t,x:0,y:0,height:"100%",fill:F,stroke:"black","stroke-width":2,"vector-effect":"non-scaling-stroke"}));for(lnIdx=0;lnIdx<R;++lnIdx){colorIdx=lnIdx%v.length,yOffset=lnIdx*(hLetter+4)+4;var H=new aSE(U,"g",{id:"lgi_"+t+"_"+lnIdx,onclick:'tL("'+t+'", '+lnIdx+", 0);",ondblclick:'tL("'+t+'", '+lnIdx+", "+i+");"}),q=(aSE(H,"use",{id:"lli_"+t+"_"+lnIdx,x:4,y:yOffset+hLetter/2,href:"#ll_"+t,stroke:v[colorIdx]}),aSE(H,"text",{id:"lti_"+t+"_"+lnIdx,class:"cll",x:28,y:yOffset+hLetter/2}));lnIdx<j.length?q.append(document.createTextNode(j[lnIdx])):q.append(document.createTextNode(""))}var L=(L=Z.getBBox().width+8)>wLegendMax?wLegendMax:L;for(A.setAttribute("width","100%"),U.setAttribute("width",L),lnIdx=0;lnIdx<R;++lnIdx){colorIdx=lnIdx%v.length,yOffset=lnIdx*(hLetter+4)+4;const H=gE("lgi_"+t+"_"+lnIdx);aSE(H,"rect",{id:"lri_"+t+"_"+lnIdx,x:4,y:yOffset,width:L,height:hLetter+4,fill:"none","pointer-events":"visible"})}var J=0;switch(c){case"northeast":J=-L-8-48,_-=48;break;case"northeastoutside":J=-L,_-=L+4;break;default:throw new Error("LegendLocation not supported")}aSE(null,U,{x:"calc(100% + "+J+"px)",y:yLegend,viewBox:"0 0 "+L+" "+S})}else _-=48;var M=[b-(pltAr=[m,E,_,k])[2],w-pltAr[3]],K=aSE(y,"svg",{x:pltAr[0],overflow:"visible",width:"calc(100% - "+M[0]+"px)"}),T=0;if(0<a.length)for(idx=0;idx<D.length;++idx)T=T+24+4,aST(K,D[idx],"50%",T,24);if(0<n.length)for(idx=0;idx<O.length;++idx)T=T+12+4,aST(K,O[idx],"50%",T,12);var A=-w+pltAr[1]+pltAr[3],c=aSE(y,"g",{transform:"translate("+pltAr[0]+" "+A+")"}),Q=aSE(c,"svg",{overflow:"visible",y:"100%",width:"calc(100% - "+M[0]+"px)"}),W=(0<r.length&&aST(Q,r,"50%",36,12),aSE(y,"svg",{y:pltAr[1],overflow:"visible",height:"calc(100% - "+M[1]+"px)"})),I=(0<o.length&&aSE(W,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":12,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:pltAr[0]-48-4}).append(document.createTextNode(o)),0),V=0,N=0,P=0,S=(s.length<2?(I=gMi(e),V=gM(e),NaN==I&&(I=0,V=1),I==V&&(I-=.5,V+=.5)):(I=s[0],V=s[1]),d.length<2?(N=gMi(l),P=gM(l),NaN==N&&(N=0,P=1),N==P&&(N-=.5,P+=.5)):(N=d[0],P=d[1]),y.width.baseVal.value-M[0]),b=y.height.baseVal.value-M[1],Y=aSE(y,"svg",{id:"svg_draw_"+t,preserveAspectRatio:"none",viewBox:"0 0 "+pltAr[2]+" "+pltAr[3],width:S,height:b,x:pltAr[0],y:pltAr[1]}),m=!1,k=!1,k=x.length<1?(m="log"==X,"log"==h):(m=x[0],x[1]),a=(V-I)/10,n=Math.floor(Math.log10(a)),$=Math.ceil(a/Math.pow(10,n)),w=u.findIndex(function(e){return $<=e}),a=u[w]*Math.pow(10,n),A=(logXEnbl?1<=V-I?1<(a=a<1?1:a)&&(p=p<a?p:a):p=0:p=5,(P-N)/10),n=Math.floor(Math.log10(A)),$=Math.ceil(A/Math.pow(10,n)),w=u.findIndex(function(e){return $<=e}),A=u[w]*Math.pow(10,n),c=(logYEnbl?1<=P-N?1<(A=A<1?1:A)&&(f=f<A?f:A):f=0:f=5,s.length<1&&4<=(V-I)/a&&(I=Math.floor(I/a)*a,V=Math.ceil(V/a)*a),d.length<1&&4<=(P-N)/A&&(N=Math.floor(N/A)*A,P=Math.ceil(P/A)*A),Math.ceil(I/a)*a),r=Math.floor(V/a)*a,o=Math.ceil(N/A)*A,S=Math.floor(P/A)*A,b=pltAr[2]*(c-I)/(V-I),X=pltAr[3]*(S-P)/(P-N),ee=100*(c-I)/(V-I),te=100*(S-P)/(P-N),le=Math.round((r-c)/a),ie=Math.round((S-o)/A),h=pltAr[2]>pltAr[3]?pltAr[2]/100:pltAr[3]/100,x=h/2;for(xTickLabel=logXEnbl?n2e(dec(c,a,r)):n2e(linspace(c,a,r)),yTickLabel=logYEnbl?n2e(dec(o,A,S)):n2e(linspace(o,A,S)),dXTick=pltAr[2]*a/(V-I),dXTickPct=100*a/(V-I),dYTick=pltAr[3]*A/(P-N),dYTickPct=100*A/(P-N),idx=0;idx<=ie;++idx){var ae=-te+dYTickPct*idx;(q=aST(W,yTickLabel[ie-idx],pltAr[0]-6,ae+"%",12,"end")).setAttribute("alignment-baseline","middle")}for(idx=0;idx<=le;++idx){var ne=dXTickPct*idx+ee;aST(Q,xTickLabel[idx],ne+"%",12*1.4,12)}var u=aSE(Y,"defs"),re=(k&&0<f&&(w=aSE(u,"g",{id:"mgy_"+t}),B&&aSL(w,0,1,pltAr[2],1,stroke="rgb(223,223,223)",strokedasharray="2 4"),aSL(w,0,1,x,1),aSL(w,pltAr[2]-x,1,pltAr[2],1),u.appendChild(w)),aSE(u,"pattern",{id:"yTick_"+t,x:0,y:X-1,width:pltAr[2],height:dYTick,patternUnits:"userSpaceOnUse"}));if(k&&0<f)for(logYEnbl&&1==A?(minorTickPos=los(1,9/(f-1),10)).forEach((e,t)=>{minorTickPos[t]=(1-minorTickPos[t])*dYTick}):minorTickPos=linspace(0,1/f*dYTick,dYTick),idx=1;idx<minorTickPos.length-1;++idx)aSE(re,"use",{href:"#mgy_"+t,y:minorTickPos[idx]});B&&aSL(re,0,1,pltAr[2],1,stroke="rgb(223,223,223)"),aSL(re,0,1,h,1),aSL(re,pltAr[2]-h,1,pltAr[2],1),aSE(Y,"rect",{x:0,y:0,width:pltAr[2],height:pltAr[3],fill:"url(#yTick_"+t+")"});var n=aSE(Y,"defs"),oe=(m&&0<p&&(s=aSE(n,"g",{id:"mgx_"+t}),B&&aSL(s,1,0,1,pltAr[3],stroke="rgb(223,223,223)",strokedasharray="2 4"),aSL(s,1,0,1,x),aSL(s,1,pltAr[3]-x,1,pltAr[3])),aSE(n,"pattern",{id:"xTick_"+t,x:b-1,y:0,width:dXTick,height:pltAr[3],patternUnits:"userSpaceOnUse"}));if(m&&0<p)for(logXEnbl&&1==a?(minorTickPos=los(1,9/(p-1),10)).forEach((e,t)=>{minorTickPos[t]*=dXTick}):minorTickPos=linspace(0,1/p*dXTick,dXTick),idx=1;idx<minorTickPos.length-1;++idx)aSE(oe,"use",{href:"#mgx_"+t,x:minorTickPos[idx],"vector-effect":"non-scaling-stroke"});B&&aSL(oe,1,0,1,pltAr[3],stroke="rgb(223,223,223)"),aSL(oe,1,0,1,h),aSL(oe,1,pltAr[3]-h,1,pltAr[3]),aSE(Y,"rect",{x:0,y:0,width:pltAr[2],height:pltAr[3],fill:"url(#xTick_"+t+")"});var se=l.length/i,de=e.length==l.length;if(!de&&se!=e.length)throw new Error("Dimension must agree");for(lnIdx=0;lnIdx<i;++lnIdx){var C=e.length,ge=new Array(2*C);for(colorIdx=lnIdx%v.length,ptIdx=0;ptIdx<se;++ptIdx){var he=de?e[lnIdx*se+ptIdx]:e[ptIdx],xe=l[lnIdx*se+ptIdx];ge[2*ptIdx]=pltAr[2]*(he-I)/(V-I),ge[2*ptIdx+1]=pltAr[3]-pltAr[3]*(xe-N)/(P-N)}C=document.createElementNS("http://www.w3.org/2000/svg","polyline");C.setAttribute("class","l"),C.setAttribute("id","pl_"+t+"_"+lnIdx),C.setAttribute("points",ge.join(" ")),C.setAttribute("stroke",v[colorIdx]),Y.appendChild(C)}aSE(Y,"rect",{x:0,y:0,width:pltAr[2],height:pltAr[3],fill:"none",stroke:"black","stroke-width":2,"vector-effect":"non-scaling-stroke"}),y.appendChild(Z),Y.onclick=e=>pC(e,t,pltAr[2],pltAr[3],I,V,N,P,logXEnbl,logYEnbl),y.oncontextmenu=e=>{e.preventDefault()},Y.onmousedown=e=>pM(e,t),y.onmousedown=e=>{e.preventDefault()},0<g.length&&(Z.onwheel=e=>sL(e,t,G)),new ResizeObserver(()=>rS(t,M[0],M[1],G,z)).observe(y)}
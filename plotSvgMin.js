{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=1/0,f=document,g=2,h=1,i=12,j=10,k="Lucida Sans Typewriter",l=20,m=4,n=4,o=400,p=4,q=24,r=12,s=[10,10],t=[10,10],u=[1,2,5,10],v=4*i,w=2*i,z=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],A="http://www.w3.org/2000/svg";function gE(e){return f.getElementById(e)}function sAt(e,t,l){e.setAttribute(t,l)}function gAt(e,t){return e.getAttribute(t)}function sz(e){return[e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value]}function vw(e){return[e.viewBox.baseVal.x,e.viewBox.baseVal.y,e.viewBox.baseVal.width,e.viewBox.baseVal.height]}function tr(e,t,l){t=null!=t?"translate("+t[0]+" "+t[1]+")":"";t+=null!=l?"scale("+l[0]+" "+l[1]+")":"",e.setAttribute("transform",t)}function n2e(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(l.length);for(let t=0;t<l.length;++t){var r=l[t].toExponential(5).split(/e/);let e=b(+r[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),i[t]=a(r[0]*10**(+r[1]-3*(e-8))*1e3)/1e3+n[e]}return i}function lis(t,l,e){var n=b((e-t)/l*(1+1e-12))+1;out=Array(n);for(let e=0;e<n;++e)out[e]=t+l*e;return out}function los(e,t,l){return lis(e,t,l).map(c)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var n,a="string"==typeof t?f.createElementNS(A,t):t;for(n in l)sAt(a,n,l[n]);return null!=e&&e.appendChild(a),a}function aST(e,t,l,n,a,i="middle",r="Sans,Arial",s="black"){e=aSE(e,"text",{x:l,y:n,fill:s,"font-size":a,"text-anchor":i,"font-family":r,"stroke-width":1});return e.append(f.createTextNode(t)),e}function aSL(e,t,l,n,a,i="black",r="",s=1){return aSE(e,"line",{x1:t,y1:l,x2:n,y2:a,stroke:i,"stroke-width":s,"stroke-dasharray":r,"vector-effect":"non-scaling-stroke"})}function aSR(e,t,l,n,a,i="none",r="none",s=2,o=0){return aSE(e,"rect",{x:t,y:l,width:n,height:a,rx:o,stroke:r,"stroke-width":s,fill:i,"vector-effect":"non-scaling-stroke"})}function iMP(e){var t=gE("sd_"+e),l=f.getElementsByClassName("marker_"+e);for(let e=0;e<l.length;++e){var n=sz(t),a=vw(t),i=a[2]/n[2],a=a[3]/n[3];l[e].transform.baseVal[1].matrix.a=i,l[e].transform.baseVal[1].matrix.d=a}}function cC(e,t,l){return x=e[0]/100*t[2]+t[0],y=(1-e[1]/100)*t[3]+t[1],x=l[0]?10**x:x,y=l[1]?10**y:y,[x,y]}function gNL(t,l,n,a,i,r){let s=null,o=e,c=0,g=0;var h=gE("gp_"+t),u=h.children.length;for(let e=0;e<u;++e){var f=h.children[e],d=f.points;for(let e=1;e<d.length;++e){var v,y,S,p,E,x,w=d[e-1],m=d[e];l<w.x-a&&l<m.x-a||l>w.x+a&&l>m.x+a||n<w.y-i&&n<m.y-i||n>w.y+i&&n>m.y+i||(S=((v=m.x-w.x)*(l-w.x)+(y=m.y-w.y)*(n-w.y))/(v*v+y*y),1<=(S=((v=w.x+v*S)-l)*(v-l)/a/a+((y=w.y+y*S)-n)*(y-n)/i/i))||S>o||(o=S,s=f,S=w.x<l?l-w.x:w.x-l,p=w.y<n?n-w.y:w.y-n,E=m.x<l?l-m.x:m.x-l,x=m.y<n?n-m.y:m.y-n,S<E&&S<a&&p<i?(c=w.x,g=w.y):E<a&&x<i?(c=m.x,g=m.y):r&&0!=gAt(f,"stroke-width")?(c=v,g=y):s=null)}}return{ele:s,x:c,y:g}}function pM(e,t){var l=gE("sd_"+t);let n=0;if(e.button==h||e.button==g&&e.shiftKey)n=1;else if(e.button!=g)return;l.style.cursor=n?"move":"zoom-in";l=gE("s_"+t);const a=e.offsetX,i=e.offsetY;var e=aSR(l,a,i,0,0,"black"),r=n?0:.3;aSE(null,e,{id:"zoom_rect"+t,"fill-opacity":r}),l.onmousemove=e=>pDZ(e,t,a,i)}function pDZ(e,t,l,n){var t=gE("zoom_rect"+t),a=e.offsetX,e=e.offsetY,l=a-l,n=e-n,i=0==gAt(t,"fill-opacity");i||0<=l?sAt(t,"width",l):aSE(null,t,{width:-l,x:a}),i||0<=n?sAt(t,"height",n):aSE(null,t,{height:-n,y:e})}function pZ(t,l,n,a,i){var r=gE("zoom_rect"+t),s=gE("s_"+t),o=gE("sd_"+t);if(o.style.cursor="crosshair",(s.onmousemove=null)!=r){var s=0==gAt(r,"fill-opacity"),c=sz(r);if(r.remove(),!~s||0!=c[2]&&0!=c[3]){r=vw(o),o=sz(o);let e=[];e=s?[-c[2]/o[2],c[3]/o[3],1,1]:[(c[0]-o[0])/o[2],1-(c[1]+c[3]-o[1])/o[3],c[2]/o[2],c[3]/o[3]];s=[l[0]+l[2]*r[0]/100,l[1]+l[3]*(100-r[3]-r[1])/100,l[2]*r[2]/100,l[3]*r[3]/100];sAL(t,[s[0]+e[0]*s[2],s[1]+e[1]*s[3],e[2]*s[2],e[3]*s[3]],l,n,a,i)}}}function sAL(e,t,l,n,a,i){for(var r=gE("sd_"+e),s=100*(t[0]-l[0])/l[2],o=100*(l[1]+l[3]-t[1]-t[3])/l[3],l=(r.viewBox.baseVal.width=100*t[2]/l[2],r.viewBox.baseVal.height=100*t[3]/l[3],r.viewBox.baseVal.x=s,r.viewBox.baseVal.y=o,gE("plr_"+e)),r=gE("cpr_"+e),c=(aSE(null,l,{x:s,y:o}),aSE(null,r,{x:s,y:o}),f.getElementsByClassName("cg_"+e));0<c.length;)c[0].remove();cGr(e,t,n,a,i),iMP(e)}function cTi(e,t,l){var t=e/t,n=b(c(t));const a=d(t/10**n);var i=u.findIndex(function(e){return e>=a}),t=u[i]*10**n;return l&&1<=e&&t<1?1:t}function cGr(o,e,c,l,g){var h=gE("s_bg_"+o),u=gE("sy_"+o),f=gE("s_btm_"+o);for(let r=0;r<2;++r){var v=0<r?u:f,y=cTi(e[2+r],s[r],g[r]),S=e[r]+e[2+r],p=d(e[r]/y)*y,S=b(S/y)*y,E=100*(0<r?e[r]+e[r+2]-S:p-e[r])/e[2+r],x=a((S-p)/y);let n=Array();n=g[r]?n2e(dec(p,y,S)):n2e(lis(p,y,S));const _=100*y/e[2+r];var p=aSE(h,"defs",{class:"cg_"+o}),w=aSE(p,"g",{id:"mg"+r+"_"+o}),S=g[r]||l[r]?t[r]:0;if(0<S){let l=Array();g[r]&&1==y?(l=los(1,9/(S-1),10)).forEach((e,t)=>{l[t]=l[t]*_}):l=lis(0,2/S*_,_);for(let e=1;e<l.length-1;++e)aTL(w,o,0<r?_-l[e]:l[e],c,r,4,"2 4")}aTL(w,o,0,c,r,8,"");for(let l=-1;l<=x;++l){var m=E+_*l;let e=null,t=(0<=l&&aSE(null,e=0<r?aST(v,n[x-l],sz(v)[2]-.5*i,m+"%",i,"end"):aST(v,n[l],m+"%",.9*i,i),{"dominant-baseline":"central",class:"cg_"+o}),[m,0]);0<r&&(t=[t[1],t[0]]),aSE(h,"use",{href:"#mg"+r+"_"+o,x:t[0],y:t[1],class:"cg_"+o})}}}function aTL(e,t,l,n,a,i,r){let s=[l,0,0,i,l,100];0<a&&(s=[s[1],s[0],s[3],s[2],s[5],s[4]]),n&&aSL(e,s[0],s[1],s[4],s[5],"rgb(223,223,223)",r);i=aSL(e,0,0,s[2],s[3]),l=aSL(e,-s[2],-s[3],0,0);tr(i,[s[0],s[1]],[1,1]),tr(l,[s[4],s[5]],[1,1]),aSE(null,i,{class:"marker_"+t}),aSE(null,l,{class:"marker_"+t})}function plotSvg(g,a,h,u,{title:y="",subtitle:t="",xlabel:S="",ylabel:E="",xlim:x=[],ylim:_=[],style:L="-",marker:T="",legend:B=[],xScale:le="lin",yScale:ne="lin",grid:N=!0,gridMinor:V=[],legendLocation:R="northeastoutside",linTip:ae=!0}={}){let M=[!1,!1];"log"==le&&(a=a.map(c),1<x.length&&(x=x.map(c),isNaN(x[0])||isNaN(x[1])?x=[]:(x[0]=x[0]==-e?0:x[0],x[1]=x[1]==-e?0:x[1])),M[0]=!0),"log"==ne&&(h=h.map(c),1<_.length&&(_=_.map(c),isNaN(_[0])||isNaN(_[1])?_=[]:(_[0]=_[0]==-e?0:_[0],_[1]=_[1]==-e?0:_[1])),M[1]=!0);var C=gE(g),Y=f.createElement("div");aSE(C,Y),sAt(Y,"style","width:100%;height:100%;min-width:"+o+"px;min-height:200px;overflow:none");const D=aSE(Y,"svg",{id:"s_"+g,width:"100%",height:"100%"});C=sz(D);D.innerHTML+="<style>\n<![CDATA[\ntext.cll {\nfont-size:"+j+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+k+";\n}\n.b:hover polyline{\nopacity:0.5;\n}\n]]>\n</style>\n";let P=0,G=v;var ie=y.split("\n"),re=t.split("\n");0<y.length&&(P+=(q+p)*ie.length),0<t.length&&(P+=(r+p)*re.length),P=P<19?25:P+6;let Z=C[3]-P-w,U=C[2]-G;0<S.length&&(Z=Z-i-p),0<E.length&&(G=G+i+2*p,U=U-i-2*p);Y=aSE(null,"g",{"pointer-events":"visible"});Y.onclick=e=>ze(e,0),Y.ondblclick=e=>ze(e,u);let se=0,X=0,oe="none",F=null,ce=null;if(0<B.length&&0<u&&0<a.length){let e=P;"northeast"==R&&(e=P+2*n,se=4*n,oe="white");var H=Z-se,I=aSE(D,"defs"),ge=(F=aSE(Y,"svg",{id:"sl_"+g}),aSE(D,Y),aSE(I,"line",{id:"ll_"+g,x1:0,y1:0,x2:l,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),u);let a=B;B.length>u&&(a=B.slice(0,ge));I=(X=ge*(j+n)+n)>H?H:X;aSE(null,F,{x:"100%",height:I}),aSE(null,ce=aSR(F,0,0,0,"100%",oe,"black"),{id:"rect_leg_"+g});for(let t=0;t<ge;++t){var he=t%z.length,ue=t*(j+n)+n,fe=new aSE(F,"g",{id:"lgi_"+g+"_"+t}),he=(aSE(fe,"use",{id:"lli_"+g+"_"+t,x:m,y:ue+j/2,href:"#ll_"+g,stroke:z[he]}),aSE(fe,"text",{id:"lti_"+g+"_"+t,class:"cll",x:m+l+m,y:ue+j/2}));let e="";t<a.length&&(e=a[t]),he.append(f.createTextNode(e))}H=(H=Y.getBBox().width+2*m)>o?o:H;sAt(ce,"width","100%"),sAt(F,"width",H);let t=-H-m;U-=H+2*m,"northeast"==R&&(t-=m+v,U-=v-H-2*m),aSE(null,F,{x:C[2]+t,y:e,viewBox:"0 0 "+H+" "+I})}else U-=v;R=[G,P,U,Z];let de=[C[2]-R[2],C[3]-R[3]];const O=aSE(D,"svg",{id:"st_"+g,x:R[0],overflow:"visible",width:R[2]});let K=0;if(0<y.length)for(let e=0;e<ie.length;++e)K=K+q+p,aST(O,ie[e],"50%",K,q);if(0<t.length)for(let e=0;e<re.length;++e)K=K+r+p,aST(O,re[e],"50%",K,r);H=-C[3]+R[1]+R[3],I=aSE(D,"g");tr(I,[R[0],H]);const ve=aSE(I,"svg",{id:"s_btm_"+g,overflow:"visible",y:"100%",width:R[2]}),ye=(0<S.length&&aST(ve,S,"50%",3*i,i),aSE(D,"svg",{id:"sy_"+g,width:R[0],y:R[1],overflow:"visible",height:R[3]}));0<E.length&&aSE(ye,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":i,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:R[0]-4*i-p}).append(f.createTextNode(E));t=Te(a,x),C=Te(h,_);let W=[t[0],C[0],t[1]-t[0],C[1]-C[0]];const Se=aSE(D,"svg",{id:"s_bg_"+g,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:R[2],height:R[3],x:R[0],y:R[1]}),J=aSE(D,"svg",{id:"sd_"+g,preserveAspectRatio:"none",viewBox:"0 0 100 100",overflow:"visible",width:R[2],height:R[3],x:R[0],y:R[1]});let Q=[!(J.style.cursor="crosshair"),!1];V.length<1?(Q[0]="log"==le,Q[1]="log"==ne):(Q[0]=V[0],Q[1]=V[1]);H=cTi(W[2],s[0],M[0]),I=cTi(W[3],s[1],M[1]);x.length<1&&4<=W[2]/H&&(W[0]=b(t[0]/H)*H,W[2]=d(t[1]/H)*H-W[0]),_.length<1&&4<=W[3]/I&&(W[1]=b(C[0]/I)*I,W[3]=d(C[1]/I)*I-W[1]),cGr(g,W,N,Q,M);const pe=aSE(J,"defs");""!=T&&(te("o",[aSE(null,"circle",{r:"5"})],1),te("+",[aSL(null,0,-5,0,5,"","",""),aSL(null,-5,0,5,0,"","","")]),te("*",[aSL(null,0,-5,0,5,"","",""),aSL(null,-5,0,5,0,"","",""),aSL(null,-3.5,-3.5,3.5,3.5,"","",""),aSL(null,-3.5,3.5,3.5,-3.5,"","","")]),te(".",[aSE(null,"circle",{r:"1.5","stroke-width":3})]),te("x",[aSL(null,-3.5,-3.5,3.5,3.5,"","",""),aSL(null,-3.5,3.5,3.5,-3.5,"","","")]),te("_",[aSL(null,-5,0,5,0,"","","")]),te("|",[aSL(null,0,-5,0,5,"","","")]),te("sq",[aSR(null,-5,-5,10,10,"","","")],1),te("^",[aSE(null,"polygon",{points:"-5 3, 0 -5, 5 3"})],1),te("v",[aSE(null,"polygon",{points:"-5 -4, 0 5, 5 -4"})],1),te("tr",[aSE(null,"polygon",{points:"-3 -5, 5 0, -3 5"})],1),te("tl",[aSE(null,"polygon",{points:"-5 0, 3 5, 3 -5"})],1));var $=h.length/u,Ee=a.length==h.length;if(!Ee&&$!=a.length)throw new Error("Dimension must agree");var S=aSE(J,"clipPath",{id:"cpg_"+g}),xe=(aSE(null,aSR(S,0,0,"100%","100%"),{id:"cpr_"+g}),aSE(J,"g",{id:"gp_"+g,"clip-path":"url(#cpg_"+g+")"}));for(let l=0;l<u;++l){var we=l%z.length,me=Array.isArray(L)?L[l]:L,be="url(#m"+(Array.isArray(T)?T[l]:T)+")";let e="",t=2;switch(me){case":":e="2 3";break;case"--":e="12 6";break;case"-.":e="9 3 3 3";break;case"*":t=0}var _e=aSE(xe,"polyline",{class:"l",id:"pl_"+g+"_"+l,stroke:z[we],"stroke-dasharray":e,"marker-start":be,"marker-mid":be,"marker-end":be,"stroke-width":t,"vector-effect":"non-scaling-stroke",fill:"none"});for(let e=0;e<$;++e){var ke,Ae=Ee?a[l*$+e]:a[e],Le=h[l*$+e];isFinite(Ae)&&isFinite(Le)&&((ke=J.createSVGPoint()).x=100*(Ae-W[0])/W[2],ke.y=100-100*(Le-W[1])/W[3],_e.points.appendItem(ke))}}E=aSR(J,0,0,"100%","100%","none","black",1);aSE(null,E,{id:"plr_"+g,"pointer-events":"visible"}),"white"==oe&&aSE(D,Y);const ee=aSE(O,"g",{id:"bd_"+g,"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round",class:"b","pointer-events":"visible"});function Te(a,i){if(i.length<2){let t=a.length,l=-e,n=e;for(;t--;)isFinite(a[t])&&(n=a[t]<n?a[t]:n,l=a[t]>l?a[t]:l);i=[n,l]}return i[0]==i[1]&&(i[0]=i[0]-.5,i[1]=i[1]+.5),i}function te(e,t,l=0){var n=aSE(pe,"marker",{id:"m"+e,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"userSpaceOnUse",fill:"none",stroke:"context-stroke"}),a=aSE(n,"g",{"stroke-width":1.5,"vector-effect":"non-scaling-stroke",class:"marker_"+g});tr(a,[5,5],[1,1]);for(let e=0;e<t.length;++e)aSE(a,t[e]);l&&aSE(pe,n.cloneNode(!0),{id:"mf"+e,fill:"context-stroke"})}function Be(e,t,l=0){var n=gE("gpl_"+e+"_"+t),a=l?"block":"none";gE("pl_"+e+"_"+t).style.display=a,gE("lgi_"+e+"_"+t).style.opacity=.3+.7*l,null!=n&&(n.style.display=a)}function ze(e,t){var e=e.offsetY-gAt(F,"y")+vw(F)[1],l=b((e-n/2)/(j+n)),e=gE("pl_"+g+"_"+l);if(null!=e){var a="block"==e.style.display,i=0==t?l+1:t;for(let e=0==t?l:0;e<i;++e)a?e==l&&0!=t||Be(g,e):Be(g,e,1)}}function Ne(){var e=sz(D),t=sz(J),l=e[2]-de[0],e=e[3]-de[1];t[2]!=l&&(sAt(J,"width",l),sAt(Se,"width",l),sAt(O,"width",l),sAt(ve,"width",l),null!=F&&(F.x.baseVal.value+=l-t[2]),ee.transform.baseVal[0].matrix.e+=l-t[2]),t[3]!=e&&(sAt(J,"height",e),sAt(Se,"height",e),sAt(ye,"height",e),null!=F)&&(l=(l=e-se)>X?X:l,sAt(F,"height",l),F.viewBox.baseVal.height=l),iMP(g)}tr(ee,[R[2]-18,R[1]-24]),aSE(ee,"polyline",{stroke:"black",fill:"none",points:"8,0 8,16 2,9 8,16 14,9"}),aSE(ee,"polyline",{stroke:"black",fill:"none",points:"0,17 0,20 16,20 16,17"}),aSR(ee,0,0,21,21),ee.onclick=()=>{var e,t;ee.style.display="none",e='<svg width="'+(e=sz(D))[2]+'" height="'+e[3]+'" xmlns="'+A+'">',e=new Blob([e,D.innerHTML,"</svg>"],{type:"image/svg+xml;charset=utf-8"}),e=URL.createObjectURL(e),(t=f.createElement("a")).href=e,t.download="snapshot_"+y+".svg",aSE(f.body,t),t.click(),f.body.removeChild(t),ee.style.display="block"},E.onclick=l=>{var n=sz(J),a=(s=vw(J))[2]/n[2],i=s[3]/n[3],r=(l.offsetX-n[0])*a+s[0],l=(l.offsetY-n[1])*i+s[1],r=(result=gNL(g,r,l,n=6*a,s=6*i,ae)).ele;if(null!=r){var l=result.x,n=result.y,s="pl_"+g,r=r.id,s=r.slice(s.length,r.length),r=gE("lti_"+g+s),o=gAt(gE("pl_"+g+s),"stroke"),c=cC([l,n],W,M);let e=gE("gpl_"+g+s);null==e&&(e=aSE(J,"g",{id:"gpl_"+g+s}));s=aSE(e,"g",{class:"marker_"+g}),l=(tr(s,[l,n],[a,i]),aSR(s,5,-9,0,32,o,"rgb(223,223,223)",1,rx=4));s.onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove(),1<e.detail&&sAL(g,W,W,N,Q,M)};let t=null;null!=r&&(aSE(null,text=aST(s,r.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),t=aSL(s,5,-8,5,-8,stroke="white"),aSE(null,l,{y:-23,height:46})),aST(s,"x: "+n2e([c[0]]),7,4,12,"start","Sans,Arial","white"),aST(s,"y: "+n2e([c[1]]),7,18,12,"start","Sans,Arial","white");n=s.getBBox();aSE(null,l,{width:n.width+4}),null!=t&&sAt(t,"x2",n.width+4+5),aSR(s,-2,-2,4,4,"black"),aSE(s,"circle",{r:6,fill:"none","pointer-events":"visible"})}},D.oncontextmenu=e=>{e.preventDefault()},J.onmousedown=e=>pM(e,g),J.ondblclick=()=>sAL(g,W,W,N,Q,M),D.onmousedown=e=>{e.preventDefault()},D.onmouseup=()=>pZ(g,W,N,Q,M),0<B.length&&(Y.onwheel=e=>{X;var t=sz(F),l=vw(F),t=X-t[3];return l[1]+=e.deltaY,l[1]<0&&(l[1]=0),t<l[1]&&(l[1]=t),F.viewBox.baseVal.y=l[1],ce.y.baseVal.value=l[1],!1}),new ResizeObserver(()=>Ne()).observe(D),Ne()}}
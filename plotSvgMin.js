{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=1/0,f=document,g=2,h=1,i=12,j=10,k="Lucida Sans Typewriter",l=20,m=4,n=4,o=400,p=4,q=24,r=12,s=[10,10],t=[10,10],u=[1,2,5,10],v=4*i,w=2*i,x=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],y="http://www.w3.org/2000/svg";function gE(e){return f.getElementById(e)}function sAt(e,t,l){e.setAttribute(t,l)}function gAt(e,t){return e.getAttribute(t)}function sz(e){return[e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value]}function vw(e){return[e.viewBox.baseVal.x,e.viewBox.baseVal.y,e.viewBox.baseVal.width,e.viewBox.baseVal.height]}function tr(e,t,l){t=null!=t?"translate("+t[0]+" "+t[1]+")":"";t+=null!=l?"scale("+l[0]+" "+l[1]+")":"",e.setAttribute("transform",t)}function n2e(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],r=Array(l.length);for(let t=0;t<l.length;++t){var i=l[t].toExponential(5).split(/e/);let e=b(+i[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),r[t]=a(i[0]*10**(+i[1]-3*(e-8))*1e3)/1e3+n[e]}return r}function lis(t,l,e){var n=b((e-t)/l*(1+1e-12))+1;out=Array(n);for(let e=0;e<n;++e)out[e]=t+l*e;return out}function los(e,t,l){return lis(e,t,l).map(c)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var n,a="string"==typeof t?f.createElementNS(y,t):t;for(n in l)sAt(a,n,l[n]);return null!=e&&e.appendChild(a),a}function aST(e,t,l,n,a,r="middle",i="Sans,Arial",o="black"){e=aSE(e,"text",{x:l,y:n,fill:o,"font-size":a,"text-anchor":r,"font-family":i,"stroke-width":1});return e.append(f.createTextNode(t)),e}function aSL(e,t,l,n,a,r="black",i="",o=1){return aSE(e,"line",{x1:t,y1:l,x2:n,y2:a,stroke:r,"stroke-width":o,"stroke-dasharray":i,"vector-effect":"non-scaling-stroke"})}function aSR(e,t,l,n,a,r="none",i="none",o=2,s=0){return aSE(e,"rect",{x:t,y:l,width:n,height:a,rx:s,stroke:i,"stroke-width":o,fill:r,"vector-effect":"non-scaling-stroke"})}function pM(e,t){var l=gE("sd_"+t);let n=0;if(e.button==h||e.button==g&&e.shiftKey)n=1;else if(e.button!=g)return;l.style.cursor=n?"move":"zoom-in";l=gE("s_"+t);const a=e.offsetX,r=e.offsetY;var e=aSR(l,a,r,0,0,"black"),i=n?0:.3;aSE(null,e,{id:"zoom_rect"+t,"fill-opacity":i}),l.onmousemove=e=>pDZ(e,t,a,r)}function pDZ(e,t,l,n){var t=gE("zoom_rect"+t),a=e.offsetX,e=e.offsetY,l=a-l,n=e-n,r=0==gAt(t,"fill-opacity");r||0<=l?sAt(t,"width",l):aSE(null,t,{width:-l,x:a}),r||0<=n?sAt(t,"height",n):aSE(null,t,{height:-n,y:e})}function cTi(e,t,l){var t=e/t,n=b(c(t));const a=d(t/10**n);var r=u.findIndex(function(e){return e>=a}),t=u[r]*10**n;return l&&1<=e&&t<1?1:t}function cGr(o,e,c,l,g){var h=gE("s_bg_"+o),u=gE("sy_"+o),f=gE("s_btm_"+o);for(let r=0;r<2;++r){var v=0<r?u:f,S=cTi(e[2+r],s[r],g[r]),y=e[r]+e[2+r],p=d(e[r]/S)*S,y=b(y/S)*S,E=100*(0<r?e[r]+e[r+2]-y:p-e[r])/e[2+r],x=a((y-p)/S);let n=Array();n=g[r]?n2e(dec(p,S,y)):n2e(lis(p,S,y));const k=100*S/e[2+r];var p=aSE(h,"defs",{class:"cg_"+o}),w=aSE(p,"g",{id:"mg"+r+"_"+o}),y=g[r]||l[r]?t[r]:0;if(0<y){let l=Array();g[r]&&1==S?(l=los(1,9/(y-1),10)).forEach((e,t)=>{l[t]=l[t]*k}):l=lis(0,2/y*k,k);for(let e=1;e<l.length-1;++e)aTL(w,o,0<r?k-l[e]:l[e],c,r,4,"2 4")}aTL(w,o,0,c,r,8,"");for(let l=-1;l<=x;++l){var m=E+k*l;let e=null,t=(0<=l&&aSE(null,e=0<r?aST(v,n[x-l],sz(v)[2]-.5*i,m+"%",i,"end"):aST(v,n[l],m+"%",.9*i,i),{"dominant-baseline":"central",class:"cg_"+o}),[m,0]);0<r&&(t=[t[1],t[0]]),aSE(h,"use",{href:"#mg"+r+"_"+o,x:t[0],y:t[1],class:"cg_"+o})}}}function aTL(e,t,l,n,a,r,i){let o=[l,0,0,r,l,100];0<a&&(o=[o[1],o[0],o[3],o[2],o[5],o[4]]),n&&aSL(e,o[0],o[1],o[4],o[5],"rgb(223,223,223)",i);r=aSL(e,0,0,o[2],o[3]),l=aSL(e,-o[2],-o[3],0,0);tr(r,[o[0],o[1]],[1,1]),tr(l,[o[4],o[5]],[1,1]),aSE(null,r,{class:"marker_"+t}),aSE(null,l,{class:"marker_"+t})}function plotSvg(g,h,u,S,{title:a="",subtitle:t="",xlabel:E="",ylabel:_="",xlim:A=[],ylim:T=[],style:L="-",marker:B="",legend:z=[],xScale:le="lin",yScale:ne="lin",grid:ae=!0,gridMinor:V=[],legendLocation:N="northeastoutside",linTip:re=!0}={}){let R=[!1,!1];"log"==le&&(h=h.map(c),1<A.length&&(A=A.map(c),isNaN(A[0])||isNaN(A[1])?A=[]:(A[0]=A[0]==-e?0:A[0],A[1]=A[1]==-e?0:A[1])),R[0]=!0),"log"==ne&&(u=u.map(c),1<T.length&&(T=T.map(c),isNaN(T[0])||isNaN(T[1])?T=[]:(T[0]=T[0]==-e?0:T[0],T[1]=T[1]==-e?0:T[1])),R[1]=!0);var M=gE(g),Y=f.createElement("div");aSE(M,Y),sAt(Y,"style","width:100%;height:100%;min-width:"+o+"px;min-height:200px;overflow:none");const C=aSE(Y,"svg",{id:"s_"+g,width:"100%",height:"100%"});M=sz(C);C.innerHTML+="<style>\n<![CDATA[\ntext.cll {\nfont-size:"+j+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+k+";\n}\n.b:hover polyline{\nopacity:0.5;\n}\n]]>\n</style>\n";let D=0,G=v;var U=a.split("\n"),ie=t.split("\n");0<a.length&&(D+=(q+p)*U.length),0<t.length&&(D+=(r+p)*ie.length),D=D<19?25:D+6;let X=M[3]-D-w,F=M[2]-G;0<E.length&&(X=X-i-p),0<_.length&&(G=G+i+2*p,F=F-i-2*p);Y=aSE(null,"g",{"pointer-events":"visible"});Y.onclick=e=>Ne(e,0),Y.ondblclick=e=>Ne(e,S);let oe=0,H=0,se="none",I=null,ce=null;if(0<z.length&&0<S&&0<h.length){let e=D;"northeast"==N&&(e=D+2*n,oe=4*n,se="white");var O=X-oe,P=aSE(C,"defs"),ge=(I=aSE(Y,"svg",{id:"sl_"+g}),aSE(C,Y),aSE(P,"line",{id:"ll_"+g,x1:0,y1:0,x2:l,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),S);let a=z;z.length>S&&(a=z.slice(0,ge));P=(H=ge*(j+n)+n)>O?O:H;aSE(null,I,{x:"100%",height:P}),aSE(null,ce=aSR(I,0,0,0,"100%",se,"black"),{id:"rect_leg_"+g});for(let t=0;t<ge;++t){var he=t%x.length,ue=t*(j+n)+n,fe=new aSE(I,"g",{id:"lgi_"+g+"_"+t}),he=(aSE(fe,"use",{id:"lli_"+g+"_"+t,x:m,y:ue+j/2,href:"#ll_"+g,stroke:x[he]}),aSE(fe,"text",{id:"lti_"+g+"_"+t,class:"cll",x:m+l+m,y:ue+j/2}));let e="";t<a.length&&(e=a[t]),he.append(f.createTextNode(e))}O=(O=Y.getBBox().width+2*m)>o?o:O;sAt(ce,"width","100%"),sAt(I,"width",O);let t=-O-m;F-=O+2*m,"northeast"==N&&(t-=m+v,F-=v-O-2*m),aSE(null,I,{x:M[2]+t,y:e,viewBox:"0 0 "+O+" "+P})}else F-=v;N=[G,D,F,X];let de=[M[2]-N[2],M[3]-N[3]];const Z=aSE(C,"svg",{id:"st_"+g,x:N[0],overflow:"visible",width:N[2]});let K=0;if(0<a.length)for(let e=0;e<U.length;++e)K=K+q+p,aST(Z,U[e],"50%",K,q);if(0<t.length)for(let e=0;e<ie.length;++e)K=K+r+p,aST(Z,ie[e],"50%",K,r);O=-M[3]+N[1]+N[3],P=aSE(C,"g");tr(P,[N[0],O]);const ve=aSE(P,"svg",{id:"s_btm_"+g,overflow:"visible",y:"100%",width:N[2]}),Se=(0<E.length&&aST(ve,E,"50%",3*i,i),aSE(C,"svg",{id:"sy_"+g,width:N[0],y:N[1],overflow:"visible",height:N[3]}));0<_.length&&aSE(Se,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":i,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:N[0]-4*i-p}).append(f.createTextNode(_));t=ze(h,A),M=ze(u,T);let W=[t[0],M[0],t[1]-t[0],M[1]-M[0]];const ye=aSE(C,"svg",{id:"s_bg_"+g,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:N[2],height:N[3],x:N[0],y:N[1]}),J=aSE(C,"svg",{id:"sd_"+g,preserveAspectRatio:"none",viewBox:"0 0 100 100",overflow:"visible",width:N[2],height:N[3],x:N[0],y:N[1]});let Q=[!(J.style.cursor="crosshair"),!1];V.length<1?(Q[0]="log"==le,Q[1]="log"==ne):(Q[0]=V[0],Q[1]=V[1]);O=cTi(W[2],s[0],R[0]),P=cTi(W[3],s[1],R[1]);A.length<1&&4<=W[2]/O&&(W[0]=b(t[0]/O)*O,W[2]=d(t[1]/O)*O-W[0]),T.length<1&&4<=W[3]/P&&(W[1]=b(M[0]/P)*P,W[3]=d(M[1]/P)*P-W[1]),cGr(g,W,ae,Q,R);const pe=aSE(J,"defs");""!=B&&(te("o",[aSE(null,"circle",{r:"5"})],1),te("+",[aSL(null,0,-5,0,5,"","",""),aSL(null,-5,0,5,0,"","","")]),te("*",[aSL(null,0,-5,0,5,"","",""),aSL(null,-5,0,5,0,"","",""),aSL(null,-3.5,-3.5,3.5,3.5,"","",""),aSL(null,-3.5,3.5,3.5,-3.5,"","","")]),te(".",[aSE(null,"circle",{r:"1.5","stroke-width":3})]),te("x",[aSL(null,-3.5,-3.5,3.5,3.5,"","",""),aSL(null,-3.5,3.5,3.5,-3.5,"","","")]),te("_",[aSL(null,-5,0,5,0,"","","")]),te("|",[aSL(null,0,-5,0,5,"","","")]),te("sq",[aSR(null,-5,-5,10,10,"","","")],1),te("^",[aSE(null,"polygon",{points:"-5 3, 0 -5, 5 3"})],1),te("v",[aSE(null,"polygon",{points:"-5 -4, 0 5, 5 -4"})],1),te("tr",[aSE(null,"polygon",{points:"-3 -5, 5 0, -3 5"})],1),te("tl",[aSE(null,"polygon",{points:"-5 0, 3 5, 3 -5"})],1));var $=u.length/S,Ee=h.length==u.length;if(!Ee&&$!=h.length)throw new Error("Dimension must agree");E=aSE(J,"clipPath",{id:"cpg_"+g});const xe=aSE(null,aSR(E,0,0,"100%","100%"),{id:"cpr_"+g});var we=aSE(J,"g",{id:"gp_"+g,"clip-path":"url(#cpg_"+g+")"});for(let l=0;l<S;++l){var me=l%x.length,be=Array.isArray(L)?L[l]:L,ke="url(#m"+(Array.isArray(B)?B[l]:B)+"_"+g+")";let e="",t=2;switch(be){case":":e="2 3";break;case"--":e="12 6";break;case"-.":e="9 3 3 3";break;case"*":t=0}var _e=aSE(we,"polyline",{class:"l",id:"pl_"+g+"_"+l,stroke:x[me],"stroke-dasharray":e,"marker-start":ke,"marker-mid":ke,"marker-end":ke,"stroke-width":t,"vector-effect":"non-scaling-stroke",fill:"none"});for(let e=0;e<$;++e){var Ae,Te=Ee?h[l*$+e]:h[e],Le=u[l*$+e];isFinite(Te)&&isFinite(Le)&&((Ae=J.createSVGPoint()).x=100*(Te-W[0])/W[2],Ae.y=100-100*(Le-W[1])/W[3],_e.points.appendItem(Ae))}}_=aSR(J,0,0,"100%","100%","none","black",1);const Be=aSE(null,_,{id:"plr_"+g,"pointer-events":"visible"}),ee=("white"==se&&aSE(C,Y),aSE(Z,"g",{id:"bd_"+g,"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round",class:"b","pointer-events":"visible"}));function ze(a,r){if(r.length<2){let t=a.length,l=-e,n=e;for(;t--;)isFinite(a[t])&&(n=a[t]<n?a[t]:n,l=a[t]>l?a[t]:l);r=[n,l]}return r[0]==r[1]&&(r[0]=r[0]-.5,r[1]=r[1]+.5),r}function te(e,t,l=0){var n=aSE(pe,"marker",{id:"m"+e+"_"+g,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"userSpaceOnUse",fill:"none",stroke:"context-stroke"}),a=aSE(n,"g",{"stroke-width":1.5,"vector-effect":"non-scaling-stroke",class:"marker_"+g});tr(a,[5,5],[1,1]);for(let e=0;e<t.length;++e)aSE(a,t[e]);l&&aSE(pe,n.cloneNode(!0),{id:"mf"+e+"_"+g,fill:"context-stroke"})}function Ve(e,t,l=0){var n=gE("gpl_"+e+"_"+t),a=l?"block":"none";gE("pl_"+e+"_"+t).style.display=a,gE("lgi_"+e+"_"+t).style.opacity=.3+.7*l,null!=n&&(n.style.display=a)}function Ne(e,t){var e=e.offsetY-gAt(I,"y")+vw(I)[1],l=b((e-n/2)/(j+n)),e=gE("pl_"+g+"_"+l);if(null!=e){var a="block"==e.style.display,r=0==t?l+1:t;for(let e=0==t?l:0;e<r;++e)a?e==l&&0!=t||Ve(g,e):Ve(g,e,1)}}function Re(){var e=sz(C),t=sz(J),l=e[2]-de[0],e=e[3]-de[1];t[2]!=l&&(sAt(J,"width",l),sAt(ye,"width",l),sAt(Z,"width",l),sAt(ve,"width",l),null!=I&&(I.x.baseVal.value+=l-t[2]),ee.transform.baseVal[0].matrix.e+=l-t[2]),t[3]!=e&&(sAt(J,"height",e),sAt(ye,"height",e),sAt(Se,"height",e),null!=I)&&(l=(l=e-oe)>H?H:l,sAt(I,"height",l),I.viewBox.baseVal.height=l),Me()}function Me(){var t=f.getElementsByClassName("marker_"+g);for(let e=0;e<t.length;++e){var l=sz(J),n=vw(J),a=n[2]/l[2],n=n[3]/l[3];t[e].transform.baseVal[1].matrix.a=a,t[e].transform.baseVal[1].matrix.d=n}}function Ye(e){for(var t=100*(e[0]-W[0])/W[2],l=100*(W[1]+W[3]-e[1]-e[3])/W[3],n=(J.viewBox.baseVal.width=100*e[2]/W[2],J.viewBox.baseVal.height=100*e[3]/W[3],J.viewBox.baseVal.x=t,J.viewBox.baseVal.y=l,aSE(null,Be,{x:t,y:l}),aSE(null,xe,{x:t,y:l}),f.getElementsByClassName("cg_"+g));0<n.length;)n[0].remove();cGr(g,e,ae,Q,R),Me()}tr(ee,[N[2]-18,N[1]-24]),aSE(ee,"polyline",{stroke:"black",fill:"none",points:"8,0 8,16 2,9 8,16 14,9"}),aSE(ee,"polyline",{stroke:"black",fill:"none",points:"0,17 0,20 16,20 16,17"}),aSR(ee,0,0,21,21),ee.onclick=()=>{var e,t;ee.style.display="none",e='<svg width="'+(e=sz(C))[2]+'" height="'+e[3]+'" xmlns="'+y+'">',e=new Blob([e,C.innerHTML,"</svg>"],{type:"image/svg+xml;charset=utf-8"}),e=URL.createObjectURL(e),(t=f.createElement("a")).href=e,t.download="snapshot_"+a+".svg",aSE(f.body,t),t.click(),f.body.removeChild(t),ee.style.display="block"},_.onclick=l=>{var n=sz(J),a=(o=vw(J))[2]/n[2],r=o[3]/n[3],i=(l.offsetX-n[0])*a+o[0],l=(l.offsetY-n[1])*r+o[1],i=(result=function(t,l,n,a,r,i){let o=null,s=e,c=0,g=0;var h=gE("gp_"+t),u=h.children.length;for(let e=0;e<u;++e){var f=h.children[e],d=f.points;for(let e=1;e<d.length;++e){var v,S,y,p,E,x,w=d[e-1],m=d[e];l<w.x-a&&l<m.x-a||l>w.x+a&&l>m.x+a||n<w.y-r&&n<m.y-r||n>w.y+r&&n>m.y+r||(v=m.x-w.x,y=(v*(l-w.x)+(S=m.y-w.y)*(n-w.y))/(v*v+S*S),1<=(y=((v=w.x+v*y)-l)*(v-l)/a/a+((S=w.y+S*y)-n)*(S-n)/r/r))||y>s||(s=y,o=f,y=w.x<l?l-w.x:w.x-l,p=w.y<n?n-w.y:w.y-n,E=m.x<l?l-m.x:m.x-l,x=m.y<n?n-m.y:m.y-n,y<E&&y<a&&p<r?(c=w.x,g=w.y):E<a&&x<r?(c=m.x,g=m.y):i&&0!=gAt(f,"stroke-width")?(c=v,g=S):o=null)}}return{ele:o,x:c,y:g}}(g,i,l,n=6*a,o=6*r,re)).ele;if(null!=i){var l=result.x,n=result.y,o="pl_"+g,i=i.id,o=i.slice(o.length,i.length),i=gE("lti_"+g+o),s=gAt(gE("pl_"+g+o),"stroke"),c=function(e,t,l){return h=e[0]/100*t[2]+t[0],u=(1-e[1]/100)*t[3]+t[1],[h=l[0]?10**h:h,u=l[1]?10**u:u]}([l,n],W,R);let e=gE("gpl_"+g+o);null==e&&(e=aSE(J,"g",{id:"gpl_"+g+o}));o=aSE(e,"g",{class:"marker_"+g}),l=(tr(o,[l,n],[a,r]),aSR(o,5,-9,0,32,s,"rgb(223,223,223)",1,rx=4));o.onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove(),1<e.detail&&Ye(W)};let t=null;null!=i&&(aSE(null,text=aST(o,i.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),t=aSL(o,5,-8,5,-8,stroke="white"),aSE(null,l,{y:-23,height:46})),aST(o,"x: "+n2e([c[0]]),7,4,12,"start","Sans,Arial","white"),aST(o,"y: "+n2e([c[1]]),7,18,12,"start","Sans,Arial","white");n=o.getBBox();aSE(null,l,{width:n.width+4}),null!=t&&sAt(t,"x2",n.width+4+5),aSR(o,-2,-2,4,4,"black"),aSE(o,"circle",{r:6,fill:"none","pointer-events":"visible"})}},C.oncontextmenu=e=>{e.preventDefault()},J.onmousedown=e=>pM(e,g),J.ondblclick=()=>Ye(W),C.onmousedown=e=>{e.preventDefault()},C.onmouseup=()=>{var t=gE("zoom_rect"+g);if(J.style.cursor="crosshair",(C.onmousemove=null)!=t){var l=0==gAt(t,"fill-opacity"),n=sz(t);if(t.remove(),!~l||0!=n[2]&&0!=n[3]){var t=vw(J),a=sz(J);let e=[];e=l?[-n[2]/a[2],n[3]/a[3],1,1]:[(n[0]-a[0])/a[2],1-(n[1]+n[3]-a[1])/a[3],n[2]/a[2],n[3]/a[3]];l=[W[0]+W[2]*t[0]/100,W[1]+W[3]*(100-t[3]-t[1])/100,W[2]*t[2]/100,W[3]*t[3]/100];Ye([l[0]+e[0]*l[2],l[1]+e[1]*l[3],e[2]*l[2],e[3]*l[3]])}}},0<z.length&&(Y.onwheel=e=>{H;var t=sz(I),l=vw(I),t=H-t[3];return l[1]+=e.deltaY,l[1]<0&&(l[1]=0),t<l[1]&&(l[1]=t),I.viewBox.baseVal.y=l[1],ce.y.baseVal.value=l[1],!1}),new ResizeObserver(()=>Re()).observe(C),Re()}}
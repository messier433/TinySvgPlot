{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=1/0,f=document,g=2,h=1,i=12,j=10,k="Lucida Sans Typewriter",l=20,m=4,n=4,o=400,p=4,q=24,r=12,s=[10,10],t=[10,10],u=[1,2,5,10],v=4*i,w=2*i,x=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],y="http://www.w3.org/2000/svg";function plotSvg(_,B,V,A,{title:se="",subtitle:N="",xlabel:S="",ylabel:E="",xlim:T=[],ylim:z=[],style:ae="-",marker:ce="",legend:M=[],xScale:he="lin",yScale:ge="lin",grid:ue=!0,gridMinor:fe=[],legendLocation:C="northeastoutside",linTip:de=!0}={}){let L=[!1,!1];"log"==he&&(B=B.map(c),1<T.length&&(T=T.map(c),isNaN(T[0])||isNaN(T[1])?T=[]:(T[0]=T[0]==-e?0:T[0],T[1]=T[1]==-e?0:T[1])),L[0]=!0),"log"==ge&&(V=V.map(c),1<z.length&&(z=z.map(c),isNaN(z[0])||isNaN(z[1])?z=[]:(z[0]=z[0]==-e?0:z[0],z[1]=z[1]==-e?0:z[1])),L[1]=!0);var Y=$(_);const R=f.createElement("div"),D=(ne(Y,R),ee(R,"style","width:100%;height:100%;min-width:"+o+"px;min-height:200px;overflow:none"),ne(R,"svg",{id:"s_"+_,width:"100%",height:"100%"}));Y=te(D);D.innerHTML+="<style>\n<![CDATA[\ntext.cll {\nfont-size:"+j+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+k+";\n}\n.b:hover polyline{\nopacity:0.5;\n}\n]]>\n</style>\n";let U=0,ve=v;var ye=se.split("\n"),xe=N.split("\n");0<se.length&&(U+=(q+p)*ye.length),0<N.length&&(U+=(r+p)*xe.length),U=U<19?25:U+6;let pe=Y[3]-U-w,X=Y[2]-ve;0<S.length&&(pe=pe-i-p),0<E.length&&(ve=ve+i+2*p,X=X-i-2*p);var F=ne(null,"g",{"pointer-events":"visible"});F.onclick=e=>Ge(e,0),F.ondblclick=e=>Ge(e,A);let me=0,H=0,be="none",I=null,we=null;if(0<M.length&&0<A&&0<B.length){let e=U;"northeast"==C&&(e=U+2*n,me=4*n,be="white");var O=pe-me,G=ne(D,"defs"),ke=(I=ne(F,"svg",{id:"sl_"+_}),ne(D,F),ne(G,"line",{id:"ll_"+_,x1:0,y1:0,x2:l,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),A);let r=M;M.length>A&&(r=M.slice(0,ke));G=(H=ke*(j+n)+n)>O?O:H;ne(null,I,{x:"100%",height:G}),ne(null,we=oe(I,0,0,0,"100%",be,"black"),{id:"rect_leg_"+_});for(let t=0;t<ke;++t){var _e=t%x.length,Be=t*(j+n)+n,Ve=new ne(I,"g",{id:"lgi_"+_+"_"+t}),_e=(ne(Ve,"use",{id:"lli_"+_+"_"+t,x:m,y:Be+j/2,href:"#ll_"+_,stroke:x[_e]}),ne(Ve,"text",{id:"lti_"+_+"_"+t,class:"cll",x:m+l+m,y:Be+j/2}));let e="";t<r.length&&(e=r[t]),_e.append(f.createTextNode(e))}O=(O=F.getBBox().width+2*m)>o?o:O;ee(we,"width","100%"),ee(I,"width",O);let t=-O-m;X-=O+2*m,"northeast"==C&&(t-=m+v,X-=v-O-2*m),ne(null,I,{x:Y[2]+t,y:e,viewBox:"0 0 "+O+" "+G})}else X-=v;C=[ve,U,X,pe];let Ae=[Y[2]-C[2],Y[3]-C[3]];const Ne=ne(D,"svg",{id:"st_"+_,x:C[0],overflow:"visible",width:C[2]});let K=0;if(0<se.length)for(let e=0;e<ye.length;++e)K=K+q+p,re(Ne,ye[e],"50%",K,q);if(0<N.length)for(let e=0;e<xe.length;++e)K=K+r+p,re(Ne,xe[e],"50%",K,r);O=-Y[3]+C[1]+C[3],G=ne(D,"g");le(G,[C[0],O]);const Se=ne(G,"svg",{id:"s_btm_"+_,overflow:"visible",y:"100%",width:C[2]}),Ee=(0<S.length&&re(Se,S,"50%",3*i,i),ne(D,"svg",{id:"sy_"+_,width:C[0],y:C[1],overflow:"visible",height:C[3]}));0<E.length&&(ne(null,N=re(Ee,E,C[0]-i,"50%",i),{"writing-mode":"vertical-rl","transform-origin":"center"}),le(N,null,[-1,-1]));Y=Oe(B,T),O=Oe(V,z);let P=[Y[0],O[0],Y[1]-Y[0],O[1]-O[0]];const Te=ne(D,"svg",{id:"s_bg_"+_,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:C[2],height:C[3],x:C[0],y:C[1]}),W=ne(D,"svg",{id:"sd_"+_,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:C[2],height:C[3],x:C[0],y:C[1]});let Z=[!(W.style.cursor="crosshair"),!1];fe.length<1?(Z[0]="log"==he,Z[1]="log"==ge):(Z[0]=fe[0],Z[1]=fe[1]);G=Ze(P[2],s[0],L[0]),S=Ze(P[3],s[1],L[1]);T.length<1&&4<=P[2]/G&&(P[0]=b(Y[0]/G)*G,P[2]=d(Y[1]/G)*G-P[0]),z.length<1&&4<=P[3]/S&&(P[1]=b(O[0]/S)*S,P[3]=d(O[1]/S)*S-P[1]),We(P);const ze=ne(W,"defs");""!=ce&&(Q("o",[ne(null,"circle",{r:"5"})],1),Q("+",[ie(null,0,-5,0,5,"","",""),ie(null,-5,0,5,0,"","","")]),Q("*",[ie(null,0,-5,0,5,"","",""),ie(null,-5,0,5,0,"","",""),ie(null,-3.5,-3.5,3.5,3.5,"","",""),ie(null,-3.5,3.5,3.5,-3.5,"","","")]),Q(".",[ne(null,"circle",{r:"1.5","stroke-width":3})]),Q("x",[ie(null,-3.5,-3.5,3.5,3.5,"","",""),ie(null,-3.5,3.5,3.5,-3.5,"","","")]),Q("_",[ie(null,-5,0,5,0,"","","")]),Q("|",[ie(null,0,-5,0,5,"","","")]),Q("sq",[oe(null,-5,-5,10,10,"","","")],1),Q("^",[ne(null,"polygon",{points:"-5 3, 0 -5, 5 3"})],1),Q("v",[ne(null,"polygon",{points:"-5 -4, 0 5, 5 -4"})],1),Q("tr",[ne(null,"polygon",{points:"-3 -5, 5 0, -3 5"})],1),Q("tl",[ne(null,"polygon",{points:"-5 0, 3 5, 3 -5"})],1));var Me=V.length/A,Ce=B.length==V.length;if(!Ce&&Me!=B.length)throw new Error("Dimension must agree");var Le=ne(W,"g",{id:"gp_"+_});for(let l=0;l<A;++l){var Ye=l%x.length,Re=Array.isArray(ae)?ae[l]:ae,De="url(#m"+(Array.isArray(ce)?ce[l]:ce)+"_"+_+")";let e="",t=2;switch(Re){case":":e="2 3";break;case"--":e="12 6";break;case"-.":e="9 3 3 3";break;case"*":t=0}var Ue=ne(Le,"polyline",{class:"l",id:"pl_"+_+"_"+l,stroke:x[Ye],"stroke-dasharray":e,"marker-start":De,"marker-mid":De,"marker-end":De,"stroke-width":t,"vector-effect":"non-scaling-stroke",fill:"none"});for(let e=0;e<Me;++e){var Xe,Fe=Ce?B[l*Me+e]:B[e],He=V[l*Me+e];isFinite(Fe)&&isFinite(He)&&((Xe=W.createSVGPoint()).x=100*(Fe-P[0])/P[2],Xe.y=100-100*(He-P[1])/P[3],Ue.points.appendItem(Xe))}}E=oe(W,0,0,"100%","100%","none","black");const Ie=ne(null,E,{id:"plr_"+_,"pointer-events":"visible"}),J=("white"==be&&ne(D,F),ne(Ne,"g",{id:"bd_"+_,"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round",class:"b","pointer-events":"visible"}));function Oe(r,i){if(i.length<2){let t=r.length,l=-e,n=e;for(;t--;)isFinite(r[t])&&(n=r[t]<n?r[t]:n,l=r[t]>l?r[t]:l);i=[n,l]}return i[0]==i[1]&&(i[0]=i[0]-.5,i[1]=i[1]+.5),i}function Q(e,t,l=0){var n=ne(ze,"marker",{id:"m"+e+"_"+_,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"userSpaceOnUse",fill:"none",stroke:"context-stroke"}),r=ne(n,"g",{"stroke-width":1.5,"vector-effect":"non-scaling-stroke",class:"marker_"+_});le(r,[5,5],[1,1]);for(let e=0;e<t.length;++e)ne(r,t[e]);l&&ne(ze,n.cloneNode(!0),{id:"mf"+e+"_"+_,fill:"context-stroke"})}function je(e,t,l=0){var n=$("gpl_"+e+"_"+t),r=l?"block":"none";$("pl_"+e+"_"+t).style.display=r,$("lgi_"+e+"_"+t).style.opacity=.3+.7*l,null!=n&&(n.style.display=r)}function Ge(e,t){var e=e.offsetY-et(I,"y")+tt(I)[1],l=b((e-n/2)/(j+n)),e=$("pl_"+_+"_"+l);if(null!=e){var r="none"!=e.style.display,i=0==t?l+1:t;for(let e=0==t?l:0;e<i;++e)r?e==l&&0!=t||je(_,e):je(_,e,1)}}function Ke(){var e=te(D),t=te(W),l=e[2]-Ae[0],e=e[3]-Ae[1];t[2]!=l&&(ee(W,"width",l),ee(Te,"width",l),ee(Ne,"width",l),ee(Se,"width",l),null!=I&&(I.x.baseVal.value+=l-t[2]),J.transform.baseVal[0].matrix.e+=l-t[2]),t[3]!=e&&(ee(W,"height",e),ee(Te,"height",e),ee(Ee,"height",e),null!=I)&&(l=(l=e-me)>H?H:l,ee(I,"height",l),I.viewBox.baseVal.height=l),Pe()}function Pe(){var t=f.getElementsByClassName("marker_"+_);for(let e=0;e<t.length;++e){var l=te(W),n=tt(W),r=n[2]/l[2],n=n[3]/l[3];t[e].transform.baseVal[1].matrix.a=r,t[e].transform.baseVal[1].matrix.d=n}}function qe(e){for(var t=100*(e[0]-P[0])/P[2],l=100*(P[1]+P[3]-e[1]-e[3])/P[3],n=(W.viewBox.baseVal.width=100*e[2]/P[2],W.viewBox.baseVal.height=100*e[3]/P[3],W.viewBox.baseVal.x=t,W.viewBox.baseVal.y=l,ne(null,Ie,{x:t,y:l}),f.getElementsByClassName("cg_"+_));0<n.length;)n[0].remove();We(e),Pe()}function We(e){for(let r=0;r<2;++r){var o=0<r?Ee:Se,h=Ze(e[2+r],s[r],L[r]),g=e[r]+e[2+r],l=d(e[r]/h)*h,g=b(g/h)*h,u=100*(0<r?e[r]+e[r+2]-g:l-e[r])/e[2+r],f=a((g-l)/h);let n=Array();n=L[r]?$e(Qe(l,h,g).map(e=>10**e)):$e(Qe(l,h,g));const x=100*h/e[2+r];var l=ne(Te,"defs",{class:"cg_"+_}),v=ne(l,"g",{id:"mg"+r+"_"+_}),g=L[r]||Z[r]?t[r]:0;if(0<g){let l=Array();L[r]&&1==h?(l=Qe(1,9/(g-1),10).map(c)).forEach((e,t)=>{l[t]=l[t]*x}):l=Qe(0,2/g*x,x);for(let e=1;e<l.length-1;++e)Je(v,0<r?x-l[e]:l[e],r,4,"2 4")}Je(v,0,r,8,"");for(let l=-1;l<=f;++l){var y=u+x*l;let e=null,t=(0<=l&&ne(null,e=0<r?re(o,n[f-l],te(o)[2]-.5*i,y+"%",i,"end"):re(o,n[l],y+"%",.9*i,i),{"dominant-baseline":"central",class:"cg_"+_}),[y,0]);0<r&&(t=[t[1],t[0]]),ne(Te,"use",{href:"#mg"+r+"_"+_,x:t[0],y:t[1],class:"cg_"+_})}}}function Ze(e,t,l){var t=e/t,n=b(c(t));const r=d(t/10**n);var i=u.findIndex(function(e){return e>=r}),t=u[i]*10**n;return l&&1<=e&&t<1?1:t}function Je(e,t,l,n,r){let i=[t,0,0,n,t,100];0<l&&(i=[i[1],i[0],i[3],i[2],i[5],i[4]]),ue&&ie(e,i[0],i[1],i[4],i[5],"rgb(223,223,223)",r);n=ie(e,0,0,i[2],i[3]),t=ie(e,-i[2],-i[3],0,0);le(n,[i[0],i[1]],[1,1]),le(t,[i[4],i[5]],[1,1]),ne(null,n,{class:"marker_"+_}),ne(null,t,{class:"marker_"+_})}function Qe(t,l,e){var n=b((e-t)/l*(1+1e-12))+1;out=Array(n);for(let e=0;e<n;++e)out[e]=t+l*e;return out}function $e(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],r=Array(l.length);for(let t=0;t<l.length;++t){var i=l[t].toExponential(5).split(/e/);let e=b(+i[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),r[t]=a(i[0]*10**(+i[1]-3*(e-8))*1e3)/1e3+n[e]}return r}function $(e){return f.getElementById(e)}function ee(e,t,l){e.setAttribute(t,l)}function et(e,t){return e.getAttribute(t)}function te(e){return[e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value]}function tt(e){return[e.viewBox.baseVal.x,e.viewBox.baseVal.y,e.viewBox.baseVal.width,e.viewBox.baseVal.height]}function le(e,t,l){t=null!=t?"translate("+t[0]+" "+t[1]+")":"";t+=null!=l?"scale("+l[0]+" "+l[1]+")":"",e.setAttribute("transform",t)}function ne(e,t,l){var n,r="string"==typeof t?f.createElementNS(y,t):t;for(n in l)ee(r,n,l[n]);return null!=e&&e.appendChild(r),r}function re(e,t,l,n,r,i="middle",o="Sans,Arial",s="black"){e=ne(e,"text",{x:l,y:n,fill:s,"font-size":r,"text-anchor":i,"font-family":o,"stroke-width":1});return e.append(f.createTextNode(t)),e}function ie(e,t,l,n,r,i="black",o="",s=1){return ne(e,"line",{x1:t,y1:l,x2:n,y2:r,stroke:i,"stroke-width":s,"stroke-dasharray":o,"vector-effect":"non-scaling-stroke"})}function oe(e,t,l,n,r,i="none",o="none",s=2,a=0){return ne(e,"rect",{x:t,y:l,width:n,height:r,rx:a,stroke:o,"stroke-width":s,fill:i,"vector-effect":"non-scaling-stroke"})}le(J,[C[2]-18,C[1]-24]),ne(J,"polyline",{stroke:"black",fill:"none",points:"8,0 8,16 2,9 8,16 14,9"}),ne(J,"polyline",{stroke:"black",fill:"none",points:"0,17 0,20 16,20 16,17"}),oe(J,0,0,21,21),J.onclick=()=>{var e,t;J.style.display="none",W.style.cursor="auto",e='<svg width="'+(e=te(D))[2]+'" height="'+e[3]+'" xmlns="'+y+'">',e=new Blob([e,D.innerHTML,"</svg>"],{type:"image/svg+xml;charset=utf-8"}),e=URL.createObjectURL(e),(t=f.createElement("a")).href=e,t.download="snapshot_"+se+".svg",ne(f.body,t),t.click(),f.body.removeChild(t),J.style.display="block",W.style.cursor="crosshair"},E.onclick=t=>{var l=te(W),n=(a=tt(W))[2]/l[2],r=a[3]/l[3],s=(t.offsetX-l[0])*n+a[0],s=(result=function(t,l,n,r,i,o){let s=null,a=e,c=0,h=0;var g=$("gp_"+t),u=g.children.length;for(let e=0;e<u;++e){var f=g.children[e],d=f.points;if("none"!=f.style.display)for(let e=1;e<d.length;++e){var v,y,x,p,m,b,w=d[e-1],k=d[e];l<w.x-r&&l<k.x-r||l>w.x+r&&l>k.x+r||n<w.y-i&&n<k.y-i||n>w.y+i&&n>k.y+i||(v=k.x-w.x,x=(v*(l-w.x)+(y=k.y-w.y)*(n-w.y))/(v*v+y*y),1<=(x=((v=w.x+v*x)-l)*(v-l)/r/r+((y=w.y+y*x)-n)*(y-n)/i/i))||x>a||(a=x,s=f,x=w.x<l?l-w.x:w.x-l,p=w.y<n?n-w.y:w.y-n,m=k.x<l?l-k.x:k.x-l,b=k.y<n?n-k.y:k.y-n,x<m&&x<r&&p<i?(c=w.x,h=w.y):m<r&&b<i?(c=k.x,h=k.y):o&&0!=et(f,"stroke-width")?(c=v,h=y):s=null)}}return{ele:s,x:c,y:h}}(_,s,t=(t.offsetY-l[1])*r+a[1],a=6*n,c=6*r,de)).ele;if(null!=s){var t=result.x,a=result.y,c="pl_"+_,s=s.id,c=s.slice(c.length,s.length),s=$("lti_"+_+c),h=et($("pl_"+_+c),"stroke"),g=function(e,t,l){return B=e[0]/100*t[2]+t[0],V=(1-e[1]/100)*t[3]+t[1],[B=l[0]?10**B:B,V=l[1]?10**V:V]}([t,a],P,L);let e=$("gpl_"+_+c);null==e&&(e=ne(W,"g",{id:"gpl_"+_+c}));const f=ne(e,"g",{class:"marker_"+_}),d=ne(f,"g");c=oe(d,0,-33,1,33,h,"rgb(223,223,223)",1,rx=4),h=(le(f,[t,a],[n,r]),f.onclick=e=>{e.ctrlKey?u(1):(f.remove(),1<e.detail&&qe(P))},null!=s&&(ne(null,text=re(d,s.textContent,2,-35,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),ne(null,c,{y:-48,height:48})),re(d,"x: "+$e([g[0]]),2,-19,12,"start","Sans,Arial","white"),re(d,"y: "+$e([g[1]]),2,-5,12,"start","Sans,Arial","white"),f.getBBox());const v=[h.width+4,h.height],y=(ne(null,c,{width:v[0]}),null!=s&&ie(d,0,-31,v[0],-31,stroke="white"),ie(f,0,0,6,-6));t=d.getBoundingClientRect();let i=t.right+5+R.offsetLeft>l[0]+l[2],o=t.y-5-R.offsetTop<l[1];function u(e){let t=5,l=-5,n=1,r=1;e&&([i,o]=[!o,i]),i&&(t=-v[0]-5,n=-1),o&&(l=v[1]+5,r=-1),le(d,[t,l]),le(y,null,[n,r])}u(!1),oe(f,-2,-2,4,4,"black"),ne(f,"circle",{r:6,fill:"none","pointer-events":"visible"})}},D.oncontextmenu=e=>{e.preventDefault()},W.onmousedown=t=>{{let e=0;if(t.button==h||t.button==g&&t.ctrlKey)e=1;else if(t.button!=g)return;W.style.cursor=e?"move":"zoom-in";const o=t.offsetX,s=t.offsetY,l=oe(D,o,s,0,0,"black"),n=e?0:.3;ne(null,l,{id:"zoom_rect"+_,"fill-opacity":n}),D.onmousemove=e=>{var t=o,l=s,n=$("zoom_rect"+_),r=e.offsetX,t=r-t,l=(e=e.offsetY)-l,i=0==et(n,"fill-opacity");i||0<=t?ee(n,"width",t):ne(null,n,{width:-t,x:r}),i||0<=l?ee(n,"height",l):ne(null,n,{height:-l,y:e})}}},W.ondblclick=()=>qe(P),D.onmousedown=e=>{e.preventDefault()},D.onmouseup=()=>{var t=$("zoom_rect"+_);if(W.style.cursor="crosshair",(D.onmousemove=null)!=t){var l=0==et(t,"fill-opacity"),n=te(t);if(t.remove(),!~l||0!=n[2]&&0!=n[3]){var t=tt(W),r=te(W);let e=[];e=l?[-n[2]/r[2],n[3]/r[3],1,1]:[(n[0]-r[0])/r[2],1-(n[1]+n[3]-r[1])/r[3],n[2]/r[2],n[3]/r[3]];l=[P[0]+P[2]*t[0]/100,P[1]+P[3]*(100-t[3]-t[1])/100,P[2]*t[2]/100,P[3]*t[3]/100];qe([l[0]+e[0]*l[2],l[1]+e[1]*l[3],e[2]*l[2],e[3]*l[3]])}}},0<M.length&&(F.onwheel=e=>{H;var t=te(I),l=tt(I),t=H-t[3];return l[1]+=e.deltaY,l[1]<0&&(l[1]=0),t<l[1]&&(l[1]=t),I.viewBox.baseVal.y=l[1],we.y.baseVal.value=l[1],!1}),new ResizeObserver(()=>Ke()).observe(D),Ke()}}
function gE(e){return document.getElementById(e)}function gM(e){let t=e.length,l=-1/0;for(;t--;)l=e[t]>l&&isFinite(e[t])?e[t]:l;return l}function gMi(e){let t=e.length,l=1/0;for(;t--;)l=e[t]<l&&isFinite(e[t])?e[t]:l;return l}function n2e(t){var l=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(t.length);for(idx=0;idx<t.length;++idx){var a=t[idx].toExponential(5).split(/e/);let e=Math.floor(+a[1]/3)+8;e>l.length-1?e=l.length-1:e<0&&(e=0),i[idx]=Math.round(a[0]*Math.pow(10,+a[1]-3*(e-8))*1e3)/1e3+l[e]}return i}function lis(e,t,l){for(numel=Math.floor((l-e)/t)+1,out=Array(numel),idx=0;idx<numel;++idx)out[idx]=e+t*idx;return out}function los(e,t,l){return lis(e,t,l).map(Math.log10)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var i,a="string"==typeof t?document.createElementNS("http://www.w3.org/2000/svg",t):t;for(i in l)a.setAttribute(i,l[i]);return null!=e&&e.appendChild(a),a}function aST(e,t,l,i,a,n="middle",o="Sans,Arial",r="black"){e=aSE(e,"text",{x:l,y:i,fill:r,"font-size":a,"text-anchor":n,"font-family":o,"stroke-width":1});return e.append(document.createTextNode(t)),e}function aSL(e,t,l,i,a,n="black",o=""){return aSE(e,"line",{x1:t,y1:l,x2:i,y2:a,stroke:n,"stroke-width":1,"stroke-dasharray":o,"vector-effect":"non-scaling-stroke"})}function addSvgRec(e,t,l,i,a,n="none",o="none",r=2,s=0){return aSE(e,"rect",{x:t,y:l,width:i,height:a,rx:s,stroke:o,"stroke-width":r,fill:n,"vector-effect":"non-scaling-stroke"})}function lC(e,t,l,i,a){var n=gE("svg_leg_"+i),e=e.offsetY-n.y.baseVal.value,o=Math.floor((e-l/2)/(t+l)),n=gE("pl_"+i+"_"+o);if(null!=n){var r=n.style.display;if(0==a){e=gE("gpl_"+i+"_"+o);"none"===r?(gE("pl_"+i+"_"+o).style.display="block",gE("lgi_"+i+"_"+o).style.opacity=1,null!=e&&(e.style.display="block")):(gE("pl_"+i+"_"+o).style.display="none",gE("lgi_"+i+"_"+o).style.opacity=.3,null!=e&&(e.style.display="none"))}else for(idx=0;idx<a;++idx){var s=gE("gpl_"+i+"_"+idx);"none"===r?(gE("pl_"+i+"_"+idx).style.display="block",gE("lgi_"+i+"_"+idx).style.opacity=1,null!=s&&(s.style.display="block")):idx!=o&&(gE("pl_"+i+"_"+idx).style.display="none",gE("lgi_"+i+"_"+idx).style.opacity=.3,null!=s)&&(s.style.display="none")}}}function rS(e,t,l,i,a){var n=gE("svg_leg_"+e),o=gE("svg_draw_"+e),r=gE("svg_top_"+e),s=gE("svg_bottom_"+e),d=gE("svg_left_"+e),e=gE("svg_"+e),g=e.width.baseVal.value-t,x=e.height.baseVal.value-l,h=o.width.baseVal.value,c=o.height.baseVal.value;if(tooltips=document.getElementsByClassName("tooltip"),h!=g)for(o.width.baseVal.value=g,r.width.baseVal.value=g,s.width.baseVal.value=g,n.x.baseVal.value+=g-h,idx=0;idx<tooltips.length;++idx){var u=o.x.baseVal.value,v=tooltips[idx].transform.baseVal[0].matrix.e;tooltips[idx].transform.baseVal[0].matrix.e=u+(v-u)*g/h}if(c!=x)for(o.height.baseVal.value=x,d.height.baseVal.value=x,null!=n&&(n.height.baseVal.value=t=i<(t=x-a)?i:t,n.viewBox.baseVal.height=t),idx=0;idx<tooltips.length;++idx){var f=o.y.baseVal.value,p=tooltips[idx].transform.baseVal[0].matrix.f;tooltips[idx].transform.baseVal[0].matrix.f=f+(p-f)*x/c}}function sL(e,t,l){var i=gE("svg_leg_"+t),t=gE("rect_leg_"+t),e=(i.viewBox.baseVal.y+=e.deltaY,l-i.height.baseVal.value);return i.viewBox.baseVal.y<0&&(i.viewBox.baseVal.y=0),i.viewBox.baseVal.y>e&&(i.viewBox.baseVal.y=e),t.y.baseVal.value=i.viewBox.baseVal.y,!1}function pC(e,t,l,i,a,n,o,r){svgDraw=gE("svg_draw_"+t),svg=gE("svg_"+t);var s,d,g,x=e.offsetX-svgDraw.x.baseVal.value,e=e.offsetY-svgDraw.y.baseVal.value,h=100/svgDraw.width.baseVal.value,c=100/svgDraw.height.baseVal.value;result=gNL(t,x*=h,e*=c,6*h,6*c),null!=(closestEl=result.ele)&&(x=result.y,h=(e=result.x)/h+svgDraw.x.baseVal.value,c=x/c+svgDraw.y.baseVal.value,d=gE("lti_"+t+(s=(s=closestEl.id).slice(("pl_"+t).length,s.length))),g=gE("pl_"+t+s),lineColor=g.getAttribute("stroke"),sourceCoord=cC([e,x],[l,i],[a,n],o,r),null==(g=gE("gpl_"+t+s))&&(g=aSE(svg,"g",{id:"gpl_"+t+s})),(e=aSE(g,"g",{class:"tooltip",transform:"translate("+h+" "+c+")"})).onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove()},x=addSvgRec(e,5,-9,0,32,lineColor,"rgb(223,223,223)",1,rx=4),(l=null)!=d&&(aSE(null,text=aST(e,d.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),l=aSL(e,5,-8,5,-8,stroke="white"),aSE(null,x,{y:-23,height:46})),aST(e,"x: "+n2e([sourceCoord[0]]),7,4,12,"start","Sans,Arial","white"),aST(e,"y: "+n2e([sourceCoord[1]]),7,18,12,"start","Sans,Arial","white"),aSE(null,x,{width:(i=e.getBBox()).width+4}),null!=l&&l.setAttribute("x2",i.width+4+5),addSvgRec(e,-2,-2,4,4,"black"))}function pM(e,t){2==e.button&&(aSE(null,addSvgRec(svg=gE("svg_"+t),e.offsetX,e.offsetY,0,0,"black"),{id:"zoom_rect"+t,"fill-opacity":"0.3"}),svg.onmousemove=e=>pDZ(e,t),svg.onmouseup=e=>pZ(e,t))}function pDZ(e,t){(rectZoom=gE("zoom_rect"+t)).width.baseVal.value=e.offsetX-rectZoom.x.baseVal.value,rectZoom.height.baseVal.value=e.offsetY-rectZoom.y.baseVal.value}function pZ(e,t){(rectZoom=gE("zoom_rect"+t)).remove(),(svg=gE("svg_"+t)).onmousemove=null,svg.onmouseup=null}function cC(e,t,l,i,a){return x=e[0]/100*(t[1]-t[0])+t[0],y=(1-e[1]/100)*(l[1]-l[0])+l[0],x=i?Math.pow(10,x):x,y=a?Math.pow(10,y):y,[x,y]}function gNL(e,t,l,i,a){var n=null,o=1/0,r=gE("gp_"+e),s=r.children.length,d=0,g=0;for(idx=0;idx<s;++idx){var x=r.children[idx].points;for(idxPt=1;idxPt<x.length;++idxPt){var h,c,u,v,f,p,b,y,E=x[idxPt-1],w=x[idxPt];t<E.x-i&&t<w.x-i||t>E.x+i&&t>w.x+i||l<E.y-a&&l<w.y-a||l>E.y+a&&l>w.y+a||(b=w.x-E.x,c=t+i-E.x,u=l-a*(v=2*(0<=(f=(h=(y=w.y-E.y)*y<b*b)?y/b:b/y))-1)-E.y,p=t-i-E.x,v=l+a*v-E.y,p=h?v/p:p/v,(v=h?u/c:c/u)<f&&p<f)||f<v&&f<p||(h=(b*(t-E.x)+y*(l-E.y))/(b*b+y*y),(v=((c=E.x+b*h)-t)*(c-t)+((u=E.y+y*h)-l)*(u-l))<i*a&&v<o&&(o=v,n=r.children[idx],f=t>E.x?t-E.x:E.x-t,p=l>E.y?l-E.y:E.y-l,b=t>w.x?t-w.x:w.x-t,y=l>w.y?l-w.y:w.y-l,g=f<b&&f<i&&p<a?(d=E.x,E.y):b<i&&y<a?(d=w.x,w.y):(d=c,u)))}}return{ele:n,x:d,y:g}}function plotSvg(t,e,l,i,{title:a="",subtitle:n="",xlabel:o="",ylabel:r="",xlim:s=[],ylim:d=[],legend:g=[],xScale:B="lin",yScale:X="lin",grid:D=!0,gridMinor:Z=[],legendLocation:x="northeastoutside"}={}){var h=10,c=10,u=[1,2,5,10],v=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],f=(logXEnbl=!1,"log"==B&&(e=e.map(Math.log10),1<s.length&&(s=s.map(Math.log10),isNaN(s[0])||isNaN(s[1])?s=[]:(s[0]=s[0]==-1/0?0:s[0],s[1]=s[1]==-1/0?0:s[1])),logXEnbl=!0),logYEnbl=!1,"log"==X&&(l=l.map(Math.log10),1<d.length&&(d=d.map(Math.log10),isNaN(d[0])||isNaN(d[1])?d=[]:(d[0]=d[0]==-1/0?0:d[0],d[1]=d[1]==-1/0?0:d[1])),logYEnbl=!0),gE(t)),p=document.createElement("div"),f=(f.appendChild(p),p.setAttribute("style","width:100%;height:100%;overflow:none"),aSE(p,"svg",{id:"svg_"+t,width:"100%",height:"100%"})),p=f.width.baseVal.value,b=f.height.baseVal.value,y=(f.innerHTML+="<style>\n<![CDATA[\n  polyline.l {\n    stroke-width:2;\n    vector-effect:non-scaling-stroke;\n    fill:none;\n  }\n  text.cll {\n    font-size:10px;\n    fill:black;\n    dominant-baseline:central;\n    font-family:Lucida Sans Typewriter;\n  }\n]]>\n</style>\n",0),E=48,z=a.split("\n"),R=n.split("\n"),w=(0<a.length&&(y+=28*z.length),0<n.length&&(y+=16*R.length),b-(y+=10)-24),m=p-E,_=(0<o.length&&(w=w-12-4),0<r.length&&(E=E+12+4,m=m-12-4),aSE(null,"g",{"pointer-events":"visible"})),F=(_.onclick=e=>lC(e,hLetter,4,t,0),_.ondblclick=e=>lC(e,hLetter,4,t,i),0);if(0<g.length&&0<i&&0<e.length){var O="";switch(x){case"northeast":yLegend=y+8,F=16,O="white";break;case"northeastoutside":yLegend=y,O="none";break;default:throw new Error("LegendLocation not supported")}hLegendMax=w-F,f.appendChild(_);var S=aSE(f,"defs"),k=(aSE(S,"line",{id:"ll_"+t,x1:0,y1:0,x2:20,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),wLegendMax=400,hLetter=10,aSE(_,"svg",{id:"svg_leg_"+t})),G=i,H=g,M=(g.length>i&&(H=g.slice(0,G)),G*(hLetter+4)+4),S=M>hLegendMax?hLegendMax:M,T=(aSE(null,k,{x:"100%",height:S}),addSvgRec(k,0,0,0,"100%",O,"black"));for(aSE(null,T,{id:"rect_leg_"+t}),lnIdx=0;lnIdx<G;++lnIdx){colorIdx=lnIdx%v.length,yOffset=lnIdx*(hLetter+4)+4;var j=new aSE(k,"g",{id:"lgi_"+t+"_"+lnIdx}),q=(aSE(j,"use",{id:"lli_"+t+"_"+lnIdx,x:4,y:yOffset+hLetter/2,href:"#ll_"+t,stroke:v[colorIdx]}),aSE(j,"text",{id:"lti_"+t+"_"+lnIdx,class:"cll",x:28,y:yOffset+hLetter/2})),j="";lnIdx<H.length&&(j=H[lnIdx]),q.append(document.createTextNode(j))}var L=(L=_.getBBox().width+8)>wLegendMax?wLegendMax:L,J=(T.setAttribute("width","100%"),k.setAttribute("width",L),0);switch(x){case"northeast":J=-L-8-48,m-=48;break;case"northeastoutside":J=-L-4,m-=L+8;break;default:throw new Error("LegendLocation not supported")}aSE(null,k,{x:f.width.baseVal.value+J,y:yLegend,viewBox:"0 0 "+L+" "+S})}else m-=48;var K=[p-(pltAr=[E,y,m,w])[2],b-pltAr[3]],Q=aSE(f,"svg",{id:"svg_top_"+t,x:pltAr[0],overflow:"visible",width:pltAr[2]}),V=0;if(0<a.length)for(idx=0;idx<z.length;++idx)V=V+24+4,aST(Q,z[idx],"50%",V,24);if(0<n.length)for(idx=0;idx<R.length;++idx)V=V+12+4,aST(Q,R[idx],"50%",V,12);var T=-b+pltAr[1]+pltAr[3],x=aSE(f,"g",{transform:"translate("+pltAr[0]+" "+T+")"}),U=aSE(x,"svg",{id:"svg_bottom_"+t,overflow:"visible",y:"100%",width:pltAr[2]}),W=(0<o.length&&aST(U,o,"50%",36,12),aSE(f,"svg",{id:"svg_left_"+t,y:pltAr[1],overflow:"visible",height:pltAr[3]})),A=(0<r.length&&aSE(W,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":12,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:pltAr[0]-48-4}).append(document.createTextNode(r)),0),I=0,C=0,P=0,N=(s.length<2?(A=gMi(e),I=gM(e),A==I&&(A-=.5,I+=.5)):(A=s[0],I=s[1]),d.length<2?(C=gMi(l),P=gM(l),C==P&&(C-=.5,P+=.5)):(C=d[0],P=d[1]),aSE(f,"svg",{id:"svg_draw_"+t,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:pltAr[2],height:pltAr[3],x:pltAr[0],y:pltAr[1]})),S=!1,p=!1,p=Z.length<1?(S="log"==B,"log"==X):(S=Z[0],Z[1]),E=(I-A)/10,w=Math.floor(Math.log10(E)),$=Math.ceil(E/Math.pow(10,w)),a=u.findIndex(function(e){return $<=e}),E=u[a]*Math.pow(10,w),n=(logXEnbl?1<=I-A?1<(E=E<1?1:E)&&(h=h<E?h:E):h=0:h=5,(P-C)/10),w=Math.floor(Math.log10(n)),$=Math.ceil(n/Math.pow(10,w)),a=u.findIndex(function(e){return $<=e}),n=u[a]*Math.pow(10,w),b=(logYEnbl?1<=P-C?1<(n=n<1?1:n)&&(c=c<n?c:n):c=0:c=5,s.length<1&&4<=(I-A)/E&&(A=Math.floor(A/E)*E,I=Math.ceil(I/E)*E),d.length<1&&4<=(P-C)/n&&(C=Math.floor(C/n)*n,P=Math.ceil(P/n)*n),Math.ceil(A/E)*E),T=Math.floor(I/E)*E,x=Math.ceil(C/n)*n,o=Math.floor(P/n)*n,ee=100*(b-A)/(I-A),te=100*(o-P)/(P-C),le=Math.round((T-b)/E),ie=Math.round((o-x)/n),r=(xTickLabel=logXEnbl?n2e(dec(b,E,T)):n2e(lis(b,E,T)),yTickLabel=logYEnbl?n2e(dec(x,n,o)):n2e(lis(x,n,o)),dXTick=100*E/(I-A),dYTick=100*n/(P-C),aSE(N,"defs")),ae=aSE(r,"g",{id:"mgy_"+t});if(p&&0<c)for(logYEnbl&&1==n?(minorTickPos=los(1,9/(c-1),10)).forEach((e,t)=>{minorTickPos[t]=(1-minorTickPos[t])*dYTick}):minorTickPos=lis(0,1/c*dYTick,dYTick),idx=1;idx<minorTickPos.length-1;++idx)aSL(ae,0,minorTickPos[idx],"100%",minorTickPos[idx],"rgb(223,223,223)","2 4");for(D&&aSL(ae,0,0,"100%",0,"rgb(223,223,223)"),aSL(ae,0,0,"1%",0),aSL(ae,"99%",0,"100%",0),idx=0;idx<=ie;++idx){var ne=-te+dYTick*idx;(q=aST(W,yTickLabel[ie-idx],pltAr[0]-6,ne+"%",12,"end")).setAttribute("dominant-baseline","central"),aSE(N,"use",{href:"#mgy_"+t,y:ne})}var B=aSE(N,"defs"),oe=aSE(B,"g",{id:"mgx_"+t});if(S&&0<h)for(logXEnbl&&1==E?(minorTickPos=los(1,9/(h-1),10)).forEach((e,t)=>{minorTickPos[t]*=dXTick}):minorTickPos=lis(0,1/h*dXTick,dXTick),idx=1;idx<minorTickPos.length-1;++idx)aSL(oe,minorTickPos[idx],0,minorTickPos[idx],"100%","rgb(223,223,223)","2 4");for(D&&aSL(oe,0,0,0,"100%","rgb(223,223,223)"),aSL(oe,0,0,0,"1%"),aSL(oe,0,"99%",0,"100%"),idx=0;idx<=le;++idx){var re=dXTick*idx+ee;aST(U,xTickLabel[idx],re+"%",12*1.4,12),aSE(N,"use",{href:"#mgx_"+t,x:re})}var se=l.length/i,de=e.length==l.length;if(!de&&se!=e.length)throw new Error("Dimension must agree");var ge=aSE(N,"g",{id:"gp_"+t});for(lnIdx=0;lnIdx<i;++lnIdx){colorIdx=lnIdx%v.length;var Y=document.createElementNS("http://www.w3.org/2000/svg","polyline");for(Y.setAttribute("class","l"),Y.setAttribute("id","pl_"+t+"_"+lnIdx),Y.setAttribute("stroke",v[colorIdx]),ptIdx=0;ptIdx<se;++ptIdx){var xe,he=de?e[lnIdx*se+ptIdx]:e[ptIdx],ce=l[lnIdx*se+ptIdx];isFinite(he)&&isFinite(ce)&&((xe=N.createSVGPoint()).x=100*(he-A)/(I-A),xe.y=100-100*(ce-C)/(P-C),Y.points.appendItem(xe))}ge.appendChild(Y)}addSvgRec(N,0,0,"100%","100%","none","black").setAttribute("pointer-events","visible"),f.appendChild(_),N.onclick=e=>pC(e,t,A,I,C,P,logXEnbl,logYEnbl),f.oncontextmenu=e=>{e.preventDefault()},N.onmousedown=e=>pM(e,t),f.onmousedown=e=>{e.preventDefault()},0<g.length&&(_.onwheel=e=>sL(e,t,M)),new ResizeObserver(()=>rS(t,K[0],K[1],M,F)).observe(f)}
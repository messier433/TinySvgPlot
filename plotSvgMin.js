{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=12,f=10,g="Lucida Sans Typewriter",h=20,i=4,j=4,k=400,l=4,m=24,n=12,o=[10,10],p=[10,10],q=[1,2,5,10],r=4*e,s=2*e,t=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"];function gE(e){return document.getElementById(e)}function sAt(e,t,l){e.setAttribute(t,l)}function gAt(e,t){return e.getAttribute(t)}function sLi(a,n){if(n.length<2){let e=a.length,t=-1/0,l=1/0;for(;e--;)l=a[e]<l&&isFinite(a[e])?a[e]:l,t=a[e]>t&&isFinite(a[e])?a[e]:t;n=[l,t]}return n[0]==n[1]&&(n[0]=n[0]-.5,n[1]=n[1]+.5),n}function n2e(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(l.length);for(let t=0;t<l.length;++t){var s=l[t].toExponential(5).split(/e/);let e=b(+s[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),i[t]=a(s[0]*10**(+s[1]-3*(e-8))*1e3)/1e3+n[e]}return i}function lis(e,t,l){for(numel=b((l-e)/t)+1,out=Array(numel),idx=0;idx<numel;++idx)out[idx]=e+t*idx;return out}function los(e,t,l){return lis(e,t,l).map(c)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var a,n="string"==typeof t?document.createElementNS("http://www.w3.org/2000/svg",t):t;for(a in l)sAt(n,a,l[a]);return null!=e&&e.appendChild(n),n}function aST(e,t,l,a,n,i="middle",s="Sans,Arial",o="black"){e=aSE(e,"text",{x:l,y:a,fill:o,"font-size":n,"text-anchor":i,"font-family":s,"stroke-width":1});return e.append(document.createTextNode(t)),e}function aSL(e,t,l,a,n,i="black",s=""){return aSE(e,"line",{x1:t,y1:l,x2:a,y2:n,stroke:i,"stroke-width":1,"stroke-dasharray":s,"vector-effect":"non-scaling-stroke"})}function aSR(e,t,l,a,n,i="none",s="none",o=2,r=0){return aSE(e,"rect",{x:t,y:l,width:a,height:n,rx:r,stroke:s,"stroke-width":o,fill:i,"vector-effect":"non-scaling-stroke"})}function lC(e,t,l,a,n){var i=gE("svg_leg_"+a),e=e.offsetY-gAt(i,"y"),s=b((e-l/2)/(t+l)),i=gE("pl_"+a+"_"+s);if(null!=i){var o=i.style.display;if(0==n){e=gE("gpl_"+a+"_"+s);"none"===o?(gE("pl_"+a+"_"+s).style.display="block",gE("lgi_"+a+"_"+s).style.opacity=1,null!=e&&(e.style.display="block")):(gE("pl_"+a+"_"+s).style.display="none",gE("lgi_"+a+"_"+s).style.opacity=.3,null!=e&&(e.style.display="none"))}else for(let e=0;e<n;++e){var r=gE("gpl_"+a+"_"+e);"none"===o?(gE("pl_"+a+"_"+e).style.display="block",gE("lgi_"+a+"_"+e).style.opacity=1,null!=r&&(r.style.display="block")):e!=s&&(gE("pl_"+a+"_"+e).style.display="none",gE("lgi_"+a+"_"+e).style.opacity=.3,null!=r)&&(r.style.display="none")}}}function rS(e,t,l,a,n){var i=gE("svg_leg_"+e),s=gE("svg_draw_"+e),o=gE("svg_bg_"+e),r=gE("svg_top_"+e),g=gE("svg_bottom_"+e),c=gE("svg_left_"+e),h=gE("svg_"+e),v=h.width.baseVal.value-t,d=h.height.baseVal.value-l,u=s.width.baseVal.value,f=s.height.baseVal.value,y=document.getElementsByClassName("tooltip_"+e);if(u!=v){sAt(s,"width",v),sAt(o,"width",v),sAt(r,"width",v),sAt(g,"width",v),i.x.baseVal.value+=v-u;for(let e=0;e<y.length;++e){var x=s.x.baseVal.value,_=y[e].transform.baseVal[0].matrix.e;y[e].transform.baseVal[0].matrix.e=x+(_-x)*v/u}}if(f!=d){sAt(s,"height",d),sAt(o,"height",d),sAt(c,"height",d),null!=i&&(sAt(i,"height",t=a<(t=d-n)?a:t),i.viewBox.baseVal.height=t);for(let e=0;e<y.length;++e){var w=s.y.baseVal.value,p=y[e].transform.baseVal[0].matrix.f;y[e].transform.baseVal[0].matrix.f=w+(p-w)*d/f}}}function sL(e,t,l){var a=gE("svg_leg_"+t),t=gE("rect_leg_"+t),e=(a.viewBox.baseVal.y+=e.deltaY,l-a.height.baseVal.value);return a.viewBox.baseVal.y<0&&(a.viewBox.baseVal.y=0),a.viewBox.baseVal.y>e&&(a.viewBox.baseVal.y=e),t.y.baseVal.value=a.viewBox.baseVal.y,!1}function pC(e,t,l,a,n,i,s){svgDraw=gE("svg_draw_"+t),svg=gE("svg_"+t);var o,r=svgDraw.x.baseVal.value,g=svgDraw.y.baseVal.value,c=e.offsetX-r,e=e.offsetY-g,h=100/svgDraw.width.baseVal.value,v=100/svgDraw.height.baseVal.value;result=gNL(t,c*=h,e*=v,6*h,6*v),null!=(closestEl=result.ele)&&(e=(c=result.x)/h+r,r=(h=result.y)/v+g,g=(v=closestEl.id).slice(("pl_"+t).length,v.length),v=gE("lti_"+t+g),o=gAt(gE("pl_"+t+g),"stroke"),c=cC([c,h],l,s),null==(h=gE("gpl_"+t+g))&&(h=aSE(svg,"g",{id:"gpl_"+t+g})),(g=aSE(h,"g",{class:"tooltip_"+t,transform:"translate("+e+" "+r+")"})).onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove(),1<e.detail&&sAL(t,l,l,a,n,i,s)},h=aSR(g,5,-9,0,32,o,"rgb(223,223,223)",1,rx=4),(e=null)!=v&&(aSE(null,text=aST(g,v.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),e=aSL(g,5,-8,5,-8,stroke="white"),aSE(null,h,{y:-23,height:46})),aST(g,"x: "+n2e([c[0]]),7,4,12,"start","Sans,Arial","white"),aST(g,"y: "+n2e([c[1]]),7,18,12,"start","Sans,Arial","white"),aSE(null,h,{width:(r=g.getBBox()).width+4}),null!=e&&sAt(e,"x2",r.width+4+5),aSR(g,-2,-2,4,4,"black"),aSE(g,"circle",{r:6,fill:"none","pointer-events":"visible"}))}function cC(e,t,l){return x=e[0]/100*t[2]+t[0],y=(1-e[1]/100)*t[3]+t[1],x=l[0]?10**x:x,y=l[1]?10**y:y,[x,y]}function gNL(e,t,l,a,n){var i=null,s=1/0,o=gE("gp_"+e),r=o.children.length,g=0,c=0;for(let e=0;e<r;++e){var h=o.children[e].points;for(idxPt=1;idxPt<h.length;++idxPt){var v,d,u,f,y,x,_=h[idxPt-1],w=h[idxPt];t<_.x-a&&t<w.x-a||t>_.x+a&&t>w.x+a||l<_.y-n&&l<w.y-n||l>_.y+n&&l>w.y+n||(u=((v=w.x-_.x)*(t-_.x)+(d=w.y-_.y)*(l-_.y))/(v*v+d*d),1<=(u=((v=_.x+v*u)-t)*(v-t)/a/a+((d=_.y+d*u)-l)*(d-l)/n/n))||s<u||(s=u,i=o.children[e],u=_.x<t?t-_.x:_.x-t,f=_.y<l?l-_.y:_.y-l,y=w.x<t?t-w.x:w.x-t,x=w.y<l?l-w.y:w.y-l,c=u<y&&u<a&&f<n?(g=_.x,_.y):y<a&&x<n?(g=w.x,w.y):(g=v,d))}}return{ele:i,x:g,y:c}}function pM(e,t){if(0==e.button){svg=gE("svg_"+t);const l=e.offsetX,a=e.offsetY;aSE(null,aSR(svg,l,a,0,0,"black"),{id:"zoom_rect"+t,"fill-opacity":"0.3"}),svg.onmousemove=e=>pDZ(e,t,l,a)}}function pDZ(e,t,l,a){rectZoom=gE("zoom_rect"+t);t=e.offsetX,e=e.offsetY,l=t-l,a=e-a;0<=l?sAt(rectZoom,"width",l):aSE(null,rectZoom,{width:-l,x:t}),0<=a?sAt(rectZoom,"height",a):aSE(null,rectZoom,{height:-a,y:e})}function pZ(e,t,l,a,n){var i,s,o;rectZoom=gE("zoom_rect"+e),((svg=gE("svg_"+e)).onmousemove=null)!=rectZoom&&(rectZoom.remove(),0!=(i=[rectZoom.x.baseVal.value,rectZoom.y.baseVal.value,rectZoom.width.baseVal.value,rectZoom.height.baseVal.value])[2])&&0!=i[3]&&(o=[(svgDraw=gE("svg_draw_"+e)).viewBox.baseVal.x,svgDraw.viewBox.baseVal.y,svgDraw.viewBox.baseVal.width,svgDraw.viewBox.baseVal.height],s=[svgDraw.x.baseVal.value,svgDraw.y.baseVal.value,svgDraw.width.baseVal.value,svgDraw.height.baseVal.value],sAL(e,[(e=[t[0]+t[2]*o[0]/100,t[1]+t[3]*(100-o[3]-o[1])/100,t[2]*o[2]/100,t[3]*o[3]/100])[0]+(o=[(i[0]-s[0])/s[2],1-(i[1]+i[3]-s[1])/s[3],i[2]/s[2],i[3]/s[3]])[0]*e[2],e[1]+o[1]*e[3],o[2]*e[2],o[3]*e[3]],t,s,l,a,n))}function sAL(e,t,l,a,n,i,s){var o=gE("svg_draw_"+e),r=100*(t[0]-l[0])/l[2],g=100*(l[1]+l[3]-t[1]-t[3])/l[3];o.viewBox.baseVal.width=100*t[2]/l[2],o.viewBox.baseVal.height=100*t[3]/l[3],o.viewBox.baseVal.x=r,o.viewBox.baseVal.y=g;aSE(null,gE("plr_"+e),{x:r,y:g});for(var c=document.getElementsByClassName("cg_"+e);0<c.length;)c[0].remove();cGr(e,a,t,n,i,s)}function cTi(e,t,l){var t=e/t,a=b(c(t));const n=d(t/10**a);var i=q.findIndex(function(e){return e>=n}),t=q[i]*10**a;return l&&1<=e&&t<1?1:t}function cGr(n,i,t,s,r,g){var c=gE("svg_bg_"+n),h=gE("svg_left_"+n),v=gE("svg_bottom_"+n);for(let l=0;l<2;++l){var u=0<l?h:v,f=cTi(t[2+l],o[l],g[l]),y=t[l]+t[2+l],x=d(t[l]/f)*f,y=b(y/f)*f,_=100*(x-t[l])/t[2+l],w=a((y-x)/f),E=Array(),E=g[l]?n2e(dec(x,f,y)):n2e(lis(x,f,y));const T=100*f/t[2+l];var x=aSE(c,"defs",{class:"cg_"+n}),m=aSE(x,"g",{id:"mg"+l+"_"+n});if(r[l]&&0<p[l]){var S=0<l?0:L[idx],V=0<l?100:L[idx],k=0<l?L[idx]:0,A=0<l?L[idx]:100,L=Array();g[l]&&1==f?(L=los(1,9/(nMinorTicks[l]-1),10)).forEach((e,t)=>{L[t]=(1-L[t])*T}):L=lis(0,1/nMinorTicks[l]*T,T);for(let e=1;e<L.length-1;++e)aSL(m,S,k,V,A,"rgb(223,223,223)","2 4")}0<l?(s&&aSL(m,0,0,"100%",0,"rgb(223,223,223)"),aSL(m,0,0,"1%",0),aSL(m,"99%",0,"100%",0)):(s&&aSL(m,0,0,0,"100%","rgb(223,223,223)"),aSL(m,0,0,0,"1%"),aSL(m,0,"99%",0,"100%"));for(let t=0;t<=w;++t){var B=_+T*t;0<l?(aSE(null,aST(u,E[w-t],i[0]-.5*e,B+"%",e,"end"),{"dominant-baseline":"central",class:"cg_"+n}),aSE(c,"use",{href:"#mg"+l+"_"+n,y:B,class:"cg_"+n})):(B=_+T*t,sAt(aST(v,E[t],B+"%",1.4*e,e),"class","cg_"+n),aSE(c,"use",{href:"#mg"+l+"_"+n,x:B,class:"cg_"+n}))}}}function plotSvg(a,v,u,y,{title:x="",subtitle:_="",xlabel:w="",ylabel:p="",xlim:E=[],ylim:S=[],legend:V=[],xScale:$="lin",yScale:ee="lin",grid:A=!0,gridMinor:L=[],legendLocation:B="northeastoutside"}={}){var T=[!1,!1],D=("log"==$&&(v=v.map(c),1<E.length&&(E=E.map(c),isNaN(E[0])||isNaN(E[1])?E=[]:(E[0]=E[0]==-1/0?0:E[0],E[1]=E[1]==-1/0?0:E[1])),T[0]=!0),"log"==ee&&(u=u.map(c),1<S.length&&(S=S.map(c),isNaN(S[0])||isNaN(S[1])?S=[]:(S[0]=S[0]==-1/0?0:S[0],S[1]=S[1]==-1/0?0:S[1])),T[1]=!0),gE(a)),N=document.createElement("div"),D=(D.appendChild(N),sAt(N,"style","width:100%;height:100%;min-width:"+k+"px;min-height:200px;overflow:none"),aSE(N,"svg",{id:"svg_"+a,width:"100%",height:"100%"})),N=D.width.baseVal.value,Z=D.height.baseVal.value,C=(D.innerHTML+="<style>\n<![CDATA[\npolyline.l {\nstroke-width:2;\nvector-effect:non-scaling-stroke;\nfill:none;\n}\ntext.cll {\nfont-size:"+f+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+g+";\n}\n]]>\n</style>\n",0),M=r,R=x.split("\n"),te=_.split("\n"),z=(0<x.length&&(C+=(m+l)*R.length),0<_.length&&(C+=(n+l)*te.length),Z-(C+=10)-s),P=N-M,Y=(0<w.length&&(z=z-e-l),0<p.length&&(M=M+e+l,P=P-e-l),aSE(null,"g",{"pointer-events":"visible"})),le=(Y.onclick=e=>lC(e,f,j,a,0),Y.ondblclick=e=>lC(e,f,j,a,y),0);if(0<V.length&&0<y&&0<v.length){var ae="";switch(B){case"northeast":yLegend=C+2*j,le=4*j,ae="white";break;case"northeastoutside":yLegend=C,ae="none";break;default:throw new Error("LegendLocation not supported")}var G=z-le,F=(D.appendChild(Y),aSE(D,"defs")),O=(aSE(F,"line",{id:"ll_"+a,x1:0,y1:0,x2:h,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),aSE(Y,"svg",{id:"svg_leg_"+a})),ne=y,ie=V,I=(V.length>y&&(ie=V.slice(0,ne)),ne*(f+j)+j),F=G<I?G:I,G=(aSE(null,O,{x:"100%",height:F}),aSR(O,0,0,0,"100%",ae,"black"));aSE(null,G,{id:"rect_leg_"+a});for(let e=0;e<ne;++e){var se=e%t.length,X=(yOffset=e*(f+j)+j,new aSE(O,"g",{id:"lgi_"+a+"_"+e})),se=(aSE(X,"use",{id:"lli_"+a+"_"+e,x:i,y:yOffset+f/2,href:"#ll_"+a,stroke:t[se]}),aSE(X,"text",{id:"lti_"+a+"_"+e,class:"cll",x:i+h+i,y:yOffset+f/2})),X="";e<ie.length&&(X=ie[e]),se.append(document.createTextNode(X))}var H=(H=Y.getBBox().width+2*i)>k?k:H,oe=(sAt(G,"width","100%"),sAt(O,"width",H),0);switch(B){case"northeast":oe=-H-2*i-r,P-=r;break;case"northeastoutside":oe=-H-i,P-=H+2*i;break;default:throw new Error("LegendLocation not supported")}aSE(null,O,{x:D.width.baseVal.value+oe,y:yLegend,viewBox:"0 0 "+H+" "+F})}else P-=r;const q=[M,C,P,z];var re=[N-q[2],Z-q[3]],ge=aSE(D,"svg",{id:"svg_top_"+a,x:q[0],overflow:"visible",width:q[2]}),J=0;if(0<x.length)for(let e=0;e<R.length;++e)J=J+m+l,aST(ge,R[e],"50%",J,m);if(0<_.length)for(let e=0;e<te.length;++e)J=J+n+l,aST(ge,te[e],"50%",J,n);var G=-Z+q[1]+q[3],B=aSE(D,"g",{transform:"translate("+q[0]+" "+G+")"}),F=aSE(B,"svg",{id:"svg_bottom_"+a,overflow:"visible",y:"100%",width:q[2]}),M=(0<w.length&&aST(F,w,"50%",3*e,e),aSE(D,"svg",{id:"svg_left_"+a,y:q[1],overflow:"visible",height:q[3]})),z=(0<p.length&&aSE(M,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":e,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:q[0]-4*e-l}).append(document.createTextNode(p)),sLi(v,E)),N=sLi(u,S),K=[z[0],N[0],z[1]-z[0],N[1]-N[0]],Q=(aSE(D,"svg",{id:"svg_bg_"+a,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:q[2],height:q[3],x:q[0],y:q[1]}),aSE(D,"svg",{id:"svg_draw_"+a,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:q[2],height:q[3],x:q[0],y:q[1]})),U=[!1,!1],x=(L.length<1?(U[0]="log"==$,U[1]="log"==ee):(U[0]=L[0],U[1]=L[1]),cTi(K[2],o[0],T[0])),_=cTi(K[3],o[1],T[1]),W=(E.length<1&&4<=K[2]/x&&(K[0]=b(z[0]/x)*x,K[2]=d(z[1]/x)*x-K[0]),S.length<1&&4<=K[3]/_&&(K[1]=b(N[0]/_)*_,K[3]=d(N[1]/_)*_-K[1]),cGr(a,q,K,A,U,T),u.length/y),ce=v.length==u.length;if(!ce&&W!=v.length)throw new Error("Dimension must agree");var he=aSE(Q,"g",{id:"gp_"+a});for(let l=0;l<y;++l){var ve=l%t.length,de=aSE(he,"polyline",{class:"l",id:"pl_"+a+"_"+l,stroke:t[ve]});for(let e=0;e<W;++e){var ue,fe=ce?v[l*W+e]:v[e],ye=u[l*W+e];isFinite(fe)&&isFinite(ye)&&((ue=Q.createSVGPoint()).x=100*(fe-K[0])/K[2],ue.y=100-100*(ye-K[1])/K[3],de.points.appendItem(ue))}}Z=aSR(Q,0,0,"100%","100%","none","black");aSE(null,Z,{id:"plr_"+a,"pointer-events":"visible"}),D.appendChild(Y),Z.onclick=e=>pC(e,a,K,q,A,U,T),D.oncontextmenu=e=>{e.preventDefault()},Q.onmousedown=e=>pM(e,a),Q.ondblclick=()=>sAL(a,K,K,q,A,U,T),D.onmousedown=e=>{e.preventDefault()},D.onmouseup=()=>pZ(a,K,A,U,T),0<V.length&&(Y.onwheel=e=>sL(e,a,I)),new ResizeObserver(()=>rS(a,re[0],re[1],I,le)).observe(D)}}
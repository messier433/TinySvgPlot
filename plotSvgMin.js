{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=Array.isArray,f=1/0,g=document,h=2,i=1,j=12,k=10,l="Lucida Sans Typewriter",m=30,n=4,o=4,p=400,q=4,r=24,s=12,t=[10,10],u=[10,10],v=8,w=v/2,x=[1,2,5,10],y=4*j,z=2*j,A=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],B="http://www.w3.org/2000/svg";function plotSvg(N,_,V,y,{color:se="",title:ce="",subtitle:S="",xlabel:E="",ylabel:L="",xlim:T=[],ylim:z=[],style:he="-",marker:M="",legend:C=[],xScale:Y="lin",yScale:R="lin",grid:ge=!0,gridMinor:D=[],xtick:ue=[],ytick:fe=[],xticklbl:de=[],yticklbl:ve=[],xtickangle:ye=0,ytickangle:me=0,legendLocation:xe="northeastoutside",linTip:be=!0}={}){let U=[!1,!1];"log"==Y&&(_=_.map(c),1<T.length&&(T=T.map(c),isNaN(T[0])||isNaN(T[1])?T=[]:(T[0]=T[0]==-f?0:T[0],T[1]=T[1]==-f?0:T[1])),0<ue.length&&(ue=ue.map(c)),U[0]=!0),"log"==R&&(V=V.map(c),1<z.length&&(z=z.map(c),isNaN(z[0])||isNaN(z[1])?z=[]:(z[0]=z[0]==-f?0:z[0],z[1]=z[1]==-f?0:z[1])),0<fe.length&&(fe=fe.map(c)),U[1]=!0);var X=ee(N);const pe=g.createElement("div"),F=(re(X,pe),te(pe,"style","width:100%;height:100%;min-width:"+p+"px;min-height:200px;overflow:none"),re(pe,"svg",{id:"s_"+N,width:"100%",height:"100%"}));var X=le(F),H=(F.innerHTML+="<style>\n<![CDATA[\ntext.cll {\nfont-size:"+k+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+l+";\n}\n.b:hover polyline{\nopacity:0.5;\n}\n]]>\n</style>\n",re(null,"g",{"pointer-events":"visible"})),xe=(H.onclick=e=>et(e,0),H.ondblclick=e=>et(e,y),"northeast"==xe?"white":"none");let I=null,we=null,ke=null,O=0,G=0;if(0<C.length&&0<y&&0<_.length){I=re(H,"svg",{id:"sl_"+N}),ke=re(I,"defs"),re(F,H);var _e=y;let l=C;C.length>y&&(l=C.slice(0,_e)),re(null,we=ae(I,0,0,0,"100%",xe,"black"),{id:"rect_leg_"+N});for(let t=0;t<_e;++t){var Be=t*(k+o)+o,Ve=new re(I,"g",{id:"lgi_"+N+"_"+t}),Ae=re(Ve,"text",{id:"lti_"+N+"_"+t,class:"cll",x:n+m+n,y:Be+k/2}),Be=Be+k/2;gt(Ve,n+","+Be+" "+(n+m/2)+","+Be+" "+(n+m)+","+Be);let e="";t<l.length&&(e=l[t]),Ae.append(g.createTextNode(e))}var Ne=H.getBBox();O=(k+o)*_e+o,G=Ne.width+2*n}var Se=ce.split("\n"),Ee=S.split("\n");const Le=re(F,"svg",{id:"st_"+N,overflow:"visible"});let K=0;if(0<ce.length)for(let e=0;e<Se.length;++e)K+=r+q,ie(Le,Se[e],"50%",K,r);if(0<S.length)for(let e=0;e<Ee.length;++e)K+=s+q,ie(Le,Ee[e],"50%",K,s);K+=q;Ne=re(F,"g");const Te=re(Ne,"svg",{id:"s_btm_"+N,overflow:"visible"});if(0<E.length){const text=ie(Te,E,"50%","100%",j);ne(text,[0,-j/2])}const ze=re(F,"svg",{id:"sy_"+N,overflow:"visible"});if(0<L.length){const text=ie(ze,L,"100%","50%",j);re(null,text,{"writing-mode":"vertical-rl","transform-origin":"center"}),ne(text,[j,0],[-1,-1])}var S=Qe(_,T),P=Qe(V,z);let W=[S[0],P[0],S[1]-S[0],P[1]-P[0]];const Me=re(F,"svg",{id:"s_bg_"+N,preserveAspectRatio:"none",viewBox:"0 0 100 100"}),Z=re(F,"svg",{id:"sd_"+N,preserveAspectRatio:"none",viewBox:"0 0 100 100"});Z.style.cursor="crosshair";let J=[0,0];D.length<1?(J[0]="log"==Y,J[1]="log"==R):1<D.length?(J[0]=D[0],J[1]=D[1]):(J[0]=D,J[1]=D);Y=it(W[2],t[0],U[0]),R=it(W[3],t[1],U[1]),D=[0==ue.length,0==fe.length];const Ce=[(U[0]||J[0])&&D[0],(U[1]||J[1])&&D[1]],Ye=(J=[J[0]&&D[0],J[1]&&D[1]],T.length<1&&4<=W[2]/Y&&(W[0]=b(S[0]/Y)*Y,W[2]=d(S[1]/Y)*Y-W[0]),z.length<1&&4<=W[3]/R&&(W[1]=b(P[0]/R)*R,W[3]=d(P[1]/R)*R-W[1]),axLblBb=rt(W),re(Z,"defs"));""!=M&&($("o",[re(null,"circle",{r:"5"})],1),$("+",[oe(null,0,-5,0,5,"","",""),oe(null,-5,0,5,0,"","","")]),$("*",[oe(null,0,-5,0,5,"","",""),oe(null,-5,0,5,0,"","",""),oe(null,-3.5,-3.5,3.5,3.5,"","",""),oe(null,-3.5,3.5,3.5,-3.5,"","","")]),$(".",[re(null,"circle",{r:"1.5","stroke-width":3})]),$("x",[oe(null,-3.5,-3.5,3.5,3.5,"","",""),oe(null,-3.5,3.5,3.5,-3.5,"","","")]),$("_",[oe(null,-5,0,5,0,"","","")]),$("|",[oe(null,0,-5,0,5,"","","")]),$("sq",[ae(null,-5,-5,10,10,"","","")],1),$("^",[re(null,"polygon",{points:"-5 3, 0 -5, 5 3"})],1),$("v",[re(null,"polygon",{points:"-5 -3, 0 5, 5 -3"})],1),$("tr",[re(null,"polygon",{points:"-3 -5, 5 0, -3 5"})],1),$("tl",[re(null,"polygon",{points:"-5 0, 3 5, 3 -5"})],1));var Re=V.length/y,De=_.length==V.length;if(!De&&Re!=_.length)throw new Error("Dimension must agree");var Ue=re(Z,"g",{id:"gp_"+N});for(let n=0;n<y;++n){var Xe=n%A.length,Fe=e(he)?he[n]:he,He="url(#m"+(Array.isArray(M)?M[n]:M)+"_"+N+")",Ie=e(se)?n<se.length?se[n]:"":se,Xe=""==Ie?A[Xe]:Ie;let t="",l=2;switch(Fe){case":":t="2 3";break;case"--":t="12 6";break;case"-.":t="0 1.5 9 3 3 2.5";break;case"*":l=0}var Oe=gt(Ue,"",Xe,t,l);re(null,Oe,{id:"pl_"+N+"_"+n,"marker-start":He,"marker-mid":He,"marker-end":He,"stroke-width":l}),null!=I&&(Ie="url(#ml"+(e(M)?M[n]:M)+"_"+N+")",re(null,I.childNodes[n+2].childNodes[1],{"stroke-dasharray":t,"marker-mid":Ie,"stroke-width":l,stroke:Xe}));for(let e=0;e<Re;++e){var je,Ge=De?_[n*Re+e]:_[e],Ke=V[n*Re+e];isFinite(Ge)&&isFinite(Ke)&&((je=Z.createSVGPoint()).x=100*(Ge-W[0])/W[2],je.y=100-100*(Ke-W[1])/W[3],Oe.points.appendItem(je))}}D=axLblBb[1].width+.5*j+1.5*j*(0<L.length)+q,T=axLblBb[0].height+q+(1.5*j+q)*(0<E.length),S=X[3]-T-K,Y="white"==xe,z=Y?2*n:0;const Pe=Y?2*o:0;P=S-Pe;G=G>p?p:G;const qe=O=O>P?P:O;R=X[2]-G*(1-Y)-D-2*n,L=[D,K,R,S],E=ae(Z,0,0,"100%","100%","none","black");const We=re(null,E,{id:"plr_"+N,"pointer-events":"visible"});xe=-X[3]+L[1]+L[3];const Ze=[X[2]-L[2],X[3]-L[3]];P=X[2]-G-n-z;const Je=K+Pe/2,Q=(re(null,Me,{width:L[2],height:L[3],x:L[0],y:L[1]}),re(null,Z,{width:L[2],height:L[3],x:L[0],y:L[1]}),re(null,ze,{width:L[0],y:L[1],height:L[3]}),ne(Ne,[L[0],xe]),re(null,Te,{y:"100%",width:L[2],height:T}),re(null,Le,{x:L[0],width:L[2]}),null!=I&&(ne(H,[P,Je]),re(null,I,{height:O,width:G,viewBox:"0 0 "+G+" "+O}),te(we,"width","100%"),Y)&&re(F,H),re(Le,"g",{id:"bd_"+N,"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round",class:"b","pointer-events":"visible"}));function Qe(n,r){if(r.length<2){let e=n.length,t=-f,l=f;for(;e--;)isFinite(n[e])&&(l=n[e]<l?n[e]:l,t=n[e]>t?n[e]:t);r=[l,t]}return r[0]==r[1]&&(r[0]=r[0]-.5,r[1]=r[1]+.5),r}function $(e,t,l=0){var n=re(Ye,"marker",{id:"m"+e+"_"+N,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"userSpaceOnUse",fill:"none",stroke:"context-stroke"}),r=re(n,"g",{"stroke-width":1.5,"vector-effect":"non-scaling-stroke",class:"marker_"+N});ne(r,[5,5],[1,1]);for(let e=0;e<t.length;++e)re(r,t[e]);te(re(ke,n.cloneNode(!0),{id:"ml"+e+"_"+N}).childNodes[0],"class",""),l&&re(Ye,n.cloneNode(!0),{id:"mf"+e+"_"+N,fill:"context-stroke"})}function $e(e,t,l=0){var n=ee("gpl_"+e+"_"+t),r=l?"block":"none";ee("pl_"+e+"_"+t).style.display=r,ee("lgi_"+e+"_"+t).style.opacity=.3+.7*l,null!=n&&(n.style.display=r)}function et(e,t){var e=e.offsetY-Je+ht(I)[1],l=b((e-o/2)/(k+o)),e=ee("pl_"+N+"_"+l);if(null!=e){var n="none"!=e.style.display,r=0==t?l+1:t;for(let e=0==t?l:0;e<r;++e)n?e==l&&0!=t||$e(N,e):$e(N,e,1)}}function tt(){var e=le(F),t=le(Z),l=e[2]-Ze[0],e=e[3]-Ze[1];t[2]!=l&&(te(Z,"width",l),te(Me,"width",l),te(Le,"width",l),te(Te,"width",l),null!=I&&(I.x.baseVal.value+=l-t[2]),Q.transform.baseVal[0].matrix.e+=l-t[2]),t[3]!=e&&(te(Z,"height",e),te(Me,"height",e),te(ze,"height",e),null!=I)&&(l=(l=e-Pe)>qe?qe:l,te(I,"height",l),I.viewBox.baseVal.height=l),lt()}function lt(){var t=g.getElementsByClassName("marker_"+N);for(let e=0;e<t.length;++e){var l=le(Z),n=ht(Z),r=n[2]/l[2],n=n[3]/l[3];t[e].transform.baseVal[1].matrix.a=r,t[e].transform.baseVal[1].matrix.d=n}}function nt(e){for(var t=100*(e[0]-W[0])/W[2],l=100*(W[1]+W[3]-e[1]-e[3])/W[3],n=(Z.viewBox.baseVal.width=100*e[2]/W[2],Z.viewBox.baseVal.height=100*e[3]/W[3],Z.viewBox.baseVal.x=t,Z.viewBox.baseVal.y=l,re(null,We,{x:t,y:l}),g.getElementsByClassName("cg_"+N));0<n.length;)n[0].remove();rt(e),lt()}function rt(e){var n=[ue,fe],r=[de,ve],i=[ye,me],o=[0,0];for(let l=0;l<2;++l){var a=l?ze:Te,s=re(a,"g",{id:"ga"+a+"_"+N}),a=it(e[2+l],t[l],U[l]),h=e[l]+e[2+l],g=(d(e[l]/a)-1)*a,h=b(h/a)*a,f=0<n[l].length?n[l]:at(g,a,h),y=0<r[l].length?r[l]:U[l]?st(f.map(e=>10**e)):st(f),m=100*a/e[2+l],g=re(Me,"defs",{class:"cg_"+N}),x=re(g,"g",{id:"mg"+l+"_"+N}),h=U[l]&&1==a,g=Ce[l]?u[l]/(2-h):1;const V=at(10/g,10/g,10);if(1<g){U[l]&&1==a&&V.forEach((e,t)=>{V[t]=10*c(V[t])});for(let e=0;e<V.length-1;++e)ot(x,V[e]/10*m*(1-2*l),l,w,"2 4",J[l])}ot(x,0,l,v,"",ge);var h=i[l],p=(h=(h-(l?90:0))%180,function(t,l,n){var r=Array(t.length);for(let e=0;e<t.length;++e)r[e]=100*(t[e]-l)/n;return r}(f,e[l],e[2+l])),k=h<-11?"end":11<h?"start":"middle";for(let e=0;e<f.length;++e){var _=0<l?100-p[e]:p[e],B=l?[0,_]:[_,0],_=l?["100%",_+"%"]:[_+"%",q+.5*j*("middle"==k)];0<=p[e]&&(0<e||n)&&re(null,ie(s,y[e],_[0],_[1],j,k),{"dominant-baseline":"central",class:"cg_"+N,transform:"translate(-"+.5*j*l+" 0) rotate("+i[l]+")","transform-origin":_[0]+" "+_[1]}),re(Me,"use",{href:"#mg"+l+"_"+N,x:B[0],y:B[1],class:"cg_"+N})}o[l]=s.getBBox()}return o}function it(e,t,l){var t=e/t,n=b(c(t));const r=d(t/10**n);var i=x.findIndex(function(e){return e>=r}),t=x[i]*10**n;return l&&1<=e&&t<1?1:t}function ot(e,t,l,n,r,i){let o=[t,0,0,n,t,100];0<l&&(o=[o[1],o[0],o[3],o[2],o[5],o[4]]),i&&oe(e,o[0],o[1],o[4],o[5],"rgb(223,223,223)",r);n=oe(e,0,0,o[2],o[3]),t=oe(e,-o[2],-o[3],0,0);ne(n,[o[0],o[1]],[1,1]),ne(t,[o[4],o[5]],[1,1]),re(null,n,{class:"marker_"+N}),re(null,t,{class:"marker_"+N})}function at(t,l,e){var n=b((e-t)/l*(1+1e-12))+1;out=Array(n);for(let e=0;e<n;++e)out[e]=t+l*e;return out}function st(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],r=Array(l.length);for(let t=0;t<l.length;++t){var i=l[t].toExponential(5).split(/e/);let e=b(+i[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),r[t]=a(i[0]*10**(+i[1]-3*(e-8))*1e3)/1e3+n[e]}return r}function ee(e){return g.getElementById(e)}function te(e,t,l){e.setAttribute(t,l)}function ct(e,t){return e.getAttribute(t)}function le(e){return[e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value]}function ht(e){return[e.viewBox.baseVal.x,e.viewBox.baseVal.y,e.viewBox.baseVal.width,e.viewBox.baseVal.height]}function ne(e,t,l){t=null!=t?"translate("+t[0]+" "+t[1]+")":"";t+=null!=l?"scale("+l[0]+" "+l[1]+")":"",e.setAttribute("transform",t)}function re(e,t,l){var n,r="string"==typeof t?g.createElementNS(B,t):t;for(n in l)te(r,n,l[n]);return null!=e&&e.appendChild(r),r}function ie(e,t,l,n,r,i="middle",o="Sans,Arial",a="black"){e=re(e,"text",{x:l,y:n,fill:a,"font-size":r,"text-anchor":i,"font-family":o,"stroke-width":1});return e.append(g.createTextNode(t)),e}function oe(e,t,l,n,r,i="black",o="",a=1){return re(e,"line",{x1:t,y1:l,x2:n,y2:r,stroke:i,"stroke-width":a,"stroke-dasharray":o,"vector-effect":"non-scaling-stroke"})}function gt(e,t="",l="black",n="",r=2){return re(e,"polyline",{points:t,fill:"none",stroke:l,"stroke-width":r,"stroke-dasharray":n,"vector-effect":"non-scaling-stroke"})}function ae(e,t,l,n,r,i="none",o="none",a=2,s=0){return re(e,"rect",{x:t,y:l,width:n,height:r,rx:s,stroke:o,"stroke-width":a,fill:i,"vector-effect":"non-scaling-stroke"})}ne(Q,[L[2]-18,L[1]-24]),gt(Q,"8,0 8,16 2,9 8,16 14,9"),gt(Q,"0,17 0,20 16,20 16,17"),ae(Q,0,0,21,21),Q.onclick=()=>{var e,t;Q.style.display="none",Z.style.cursor="auto",e='<svg width="'+(e=le(F))[2]+'" height="'+e[3]+'" xmlns="'+B+'">',e=new Blob([e,F.innerHTML,"</svg>"],{type:"image/svg+xml;charset=utf-8"}),e=URL.createObjectURL(e),(t=g.createElement("a")).href=e,t.download="snapshot_"+ce+".svg",re(g.body,t),t.click(),g.body.removeChild(t),Q.style.display="block",Z.style.cursor="crosshair"},E.onclick=t=>{var l=le(Z),n=(s=ht(Z))[2]/l[2],r=s[3]/l[3],a=(t.offsetX-l[0])*n+s[0],a=(result=function(e,t,l,n,r,i){let o=null,a=f,s=0,c=0;var h=ee("gp_"+e),g=h.children.length;for(let e=0;e<g;++e){var u=h.children[e],d=u.points;if("none"!=u.style.display)for(let e=1;e<d.length;++e){var v,y,m,x,b,p,w=d[e-1],k=d[e];t<w.x-n&&t<k.x-n||t>w.x+n&&t>k.x+n||l<w.y-r&&l<k.y-r||l>w.y+r&&l>k.y+r||(v=k.x-w.x,m=(v*(t-w.x)+(y=k.y-w.y)*(l-w.y))/(v*v+y*y),1<=(m=((v=w.x+v*m)-t)*(v-t)/n/n+((y=w.y+y*m)-l)*(y-l)/r/r))||m>a||(a=m,o=u,m=w.x<t?t-w.x:w.x-t,x=w.y<l?l-w.y:w.y-l,b=k.x<t?t-k.x:k.x-t,p=k.y<l?l-k.y:k.y-l,m<b&&m<n&&x<r?(s=w.x,c=w.y):b<n&&p<r?(s=k.x,c=k.y):i&&0!=ct(u,"stroke-width")?(s=v,c=y):o=null)}}return{ele:o,x:s,y:c}}(N,a,t=(t.offsetY-l[1])*r+s[1],s=6*n,c=6*r,be)).ele;if(null!=a){var t=result.x,s=result.y,c="pl_"+N,a=a.id,c=a.slice(c.length,a.length),a=ee("lti_"+N+c),h=ct(ee("pl_"+N+c),"stroke"),g=function(e,t,l){return _=e[0]/100*t[2]+t[0],V=(1-e[1]/100)*t[3]+t[1],[_=l[0]?10**_:_,V=l[1]?10**V:V]}([t,s],W,U);let e=ee("gpl_"+N+c);null==e&&(e=re(Z,"g",{id:"gpl_"+N+c}));const d=re(e,"g",{class:"marker_"+N}),v=re(d,"g");c=ae(v,0,-33,1,33,h,"rgb(223,223,223)",1,rx=4),h=(ne(d,[t,s],[n,r]),d.onclick=e=>{e.ctrlKey?u(1):(d.remove(),1<e.detail&&nt(W))},null!=a&&(re(null,text=ie(v,a.textContent,2,-35,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),re(null,c,{y:-48,height:48})),ie(v,"x: "+st([g[0]]),2,-19,12,"start","Sans,Arial","white"),ie(v,"y: "+st([g[1]]),2,-5,12,"start","Sans,Arial","white"),d.getBBox());const y=[h.width+4,h.height],m=(re(null,c,{width:y[0]}),null!=a&&oe(v,0,-31,y[0],-31,stroke="white"),oe(d,0,0,6,-6));t=v.getBoundingClientRect();let i=t.right+5+pe.offsetLeft>l[0]+l[2],o=t.y-5-pe.offsetTop<l[1];function u(e){let t=5,l=-5,n=1,r=1;e&&([i,o]=[!o,i]),i&&(t=-y[0]-5,n=-1),o&&(l=y[1]+5,r=-1),ne(v,[t,l]),ne(m,null,[n,r])}u(!1),ae(d,-2,-2,4,4,"black"),re(d,"circle",{r:6,fill:"none","pointer-events":"visible"})}},F.oncontextmenu=e=>{e.preventDefault()},Z.onmousedown=t=>{{let e=0;if(t.button==i||t.button==h&&t.ctrlKey)e=1;else if(t.button!=h)return;Z.style.cursor=e?"move":"zoom-in";const o=t.offsetX,a=t.offsetY,l=ae(F,o,a,0,0,"black"),n=e?0:.3;re(null,l,{id:"zoom_rect"+N,"fill-opacity":n}),F.onmousemove=e=>{var t=o,l=a,n=ee("zoom_rect"+N),r=e.offsetX,t=r-t,l=(e=e.offsetY)-l,i=0==ct(n,"fill-opacity");i||0<=t?te(n,"width",t):re(null,n,{width:-t,x:r}),i||0<=l?te(n,"height",l):re(null,n,{height:-l,y:e})}}},Z.ondblclick=()=>nt(W),F.onmousedown=e=>{e.preventDefault()},F.onmouseup=()=>{var t=ee("zoom_rect"+N);if(Z.style.cursor="crosshair",(F.onmousemove=null)!=t){var l=0==ct(t,"fill-opacity"),n=le(t);if(t.remove(),!~l||0!=n[2]&&0!=n[3]){var t=ht(Z),r=le(Z);let e=[];e=l?[-n[2]/r[2],n[3]/r[3],1,1]:[(n[0]-r[0])/r[2],1-(n[1]+n[3]-r[1])/r[3],n[2]/r[2],n[3]/r[3]];l=[W[0]+W[2]*t[0]/100,W[1]+W[3]*(100-t[3]-t[1])/100,W[2]*t[2]/100,W[3]*t[3]/100];nt([l[0]+e[0]*l[2],l[1]+e[1]*l[3],e[2]*l[2],e[3]*l[3]])}}},0<C.length&&(H.onwheel=e=>{qe;var t=le(I),l=ht(I),t=qe-t[3];return l[1]+=e.deltaY,l[1]<0&&(l[1]=0),t<l[1]&&(l[1]=t),I.viewBox.baseVal.y=l[1],we.y.baseVal.value=l[1],!1}),new ResizeObserver(()=>tt()).observe(F),tt()}}
{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=Array.isArray,f=1/0,g=document,h=2,i=1,j=12,k=10,l="Lucida Sans Typewriter",m=30,n=4,o=4,p=400,q=4,r=24,s=12,t=[10,10],u=[10,10],v=[1,2,5,10],w=4*j,x=2*j,y=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],z="http://www.w3.org/2000/svg";function plotSvg(_,B,V,A,{color:ae="",title:ce="",subtitle:N="",xlabel:S="",ylabel:E="",xlim:T=[],ylim:M=[],style:he="-",marker:C="",legend:L=[],xScale:ue="lin",yScale:ge="lin",grid:fe=!0,gridMinor:de=[],legendLocation:Y="northeastoutside",linTip:ve=!0}={}){let R=[!1,!1];"log"==ue&&(B=B.map(c),1<T.length&&(T=T.map(c),isNaN(T[0])||isNaN(T[1])?T=[]:(T[0]=T[0]==-f?0:T[0],T[1]=T[1]==-f?0:T[1])),R[0]=!0),"log"==ge&&(V=V.map(c),1<M.length&&(M=M.map(c),isNaN(M[0])||isNaN(M[1])?M=[]:(M[0]=M[0]==-f?0:M[0],M[1]=M[1]==-f?0:M[1])),R[1]=!0);var D=ee(_);const U=g.createElement("div"),X=(re(D,U),te(U,"style","width:100%;height:100%;min-width:"+p+"px;min-height:200px;overflow:none"),re(U,"svg",{id:"s_"+_,width:"100%",height:"100%"}));D=le(X);X.innerHTML+="<style>\n<![CDATA[\ntext.cll {\nfont-size:"+k+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+l+";\n}\n.b:hover polyline{\nopacity:0.5;\n}\n]]>\n</style>\n";let F=0,ye=w;var me=ce.split("\n"),xe=N.split("\n");0<ce.length&&(F+=(r+q)*me.length),0<N.length&&(F+=(s+q)*xe.length),F=F<19?25:F+6;let pe=D[3]-F-x,H=D[2]-ye;0<S.length&&(pe=pe-j-q),0<E.length&&(ye=ye+j+2*q,H=H-j-2*q);var I=re(null,"g",{"pointer-events":"visible"});I.onclick=e=>We(e,0),I.ondblclick=e=>We(e,A);let we=0,O=0,be="none",G=null,ke=null,_e=null;if(0<L.length&&0<A&&0<B.length){let e=F;"northeast"==Y&&(e=F+2*o,we=4*o,be="white");var K=pe-we,Be=(G=re(I,"svg",{id:"sl_"+_}),_e=re(G,"defs"),re(X,I),A);let l=L;L.length>A&&(l=L.slice(0,Be));K=(O=Be*(k+o)+o)>K?K:O;re(null,G,{x:"100%",height:K}),re(null,ke=se(G,0,0,0,"100%",be,"black"),{id:"rect_leg_"+_});for(let t=0;t<Be;++t){var Ve=t*(k+o)+o,Ae=new re(G,"g",{id:"lgi_"+_+"_"+t}),Ne=re(Ae,"text",{id:"lti_"+_+"_"+t,class:"cll",x:n+m+n,y:Ve+k/2}),Ve=Ve+k/2;ot(Ae,n+","+Ve+" "+(n+m/2)+","+Ve+" "+(n+m)+","+Ve);let e="";t<l.length&&(e=l[t]),Ne.append(g.createTextNode(e))}var P=(P=I.getBBox().width+2*n)>p?p:P;te(ke,"width","100%"),te(G,"width",P);let t=-P-n;H-=P+2*n,"northeast"==Y&&(t-=n+w,H-=w-P-2*n),re(null,G,{x:D[2]+t,y:e,viewBox:"0 0 "+P+" "+K})}else H-=w;Y=[ye,F,H,pe];let Se=[D[2]-Y[2],D[3]-Y[3]];const Ee=re(X,"svg",{id:"st_"+_,x:Y[0],overflow:"visible",width:Y[2]});let W=0;if(0<ce.length)for(let e=0;e<me.length;++e)W=W+r+q,ie(Ee,me[e],"50%",W,r);if(0<N.length)for(let e=0;e<xe.length;++e)W=W+s+q,ie(Ee,xe[e],"50%",W,s);P=-D[3]+Y[1]+Y[3],K=re(X,"g");ne(K,[Y[0],P]);const Te=re(K,"svg",{id:"s_btm_"+_,overflow:"visible",y:"100%",width:Y[2]}),ze=(0<S.length&&ie(Te,S,"50%",3*j,j),re(X,"svg",{id:"sy_"+_,width:Y[0],y:Y[1],overflow:"visible",height:Y[3]}));0<E.length&&(re(null,N=ie(ze,E,Y[0]-j,"50%",j),{"writing-mode":"vertical-rl","transform-origin":"center"}),ne(N,null,[-1,-1]));D=Pe(B,T),P=Pe(V,M);let Z=[D[0],P[0],D[1]-D[0],P[1]-P[0]];const Me=re(X,"svg",{id:"s_bg_"+_,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:Y[2],height:Y[3],x:Y[0],y:Y[1]}),J=re(X,"svg",{id:"sd_"+_,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:Y[2],height:Y[3],x:Y[0],y:Y[1]});let Ce=[!(J.style.cursor="crosshair"),!1];de.length<1?(Ce[0]="log"==ue,Ce[1]="log"==ge):(Ce[0]=de[0],Ce[1]=de[1]);K=et(Z[2],t[0],R[0]),S=et(Z[3],t[1],R[1]);T.length<1&&4<=Z[2]/K&&(Z[0]=b(D[0]/K)*K,Z[2]=d(D[1]/K)*K-Z[0]),M.length<1&&4<=Z[3]/S&&(Z[1]=b(P[0]/S)*S,Z[3]=d(P[1]/S)*S-Z[1]),$e(Z);const Le=re(J,"defs");""!=C&&($("o",[re(null,"circle",{r:"5"})],1),$("+",[oe(null,0,-5,0,5,"","",""),oe(null,-5,0,5,0,"","","")]),$("*",[oe(null,0,-5,0,5,"","",""),oe(null,-5,0,5,0,"","",""),oe(null,-3.5,-3.5,3.5,3.5,"","",""),oe(null,-3.5,3.5,3.5,-3.5,"","","")]),$(".",[re(null,"circle",{r:"1.5","stroke-width":3})]),$("x",[oe(null,-3.5,-3.5,3.5,3.5,"","",""),oe(null,-3.5,3.5,3.5,-3.5,"","","")]),$("_",[oe(null,-5,0,5,0,"","","")]),$("|",[oe(null,0,-5,0,5,"","","")]),$("sq",[se(null,-5,-5,10,10,"","","")],1),$("^",[re(null,"polygon",{points:"-5 3, 0 -5, 5 3"})],1),$("v",[re(null,"polygon",{points:"-5 -3, 0 5, 5 -3"})],1),$("tr",[re(null,"polygon",{points:"-3 -5, 5 0, -3 5"})],1),$("tl",[re(null,"polygon",{points:"-5 0, 3 5, 3 -5"})],1));var Ye=V.length/A,Re=B.length==V.length;if(!Re&&Ye!=B.length)throw new Error("Dimension must agree");var De=re(J,"g",{id:"gp_"+_});for(let n=0;n<A;++n){var Ue=n%y.length,Xe=e(he)?he[n]:he,Fe="url(#m"+(Array.isArray(C)?C[n]:C)+"_"+_+")",He=e(ae)?n<ae.length?ae[n]:"":ae,Ue=""==He?y[Ue]:He;let t="",l=2;switch(Xe){case":":t="2 3";break;case"--":t="12 6";break;case"-.":t="0 1.5 9 3 3 2.5";break;case"*":l=0}var Ie=ot(De,"",Ue,t,l);re(null,Ie,{id:"pl_"+_+"_"+n,"marker-start":Fe,"marker-mid":Fe,"marker-end":Fe,"stroke-width":l}),null!=G&&(He="url(#ml"+(e(C)?C[n]:C)+"_"+_+")",re(null,G.childNodes[n+2].childNodes[1],{"stroke-dasharray":t,"marker-mid":He,"stroke-width":l,stroke:Ue}));for(let e=0;e<Ye;++e){var Oe,je=Re?B[n*Ye+e]:B[e],Ge=V[n*Ye+e];isFinite(je)&&isFinite(Ge)&&((Oe=J.createSVGPoint()).x=100*(je-Z[0])/Z[2],Oe.y=100-100*(Ge-Z[1])/Z[3],Ie.points.appendItem(Oe))}}E=se(J,0,0,"100%","100%","none","black");const Ke=re(null,E,{id:"plr_"+_,"pointer-events":"visible"}),Q=("white"==be&&re(X,I),re(Ee,"g",{id:"bd_"+_,"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round",class:"b","pointer-events":"visible"}));function Pe(n,r){if(r.length<2){let e=n.length,t=-f,l=f;for(;e--;)isFinite(n[e])&&(l=n[e]<l?n[e]:l,t=n[e]>t?n[e]:t);r=[l,t]}return r[0]==r[1]&&(r[0]=r[0]-.5,r[1]=r[1]+.5),r}function $(e,t,l=0){var n=re(Le,"marker",{id:"m"+e+"_"+_,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"userSpaceOnUse",fill:"none",stroke:"context-stroke"}),r=re(n,"g",{"stroke-width":1.5,"vector-effect":"non-scaling-stroke",class:"marker_"+_});ne(r,[5,5],[1,1]);for(let e=0;e<t.length;++e)re(r,t[e]);te(re(_e,n.cloneNode(!0),{id:"ml"+e+"_"+_}).childNodes[0],"class",""),l&&re(Le,n.cloneNode(!0),{id:"mf"+e+"_"+_,fill:"context-stroke"})}function qe(e,t,l=0){var n=ee("gpl_"+e+"_"+t),r=l?"block":"none";ee("pl_"+e+"_"+t).style.display=r,ee("lgi_"+e+"_"+t).style.opacity=.3+.7*l,null!=n&&(n.style.display=r)}function We(e,t){var e=e.offsetY-rt(G,"y")+it(G)[1],l=b((e-o/2)/(k+o)),e=ee("pl_"+_+"_"+l);if(null!=e){var n="none"!=e.style.display,r=0==t?l+1:t;for(let e=0==t?l:0;e<r;++e)n?e==l&&0!=t||qe(_,e):qe(_,e,1)}}function Ze(){var e=le(X),t=le(J),l=e[2]-Se[0],e=e[3]-Se[1];t[2]!=l&&(te(J,"width",l),te(Me,"width",l),te(Ee,"width",l),te(Te,"width",l),null!=G&&(G.x.baseVal.value+=l-t[2]),Q.transform.baseVal[0].matrix.e+=l-t[2]),t[3]!=e&&(te(J,"height",e),te(Me,"height",e),te(ze,"height",e),null!=G)&&(l=(l=e-we)>O?O:l,te(G,"height",l),G.viewBox.baseVal.height=l),Je()}function Je(){var t=g.getElementsByClassName("marker_"+_);for(let e=0;e<t.length;++e){var l=le(J),n=it(J),r=n[2]/l[2],n=n[3]/l[3];t[e].transform.baseVal[1].matrix.a=r,t[e].transform.baseVal[1].matrix.d=n}}function Qe(e){for(var t=100*(e[0]-Z[0])/Z[2],l=100*(Z[1]+Z[3]-e[1]-e[3])/Z[3],n=(J.viewBox.baseVal.width=100*e[2]/Z[2],J.viewBox.baseVal.height=100*e[3]/Z[3],J.viewBox.baseVal.x=t,J.viewBox.baseVal.y=l,re(null,Ke,{x:t,y:l}),g.getElementsByClassName("cg_"+_));0<n.length;)n[0].remove();$e(e),Je()}function $e(e){for(let r=0;r<2;++r){var i=0<r?ze:Te,o=et(e[2+r],t[r],R[r]),s=e[r]+e[2+r],l=d(e[r]/o)*o,s=b(s/o)*o,h=100*(0<r?e[r]+e[r+2]-s:l-e[r])/e[2+r],g=a((s-l)/o);let n=Array();n=R[r]?nt(lt(l,o,s).map(e=>10**e)):nt(lt(l,o,s));const y=100*o/e[2+r];var l=re(Me,"defs",{class:"cg_"+_}),f=re(l,"g",{id:"mg"+r+"_"+_}),s=R[r]||Ce[r]?u[r]:0;if(0<s){let l=Array();R[r]&&1==o?(l=lt(1,9/(s-1),10).map(c)).forEach((e,t)=>{l[t]=l[t]*y}):l=lt(0,2/s*y,y);for(let e=1;e<l.length-1;++e)tt(f,0<r?y-l[e]:l[e],r,4,"2 4")}tt(f,0,r,8,"");for(let l=-1;l<=g;++l){var v=h+y*l;let e=null,t=(0<=l&&re(null,e=0<r?ie(i,n[g-l],le(i)[2]-.5*j,v+"%",j,"end"):ie(i,n[l],v+"%",.9*j,j),{"dominant-baseline":"central",class:"cg_"+_}),[v,0]);0<r&&(t=[t[1],t[0]]),re(Me,"use",{href:"#mg"+r+"_"+_,x:t[0],y:t[1],class:"cg_"+_})}}}function et(e,t,l){var t=e/t,n=b(c(t));const r=d(t/10**n);var i=v.findIndex(function(e){return e>=r}),t=v[i]*10**n;return l&&1<=e&&t<1?1:t}function tt(e,t,l,n,r){let i=[t,0,0,n,t,100];0<l&&(i=[i[1],i[0],i[3],i[2],i[5],i[4]]),fe&&oe(e,i[0],i[1],i[4],i[5],"rgb(223,223,223)",r);n=oe(e,0,0,i[2],i[3]),t=oe(e,-i[2],-i[3],0,0);ne(n,[i[0],i[1]],[1,1]),ne(t,[i[4],i[5]],[1,1]),re(null,n,{class:"marker_"+_}),re(null,t,{class:"marker_"+_})}function lt(t,l,e){var n=b((e-t)/l*(1+1e-12))+1;out=Array(n);for(let e=0;e<n;++e)out[e]=t+l*e;return out}function nt(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],r=Array(l.length);for(let t=0;t<l.length;++t){var i=l[t].toExponential(5).split(/e/);let e=b(+i[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),r[t]=a(i[0]*10**(+i[1]-3*(e-8))*1e3)/1e3+n[e]}return r}function ee(e){return g.getElementById(e)}function te(e,t,l){e.setAttribute(t,l)}function rt(e,t){return e.getAttribute(t)}function le(e){return[e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value]}function it(e){return[e.viewBox.baseVal.x,e.viewBox.baseVal.y,e.viewBox.baseVal.width,e.viewBox.baseVal.height]}function ne(e,t,l){t=null!=t?"translate("+t[0]+" "+t[1]+")":"";t+=null!=l?"scale("+l[0]+" "+l[1]+")":"",e.setAttribute("transform",t)}function re(e,t,l){var n,r="string"==typeof t?g.createElementNS(z,t):t;for(n in l)te(r,n,l[n]);return null!=e&&e.appendChild(r),r}function ie(e,t,l,n,r,i="middle",o="Sans,Arial",s="black"){e=re(e,"text",{x:l,y:n,fill:s,"font-size":r,"text-anchor":i,"font-family":o,"stroke-width":1});return e.append(g.createTextNode(t)),e}function oe(e,t,l,n,r,i="black",o="",s=1){return re(e,"line",{x1:t,y1:l,x2:n,y2:r,stroke:i,"stroke-width":s,"stroke-dasharray":o,"vector-effect":"non-scaling-stroke"})}function ot(e,t="",l="black",n="",r=2){return re(e,"polyline",{points:t,fill:"none",stroke:l,"stroke-width":r,"stroke-dasharray":n,"vector-effect":"non-scaling-stroke"})}function se(e,t,l,n,r,i="none",o="none",s=2,a=0){return re(e,"rect",{x:t,y:l,width:n,height:r,rx:a,stroke:o,"stroke-width":s,fill:i,"vector-effect":"non-scaling-stroke"})}ne(Q,[Y[2]-18,Y[1]-24]),ot(Q,"8,0 8,16 2,9 8,16 14,9"),ot(Q,"0,17 0,20 16,20 16,17"),se(Q,0,0,21,21),Q.onclick=()=>{var e,t;Q.style.display="none",J.style.cursor="auto",e='<svg width="'+(e=le(X))[2]+'" height="'+e[3]+'" xmlns="'+z+'">',e=new Blob([e,X.innerHTML,"</svg>"],{type:"image/svg+xml;charset=utf-8"}),e=URL.createObjectURL(e),(t=g.createElement("a")).href=e,t.download="snapshot_"+ce+".svg",re(g.body,t),t.click(),g.body.removeChild(t),Q.style.display="block",J.style.cursor="crosshair"},E.onclick=t=>{var l=le(J),n=(a=it(J))[2]/l[2],r=a[3]/l[3],s=(t.offsetX-l[0])*n+a[0],s=(result=function(e,t,l,n,r,i){let o=null,s=f,a=0,c=0;var h=ee("gp_"+e),u=h.children.length;for(let e=0;e<u;++e){var g=h.children[e],d=g.points;if("none"!=g.style.display)for(let e=1;e<d.length;++e){var v,y,m,x,p,w,b=d[e-1],k=d[e];t<b.x-n&&t<k.x-n||t>b.x+n&&t>k.x+n||l<b.y-r&&l<k.y-r||l>b.y+r&&l>k.y+r||(v=k.x-b.x,m=(v*(t-b.x)+(y=k.y-b.y)*(l-b.y))/(v*v+y*y),1<=(m=((v=b.x+v*m)-t)*(v-t)/n/n+((y=b.y+y*m)-l)*(y-l)/r/r))||m>s||(s=m,o=g,m=b.x<t?t-b.x:b.x-t,x=b.y<l?l-b.y:b.y-l,p=k.x<t?t-k.x:k.x-t,w=k.y<l?l-k.y:k.y-l,m<p&&m<n&&x<r?(a=b.x,c=b.y):p<n&&w<r?(a=k.x,c=k.y):i&&0!=rt(g,"stroke-width")?(a=v,c=y):o=null)}}return{ele:o,x:a,y:c}}(_,s,t=(t.offsetY-l[1])*r+a[1],a=6*n,c=6*r,ve)).ele;if(null!=s){var t=result.x,a=result.y,c="pl_"+_,s=s.id,c=s.slice(c.length,s.length),s=ee("lti_"+_+c),h=rt(ee("pl_"+_+c),"stroke"),u=function(e,t,l){return B=e[0]/100*t[2]+t[0],V=(1-e[1]/100)*t[3]+t[1],[B=l[0]?10**B:B,V=l[1]?10**V:V]}([t,a],Z,R);let e=ee("gpl_"+_+c);null==e&&(e=re(J,"g",{id:"gpl_"+_+c}));const d=re(e,"g",{class:"marker_"+_}),v=re(d,"g");c=se(v,0,-33,1,33,h,"rgb(223,223,223)",1,rx=4),h=(ne(d,[t,a],[n,r]),d.onclick=e=>{e.ctrlKey?g(1):(d.remove(),1<e.detail&&Qe(Z))},null!=s&&(re(null,text=ie(v,s.textContent,2,-35,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),re(null,c,{y:-48,height:48})),ie(v,"x: "+nt([u[0]]),2,-19,12,"start","Sans,Arial","white"),ie(v,"y: "+nt([u[1]]),2,-5,12,"start","Sans,Arial","white"),d.getBBox());const y=[h.width+4,h.height],m=(re(null,c,{width:y[0]}),null!=s&&oe(v,0,-31,y[0],-31,stroke="white"),oe(d,0,0,6,-6));t=v.getBoundingClientRect();let i=t.right+5+U.offsetLeft>l[0]+l[2],o=t.y-5-U.offsetTop<l[1];function g(e){let t=5,l=-5,n=1,r=1;e&&([i,o]=[!o,i]),i&&(t=-y[0]-5,n=-1),o&&(l=y[1]+5,r=-1),ne(v,[t,l]),ne(m,null,[n,r])}g(!1),se(d,-2,-2,4,4,"black"),re(d,"circle",{r:6,fill:"none","pointer-events":"visible"})}},X.oncontextmenu=e=>{e.preventDefault()},J.onmousedown=t=>{{let e=0;if(t.button==i||t.button==h&&t.ctrlKey)e=1;else if(t.button!=h)return;J.style.cursor=e?"move":"zoom-in";const o=t.offsetX,s=t.offsetY,l=se(X,o,s,0,0,"black"),n=e?0:.3;re(null,l,{id:"zoom_rect"+_,"fill-opacity":n}),X.onmousemove=e=>{var t=o,l=s,n=ee("zoom_rect"+_),r=e.offsetX,t=r-t,l=(e=e.offsetY)-l,i=0==rt(n,"fill-opacity");i||0<=t?te(n,"width",t):re(null,n,{width:-t,x:r}),i||0<=l?te(n,"height",l):re(null,n,{height:-l,y:e})}}},J.ondblclick=()=>Qe(Z),X.onmousedown=e=>{e.preventDefault()},X.onmouseup=()=>{var t=ee("zoom_rect"+_);if(J.style.cursor="crosshair",(X.onmousemove=null)!=t){var l=0==rt(t,"fill-opacity"),n=le(t);if(t.remove(),!~l||0!=n[2]&&0!=n[3]){var t=it(J),r=le(J);let e=[];e=l?[-n[2]/r[2],n[3]/r[3],1,1]:[(n[0]-r[0])/r[2],1-(n[1]+n[3]-r[1])/r[3],n[2]/r[2],n[3]/r[3]];l=[Z[0]+Z[2]*t[0]/100,Z[1]+Z[3]*(100-t[3]-t[1])/100,Z[2]*t[2]/100,Z[3]*t[3]/100];Qe([l[0]+e[0]*l[2],l[1]+e[1]*l[3],e[2]*l[2],e[3]*l[3]])}}},0<L.length&&(I.onwheel=e=>{O;var t=le(G),l=it(G),t=O-t[3];return l[1]+=e.deltaY,l[1]<0&&(l[1]=0),t<l[1]&&(l[1]=t),G.viewBox.baseVal.y=l[1],ke.y.baseVal.value=l[1],!1}),new ResizeObserver(()=>Ze()).observe(X),Ze()}}
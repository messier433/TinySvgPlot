{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=12,f=10,g="Lucida Sans Typewriter",h=20,i=4,j=4,k=400,l=4,m=24,n=12,o=[10,10],p=[10,10],q=[1,2,5,10],r=4*e,s=2*e,t=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"];function gE(e){return document.getElementById(e)}function sAt(e,t,l){e.setAttribute(t,l)}function gAt(e,t){return e.getAttribute(t)}function sLi(a,n){if(n.length<2){let e=a.length,t=-1/0,l=1/0;for(;e--;)l=a[e]<l&&isFinite(a[e])?a[e]:l,t=a[e]>t&&isFinite(a[e])?a[e]:t;n=[l,t]}return n[0]==n[1]&&(n[0]=n[0]-.5,n[1]=n[1]+.5),n}function n2e(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(l.length);for(let t=0;t<l.length;++t){var s=l[t].toExponential(5).split(/e/);let e=b(+s[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),i[t]=a(s[0]*10**(+s[1]-3*(e-8))*1e3)/1e3+n[e]}return i}function lis(e,t,l){for(numel=b((l-e)/t)+1,out=Array(numel),idx=0;idx<numel;++idx)out[idx]=e+t*idx;return out}function los(e,t,l){return lis(e,t,l).map(c)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var a,n="string"==typeof t?document.createElementNS("http://www.w3.org/2000/svg",t):t;for(a in l)sAt(n,a,l[a]);return null!=e&&e.appendChild(n),n}function aST(e,t,l,a,n,i="middle",s="Sans,Arial",o="black"){e=aSE(e,"text",{x:l,y:a,fill:o,"font-size":n,"text-anchor":i,"font-family":s,"stroke-width":1});return e.append(document.createTextNode(t)),e}function aSL(e,t,l,a,n,i="black",s=""){return aSE(e,"line",{x1:t,y1:l,x2:a,y2:n,stroke:i,"stroke-width":1,"stroke-dasharray":s,"vector-effect":"non-scaling-stroke"})}function aSR(e,t,l,a,n,i="none",s="none",o=2,r=0){return aSE(e,"rect",{x:t,y:l,width:a,height:n,rx:r,stroke:s,"stroke-width":o,fill:i,"vector-effect":"non-scaling-stroke"})}function lC(e,t,l,a,n){var i=gE("svg_leg_"+a),e=e.offsetY-gAt(i,"y"),s=b((e-l/2)/(t+l)),i=gE("pl_"+a+"_"+s);if(null!=i){var o=i.style.display;if(0==n){e=gE("gpl_"+a+"_"+s);"none"===o?(gE("pl_"+a+"_"+s).style.display="block",gE("lgi_"+a+"_"+s).style.opacity=1,null!=e&&(e.style.display="block")):(gE("pl_"+a+"_"+s).style.display="none",gE("lgi_"+a+"_"+s).style.opacity=.3,null!=e&&(e.style.display="none"))}else for(let e=0;e<n;++e){var r=gE("gpl_"+a+"_"+e);"none"===o?(gE("pl_"+a+"_"+e).style.display="block",gE("lgi_"+a+"_"+e).style.opacity=1,null!=r&&(r.style.display="block")):e!=s&&(gE("pl_"+a+"_"+e).style.display="none",gE("lgi_"+a+"_"+e).style.opacity=.3,null!=r)&&(r.style.display="none")}}}function rS(e,t,l,a,n){var i=gE("svg_leg_"+e),s=gE("svg_draw_"+e),o=gE("svg_bg_"+e),r=gE("svg_top_"+e),g=gE("svg_bottom_"+e),c=gE("svg_left_"+e),h=gE("svg_"+e),v=h.width.baseVal.value-t,d=h.height.baseVal.value-l,u=s.width.baseVal.value,f=s.height.baseVal.value,y=document.getElementsByClassName("tooltip_"+e);if(u!=v){sAt(s,"width",v),sAt(o,"width",v),sAt(r,"width",v),sAt(g,"width",v),i.x.baseVal.value+=v-u;for(let e=0;e<y.length;++e){var x=s.x.baseVal.value,_=y[e].transform.baseVal[0].matrix.e;y[e].transform.baseVal[0].matrix.e=x+(_-x)*v/u}}if(f!=d){sAt(s,"height",d),sAt(o,"height",d),sAt(c,"height",d),null!=i&&(sAt(i,"height",t=a<(t=d-n)?a:t),i.viewBox.baseVal.height=t);for(let e=0;e<y.length;++e){var w=s.y.baseVal.value,p=y[e].transform.baseVal[0].matrix.f;y[e].transform.baseVal[0].matrix.f=w+(p-w)*d/f}}}function sL(e,t,l){var a=gE("svg_leg_"+t),t=gE("rect_leg_"+t),e=(a.viewBox.baseVal.y+=e.deltaY,l-a.height.baseVal.value);return a.viewBox.baseVal.y<0&&(a.viewBox.baseVal.y=0),a.viewBox.baseVal.y>e&&(a.viewBox.baseVal.y=e),t.y.baseVal.value=a.viewBox.baseVal.y,!1}function pC(t,l,a,n,i,s,o){svgDraw=gE("svg_draw_"+l),svg=gE("svg_"+l);var r=svgDraw.x.baseVal.value,g=svgDraw.y.baseVal.value,c=t.offsetX-r,t=t.offsetY-g,h=100/svgDraw.width.baseVal.value,v=100/svgDraw.height.baseVal.value,d=(c*=h,t*=v,6*h),u=6*v;if(result=gNL(l,c,t,d,u),null!=(closestEl=result.ele)){c=result.x,t=result.y,d=c/h+r,u=t/v+g,h=closestEl.id,r=h.slice(("pl_"+l).length,h.length),v=gE("lti_"+l+r),g=gAt(gE("pl_"+l+r),"stroke"),h=cC([c,t],a,o);const f=gE("gpl_"+l+r);null==f&&(f=aSE(svg,"g",{id:"gpl_"+l+r}));c=aSE(f,"g",{class:"tooltip_"+l,transform:"translate("+d+" "+u+")"}),t=(c.onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove(),1<e.detail&&sAL(l,a,a,n,i,s,o)},aSR(c,5,-9,0,32,g,"rgb(223,223,223)",1,rx=4));let e=null;null!=v&&(aSE(null,text=aST(c,v.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),e=aSL(c,5,-8,5,-8,stroke="white"),aSE(null,t,{y:-23,height:46})),aST(c,"x: "+n2e([h[0]]),7,4,12,"start","Sans,Arial","white"),aST(c,"y: "+n2e([h[1]]),7,18,12,"start","Sans,Arial","white");r=c.getBBox();aSE(null,t,{width:r.width+4}),null!=e&&sAt(e,"x2",r.width+4+5),aSR(c,-2,-2,4,4,"black"),aSE(c,"circle",{r:6,fill:"none","pointer-events":"visible"})}}function cC(e,t,l){return x=e[0]/100*t[2]+t[0],y=(1-e[1]/100)*t[3]+t[1],x=l[0]?10**x:x,y=l[1]?10**y:y,[x,y]}function gNL(e,t,l,a,n){let i=null,s=1/0;var o=gE("gp_"+e),r=o.children.length;let g=0,c=0;for(let e=0;e<r;++e){var h=o.children[e].points;for(idxPt=1;idxPt<h.length;++idxPt){var v,d,u,f,y,x,_=h[idxPt-1],w=h[idxPt];t<_.x-a&&t<w.x-a||t>_.x+a&&t>w.x+a||l<_.y-n&&l<w.y-n||l>_.y+n&&l>w.y+n||(u=((v=w.x-_.x)*(t-_.x)+(d=w.y-_.y)*(l-_.y))/(v*v+d*d),1<=(u=((v=_.x+v*u)-t)*(v-t)/a/a+((d=_.y+d*u)-l)*(d-l)/n/n))||u>s||(s=u,i=o.children[e],u=_.x<t?t-_.x:_.x-t,f=_.y<l?l-_.y:_.y-l,y=w.x<t?t-w.x:w.x-t,x=w.y<l?l-w.y:w.y-l,c=u<y&&u<a&&f<n?(g=_.x,_.y):y<a&&x<n?(g=w.x,w.y):(g=v,d))}}return{ele:i,x:g,y:c}}function pM(e,t){if(0==e.button){svg=gE("svg_"+t);const l=e.offsetX,a=e.offsetY;aSE(null,aSR(svg,l,a,0,0,"black"),{id:"zoom_rect"+t,"fill-opacity":"0.3"}),svg.onmousemove=e=>pDZ(e,t,l,a)}}function pDZ(e,t,l,a){rectZoom=gE("zoom_rect"+t);t=e.offsetX,e=e.offsetY,l=t-l,a=e-a;0<=l?sAt(rectZoom,"width",l):aSE(null,rectZoom,{width:-l,x:t}),0<=a?sAt(rectZoom,"height",a):aSE(null,rectZoom,{height:-a,y:e})}function pZ(e,t,l,a,n){var i,s,o;rectZoom=gE("zoom_rect"+e),((svg=gE("svg_"+e)).onmousemove=null)!=rectZoom&&(rectZoom.remove(),0!=(i=[rectZoom.x.baseVal.value,rectZoom.y.baseVal.value,rectZoom.width.baseVal.value,rectZoom.height.baseVal.value])[2])&&0!=i[3]&&(o=[(svgDraw=gE("svg_draw_"+e)).viewBox.baseVal.x,svgDraw.viewBox.baseVal.y,svgDraw.viewBox.baseVal.width,svgDraw.viewBox.baseVal.height],s=[svgDraw.x.baseVal.value,svgDraw.y.baseVal.value,svgDraw.width.baseVal.value,svgDraw.height.baseVal.value],sAL(e,[(e=[t[0]+t[2]*o[0]/100,t[1]+t[3]*(100-o[3]-o[1])/100,t[2]*o[2]/100,t[3]*o[3]/100])[0]+(o=[(i[0]-s[0])/s[2],1-(i[1]+i[3]-s[1])/s[3],i[2]/s[2],i[3]/s[3]])[0]*e[2],e[1]+o[1]*e[3],o[2]*e[2],o[3]*e[3]],t,s,l,a,n))}function sAL(e,t,l,a,n,i,s){for(var o=gE("svg_draw_"+e),r=100*(t[0]-l[0])/l[2],g=100*(l[1]+l[3]-t[1]-t[3])/l[3],l=(o.viewBox.baseVal.width=100*t[2]/l[2],o.viewBox.baseVal.height=100*t[3]/l[3],o.viewBox.baseVal.x=r,o.viewBox.baseVal.y=g,gE("plr_"+e)),c=(aSE(null,l,{x:r,y:g}),document.getElementsByClassName("cg_"+e));0<c.length;)c[0].remove();cGr(e,a,t,n,i,s)}function cTi(e,t,l){var t=e/t,a=b(c(t));const n=d(t/10**a);var i=q.findIndex(function(e){return e>=n}),t=q[i]*10**a;return l&&1<=e&&t<1?1:t}function cGr(h,v,u,f,y,x){var _=gE("svg_bg_"+h),w=gE("svg_left_"+h),E=gE("svg_bottom_"+h);for(let c=0;c<2;++c){var m=0<c?w:E,S=cTi(u[2+c],o[c],x[c]),V=u[c]+u[2+c],k=d(u[c]/S)*S,V=b(V/S)*S,A=100*(k-u[c])/u[2+c],L=a((V-k)/S);let l=Array();l=x[c]?n2e(dec(k,S,V)):n2e(lis(k,S,V));const Z=100*S/u[2+c];var k=aSE(_,"defs",{class:"cg_"+h}),B=aSE(k,"g",{id:"mg"+c+"_"+h});if(y[c]&&0<p[c]){const C=l[idx],M=l[idx],R=0,z=100;0<c&&([C,R,M,z]=[R,C,z,M]);let l=Array();x[c]&&1==S?(l=los(1,9/(nMinorTicks[c]-1),10)).forEach((e,t)=>{l[t]=(1-l[t])*Z}):l=lis(0,1/nMinorTicks[c]*Z,Z);for(let e=1;e<l.length-1;++e)aSL(B,C,R,M,z,"rgb(223,223,223)","2 4")}let t="0%",n="99%",i="0%",s="100%",r="0%",g="1%";0<c&&([t,n,i,s,r,g]=[n,t,s,i,g,r]),f&&aSL(B,0,0,i,s,"rgb(223,223,223)"),aSL(B,t,n,i,s),aSL(B,0,0,r,g);for(let t=0;t<=L;++t){var T,D=A+Z*t,N=(0<c?aSE(null,T=aST(m,l[L-t],v[0]-.5*e,D+"%",e,"end"),{"dominant-baseline":"central",class:"cg_"+h}):T=aST(m,l[t],D+"%",1.4*e,e),sAt(T,"class","cg_"+h),0<c?0:D),D=0<c?D:0;aSE(_,"use",{href:"#mg"+c+"_"+h,x:N,y:D,class:"cg_"+h})}}}function plotSvg(v,a,u,y,{title:x="",subtitle:_="",xlabel:w="",ylabel:p="",xlim:E=[],ylim:S=[],legend:V=[],xScale:$="lin",yScale:ee="lin",grid:A=!0,gridMinor:L=[],legendLocation:B="northeastoutside"}={}){let T=[!1,!1];"log"==$&&(a=a.map(c),1<E.length&&(E=E.map(c),isNaN(E[0])||isNaN(E[1])?E=[]:(E[0]=E[0]==-1/0?0:E[0],E[1]=E[1]==-1/0?0:E[1])),T[0]=!0),"log"==ee&&(u=u.map(c),1<S.length&&(S=S.map(c),isNaN(S[0])||isNaN(S[1])?S=[]:(S[0]=S[0]==-1/0?0:S[0],S[1]=S[1]==-1/0?0:S[1])),T[1]=!0);var D=gE(v),N=document.createElement("div"),D=(D.appendChild(N),sAt(N,"style","width:100%;height:100%;min-width:"+k+"px;min-height:200px;overflow:none"),aSE(N,"svg",{id:"svg_"+v,width:"100%",height:"100%"})),N=D.width.baseVal.value,Z=D.height.baseVal.value;D.innerHTML+="<style>\n<![CDATA[\npolyline.l {\nstroke-width:2;\nvector-effect:non-scaling-stroke;\nfill:none;\n}\ntext.cll {\nfont-size:"+f+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+g+";\n}\n]]>\n</style>\n";let C=0,M=r;var R=x.split("\n"),z=_.split("\n");0<x.length&&(C+=(m+l)*R.length),0<_.length&&(C+=(n+l)*z.length);let P=Z-(C+=10)-s,Y=N-M;0<w.length&&(P=P-e-l),0<p.length&&(M=M+e+l,Y=Y-e-l);var G=aSE(null,"g",{"pointer-events":"visible"});G.onclick=e=>lC(e,f,j,v,0),G.ondblclick=e=>lC(e,f,j,v,y);let te=0,F=0;if(0<V.length&&0<y&&0<a.length){let e="";switch(B){case"northeast":yLegend=C+2*j,te=4*j,e="white";break;case"northeastoutside":yLegend=C,e="none";break;default:throw new Error("LegendLocation not supported")}var O=P-te,I=(D.appendChild(G),aSE(D,"defs")),X=(aSE(I,"line",{id:"ll_"+v,x1:0,y1:0,x2:h,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),aSE(G,"svg",{id:"svg_leg_"+v})),le=y;let a=V;V.length>y&&(a=V.slice(0,le));I=(F=le*(f+j)+j)>O?O:F,O=(aSE(null,X,{x:"100%",height:I}),aSR(X,0,0,0,"100%",e,"black"));aSE(null,O,{id:"rect_leg_"+v});for(let l=0;l<le;++l){var ae=l%t.length,ne=(yOffset=l*(f+j)+j,new aSE(X,"g",{id:"lgi_"+v+"_"+l})),ae=(aSE(ne,"use",{id:"lli_"+v+"_"+l,x:i,y:yOffset+f/2,href:"#ll_"+v,stroke:t[ae]}),aSE(ne,"text",{id:"lti_"+v+"_"+l,class:"cll",x:i+h+i,y:yOffset+f/2}));let e="";l<a.length&&(e=a[l]),ae.append(document.createTextNode(e))}var H=(H=G.getBBox().width+2*i)>k?k:H;sAt(O,"width","100%"),sAt(X,"width",H);let l=0;switch(B){case"northeast":l=-H-2*i-r,Y-=r;break;case"northeastoutside":l=-H-i,Y-=H+2*i;break;default:throw new Error("LegendLocation not supported")}aSE(null,X,{x:D.width.baseVal.value+l,y:yLegend,viewBox:"0 0 "+H+" "+I})}else Y-=r;const q=[M,C,Y,P];let ie=[N-q[2],Z-q[3]];var se=aSE(D,"svg",{id:"svg_top_"+v,x:q[0],overflow:"visible",width:q[2]});let J=0;if(0<x.length)for(let e=0;e<R.length;++e)J=J+m+l,aST(se,R[e],"50%",J,m);if(0<_.length)for(let e=0;e<z.length;++e)J=J+n+l,aST(se,z[e],"50%",J,n);O=-Z+q[1]+q[3],B=aSE(D,"g",{transform:"translate("+q[0]+" "+O+")"}),I=aSE(B,"svg",{id:"svg_bottom_"+v,overflow:"visible",y:"100%",width:q[2]}),0<w.length&&aST(I,w,"50%",3*e,e),N=aSE(D,"svg",{id:"svg_left_"+v,y:q[1],overflow:"visible",height:q[3]}),0<p.length&&aSE(N,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":e,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:q[0]-4*e-l}).append(document.createTextNode(p)),x=sLi(a,E),_=sLi(u,S);let K=[x[0],_[0],x[1]-x[0],_[1]-_[0]];aSE(D,"svg",{id:"svg_bg_"+v,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:q[2],height:q[3],x:q[0],y:q[1]});var Q=aSE(D,"svg",{id:"svg_draw_"+v,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:q[2],height:q[3],x:q[0],y:q[1]});let U=[!1,!1];L.length<1?(U[0]="log"==$,U[1]="log"==ee):(U[0]=L[0],U[1]=L[1]);var Z=cTi(K[2],o[0],T[0]),O=cTi(K[3],o[1],T[1]),W=(E.length<1&&4<=K[2]/Z&&(K[0]=b(x[0]/Z)*Z,K[2]=d(x[1]/Z)*Z-K[0]),S.length<1&&4<=K[3]/O&&(K[1]=b(_[0]/O)*O,K[3]=d(_[1]/O)*O-K[1]),cGr(v,q,K,A,U,T),u.length/y),oe=a.length==u.length;if(!oe&&W!=a.length)throw new Error("Dimension must agree");var re=aSE(Q,"g",{id:"gp_"+v});for(let l=0;l<y;++l){var ge=l%t.length,ce=aSE(re,"polyline",{class:"l",id:"pl_"+v+"_"+l,stroke:t[ge]});for(let e=0;e<W;++e){var he,ve=oe?a[l*W+e]:a[e],de=u[l*W+e];isFinite(ve)&&isFinite(de)&&((he=Q.createSVGPoint()).x=100*(ve-K[0])/K[2],he.y=100-100*(de-K[1])/K[3],ce.points.appendItem(he))}}B=aSR(Q,0,0,"100%","100%","none","black");aSE(null,B,{id:"plr_"+v,"pointer-events":"visible"}),D.appendChild(G),B.onclick=e=>pC(e,v,K,q,A,U,T),D.oncontextmenu=e=>{e.preventDefault()},Q.onmousedown=e=>pM(e,v),Q.ondblclick=()=>sAL(v,K,K,q,A,U,T),D.onmousedown=e=>{e.preventDefault()},D.onmouseup=()=>pZ(v,K,A,U,T),0<V.length&&(G.onwheel=e=>sL(e,v,F)),new ResizeObserver(()=>rS(v,ie[0],ie[1],F,te)).observe(D)}}
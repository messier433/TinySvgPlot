{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=Array.isArray,f=1/0,g=document,h=2,i=1,j=12,k=10,l="Lucida Sans Typewriter",m=30,n=4,o=4,p=400,q=4,r=24,s=12,t=[10,10],u=[10,10],v=8,w=v/2,x=[1,2,5,10],y=4*j,z=2*j,A=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],B="http://www.w3.org/2000/svg";function plotSvg(_,V,N,S,{color:he="",title:ge="",subtitle:E="",xlabel:T="",ylabel:M="",xlim:C=[],ylim:L=[],style:ue="-",marker:O="",legend:fe=[],xScale:de="lin",yScale:ve="lin",grid:ye=!0,gridMinor:Y=[],xtick:me=[],ytick:xe=[],legendLocation:R="northeastoutside",linTip:pe=!0}={}){let D=[!1,!1];"log"==de&&(V=V.map(c),1<C.length&&(C=C.map(c),isNaN(C[0])||isNaN(C[1])?C=[]:(C[0]=C[0]==-f?0:C[0],C[1]=C[1]==-f?0:C[1])),0<me.length&&(me=me.map(c)),D[0]=!0),"log"==ve&&(N=N.map(c),1<L.length&&(L=L.map(c),isNaN(L[0])||isNaN(L[1])?L=[]:(L[0]=L[0]==-f?0:L[0],L[1]=L[1]==-f?0:L[1])),0<xe.length&&(xe=xe.map(c)),D[1]=!0);var U=le(_);const we=g.createElement("div"),X=(oe(U,we),ne(we,"style","width:100%;height:100%;min-width:"+p+"px;min-height:200px;overflow:none"),oe(we,"svg",{id:"s_"+_,width:"100%",height:"100%"}));U=re(X);X.innerHTML+="<style>\n<![CDATA[\ntext.cll {\nfont-size:"+k+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+l+";\n}\n.b:hover polyline{\nopacity:0.5;\n}\n]]>\n</style>\n";let F=0,be=y;var ke=ge.split("\n"),_e=E.split("\n");0<ge.length&&(F+=(r+q)*ke.length),0<E.length&&(F+=(s+q)*_e.length),F=F<19?25:F+6;let Be=U[3]-F-z,H=U[2]-be;0<T.length&&(Be=Be-j-q),0<M.length&&(be=be+j+2*q,H=H-j-2*q);var I=oe(null,"g",{"pointer-events":"visible"});I.onclick=e=>et(e,0),I.ondblclick=e=>et(e,S);let Ve=0,G=0,Ae="none",K=null,Ne=null,Se=null;if(0<fe.length&&0<S&&0<V.length){let e=F;"northeast"==R&&(e=F+2*o,Ve=4*o,Ae="white");var P=Be-Ve,Ee=(K=oe(I,"svg",{id:"sl_"+_}),Se=oe(K,"defs"),oe(X,I),S);let l=fe;fe.length>S&&(l=fe.slice(0,Ee));P=(G=Ee*(k+o)+o)>P?P:G;oe(null,K,{x:"100%",height:P}),oe(null,Ne=ce(K,0,0,0,"100%",Ae,"black"),{id:"rect_leg_"+_});for(let t=0;t<Ee;++t){var Te=t*(k+o)+o,ze=new oe(K,"g",{id:"lgi_"+_+"_"+t}),Me=oe(ze,"text",{id:"lti_"+_+"_"+t,class:"cll",x:n+m+n,y:Te+k/2}),Te=Te+k/2;gt(ze,n+","+Te+" "+(n+m/2)+","+Te+" "+(n+m)+","+Te);let e="";t<l.length&&(e=l[t]),Me.append(g.createTextNode(e))}var W=(W=I.getBBox().width+2*n)>p?p:W;ne(Ne,"width","100%"),ne(K,"width",W);let t=-W-n;H-=W+2*n,"northeast"==R&&(t-=n+y,H-=y-W-2*n),oe(null,K,{x:U[2]+t,y:e,viewBox:"0 0 "+W+" "+P})}else H-=y;R=[be,F,H,Be];let Ce=[U[2]-R[2],U[3]-R[3]];const Le=oe(X,"svg",{id:"st_"+_,x:R[0],overflow:"visible",width:R[2]});let Z=0;if(0<ge.length)for(let e=0;e<ke.length;++e)Z=Z+r+q,se(Le,ke[e],"50%",Z,r);if(0<E.length)for(let e=0;e<_e.length;++e)Z=Z+s+q,se(Le,_e[e],"50%",Z,s);W=-U[3]+R[1]+R[3],P=oe(X,"g");ie(P,[R[0],W]);const Oe=oe(P,"svg",{id:"s_btm_"+_,overflow:"visible",y:"100%",width:R[2]}),Ye=(0<T.length&&se(Oe,T,"50%",3*j,j),oe(X,"svg",{id:"sy_"+_,width:R[0],y:R[1],overflow:"visible",height:R[3]}));0<M.length&&(oe(null,E=se(Ye,M,R[0]-j,"50%",j),{"writing-mode":"vertical-rl","transform-origin":"center"}),ie(E,null,[-1,-1]));U=Qe(V,C),W=Qe(N,L);let J=[U[0],W[0],U[1]-U[0],W[1]-W[0]];const Re=oe(X,"svg",{id:"s_bg_"+_,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:R[2],height:R[3],x:R[0],y:R[1]}),Q=oe(X,"svg",{id:"sd_"+_,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:R[2],height:R[3],x:R[0],y:R[1]});Q.style.cursor="crosshair";let $=[0,0];Y.length<1?($[0]="log"==de,$[1]="log"==ve):1<Y.length?($[0]=Y[0],$[1]=Y[1]):($[0]=Y,$[1]=Y);P=it(J[2],t[0],D[0]),T=it(J[3],t[1],D[1]),M=[0==me.length,0==xe.length];const De=[(D[0]||$[0])&&M[0],(D[1]||$[1])&&M[1]],Ue=($=[$[0]&&M[0],$[1]&&M[1]],C.length<1&&4<=J[2]/P&&(J[0]=b(U[0]/P)*P,J[2]=d(U[1]/P)*P-J[0]),L.length<1&&4<=J[3]/T&&(J[1]=b(W[0]/T)*T,J[3]=d(W[1]/T)*T-J[1]),rt(J),oe(Q,"defs"));""!=O&&(te("o",[oe(null,"circle",{r:"5"})],1),te("+",[ae(null,0,-5,0,5,"","",""),ae(null,-5,0,5,0,"","","")]),te("*",[ae(null,0,-5,0,5,"","",""),ae(null,-5,0,5,0,"","",""),ae(null,-3.5,-3.5,3.5,3.5,"","",""),ae(null,-3.5,3.5,3.5,-3.5,"","","")]),te(".",[oe(null,"circle",{r:"1.5","stroke-width":3})]),te("x",[ae(null,-3.5,-3.5,3.5,3.5,"","",""),ae(null,-3.5,3.5,3.5,-3.5,"","","")]),te("_",[ae(null,-5,0,5,0,"","","")]),te("|",[ae(null,0,-5,0,5,"","","")]),te("sq",[ce(null,-5,-5,10,10,"","","")],1),te("^",[oe(null,"polygon",{points:"-5 3, 0 -5, 5 3"})],1),te("v",[oe(null,"polygon",{points:"-5 -3, 0 5, 5 -3"})],1),te("tr",[oe(null,"polygon",{points:"-3 -5, 5 0, -3 5"})],1),te("tl",[oe(null,"polygon",{points:"-5 0, 3 5, 3 -5"})],1));var Xe=N.length/S,Fe=V.length==N.length;if(!Fe&&Xe!=V.length)throw new Error("Dimension must agree");var He=oe(Q,"g",{id:"gp_"+_});for(let n=0;n<S;++n){var Ie=n%A.length,je=e(ue)?ue[n]:ue,Ge="url(#m"+(Array.isArray(O)?O[n]:O)+"_"+_+")",Ke=e(he)?n<he.length?he[n]:"":he,Ie=""==Ke?A[Ie]:Ke;let t="",l=2;switch(je){case":":t="2 3";break;case"--":t="12 6";break;case"-.":t="0 1.5 9 3 3 2.5";break;case"*":l=0}var Pe=gt(He,"",Ie,t,l);oe(null,Pe,{id:"pl_"+_+"_"+n,"marker-start":Ge,"marker-mid":Ge,"marker-end":Ge,"stroke-width":l}),null!=K&&(Ke="url(#ml"+(e(O)?O[n]:O)+"_"+_+")",oe(null,K.childNodes[n+2].childNodes[1],{"stroke-dasharray":t,"marker-mid":Ke,"stroke-width":l,stroke:Ie}));for(let e=0;e<Xe;++e){var qe,We=Fe?V[n*Xe+e]:V[e],Ze=N[n*Xe+e];isFinite(We)&&isFinite(Ze)&&((qe=Q.createSVGPoint()).x=100*(We-J[0])/J[2],qe.y=100-100*(Ze-J[1])/J[3],Pe.points.appendItem(qe))}}E=ce(Q,0,0,"100%","100%","none","black");const Je=oe(null,E,{id:"plr_"+_,"pointer-events":"visible"}),ee=("white"==Ae&&oe(X,I),oe(Le,"g",{id:"bd_"+_,"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round",class:"b","pointer-events":"visible"}));function Qe(n,r){if(r.length<2){let e=n.length,t=-f,l=f;for(;e--;)isFinite(n[e])&&(l=n[e]<l?n[e]:l,t=n[e]>t?n[e]:t);r=[l,t]}return r[0]==r[1]&&(r[0]=r[0]-.5,r[1]=r[1]+.5),r}function te(e,t,l=0){var n=oe(Ue,"marker",{id:"m"+e+"_"+_,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"userSpaceOnUse",fill:"none",stroke:"context-stroke"}),r=oe(n,"g",{"stroke-width":1.5,"vector-effect":"non-scaling-stroke",class:"marker_"+_});ie(r,[5,5],[1,1]);for(let e=0;e<t.length;++e)oe(r,t[e]);ne(oe(Se,n.cloneNode(!0),{id:"ml"+e+"_"+_}).childNodes[0],"class",""),l&&oe(Ue,n.cloneNode(!0),{id:"mf"+e+"_"+_,fill:"context-stroke"})}function $e(e,t,l=0){var n=le("gpl_"+e+"_"+t),r=l?"block":"none";le("pl_"+e+"_"+t).style.display=r,le("lgi_"+e+"_"+t).style.opacity=.3+.7*l,null!=n&&(n.style.display=r)}function et(e,t){var e=e.offsetY-ct(K,"y")+ht(K)[1],l=b((e-o/2)/(k+o)),e=le("pl_"+_+"_"+l);if(null!=e){var n="none"!=e.style.display,r=0==t?l+1:t;for(let e=0==t?l:0;e<r;++e)n?e==l&&0!=t||$e(_,e):$e(_,e,1)}}function tt(){var e=re(X),t=re(Q),l=e[2]-Ce[0],e=e[3]-Ce[1];t[2]!=l&&(ne(Q,"width",l),ne(Re,"width",l),ne(Le,"width",l),ne(Oe,"width",l),null!=K&&(K.x.baseVal.value+=l-t[2]),ee.transform.baseVal[0].matrix.e+=l-t[2]),t[3]!=e&&(ne(Q,"height",e),ne(Re,"height",e),ne(Ye,"height",e),null!=K)&&(l=(l=e-Ve)>G?G:l,ne(K,"height",l),K.viewBox.baseVal.height=l),lt()}function lt(){var t=g.getElementsByClassName("marker_"+_);for(let e=0;e<t.length;++e){var l=re(Q),n=ht(Q),r=n[2]/l[2],n=n[3]/l[3];t[e].transform.baseVal[1].matrix.a=r,t[e].transform.baseVal[1].matrix.d=n}}function nt(e){for(var t=100*(e[0]-J[0])/J[2],l=100*(J[1]+J[3]-e[1]-e[3])/J[3],n=(Q.viewBox.baseVal.width=100*e[2]/J[2],Q.viewBox.baseVal.height=100*e[3]/J[3],Q.viewBox.baseVal.x=t,Q.viewBox.baseVal.y=l,oe(null,Je,{x:t,y:l}),g.getElementsByClassName("cg_"+_));0<n.length;)n[0].remove();rt(e),lt()}function rt(e){tickOvr=[me,xe];for(let l=0;l<2;++l){var n=l?Ye:Oe,r=it(e[2+l],t[l],D[l]),i=e[l]+e[2+l],o=(d(e[l]/r)-1)*r,i=b(i/r)*r,s=0<tickOvr[l].length?tickOvr[l]:st(o,r,i),a=D[l]?at(s.map(e=>10**e)):at(s),h=100*r/e[2+l],o=oe(Re,"defs",{class:"cg_"+_}),g=oe(o,"g",{id:"mg"+l+"_"+_}),i=D[l]&&1==r,o=De[l]?u[l]/(2-i):1;const x=st(10/o,10/o,10);if(1<o){D[l]&&1==r&&x.forEach((e,t)=>{x[t]=10*c(x[t])});for(let e=0;e<x.length-1;++e)ot(g,x[e]/10*h*(1-2*l),l,w,"2 4",$[l])}ot(g,0,l,v,"",ye);var f=function(t,l,n){var r=Array(t.length);for(let e=0;e<t.length;++e)r[e]=100*(t[e]-l)/n;return r}(s,e[l],e[2+l]);for(let e=0;e<s.length;++e){var y=0<l?100-f[e]:f[e],m=l?[0,y]:[y,0],y=l?[re(n)[2]-.5*j,y+"%"]:[y+"%",.9*j];0<=f[e]&&(0<e||tickOvr)&&oe(null,se(n,a[e],y[0],y[1],j,l?"end":"middle"),{"dominant-baseline":"central",class:"cg_"+_}),oe(Re,"use",{href:"#mg"+l+"_"+_,x:m[0],y:m[1],class:"cg_"+_})}}}function it(e,t,l){var t=e/t,n=b(c(t));const r=d(t/10**n);var i=x.findIndex(function(e){return e>=r}),t=x[i]*10**n;return l&&1<=e&&t<1?1:t}function ot(e,t,l,n,r,i){let o=[t,0,0,n,t,100];0<l&&(o=[o[1],o[0],o[3],o[2],o[5],o[4]]),i&&ae(e,o[0],o[1],o[4],o[5],"rgb(223,223,223)",r);n=ae(e,0,0,o[2],o[3]),t=ae(e,-o[2],-o[3],0,0);ie(n,[o[0],o[1]],[1,1]),ie(t,[o[4],o[5]],[1,1]),oe(null,n,{class:"marker_"+_}),oe(null,t,{class:"marker_"+_})}function st(t,l,e){var n=b((e-t)/l*(1+1e-12))+1;out=Array(n);for(let e=0;e<n;++e)out[e]=t+l*e;return out}function at(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],r=Array(l.length);for(let t=0;t<l.length;++t){var i=l[t].toExponential(5).split(/e/);let e=b(+i[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),r[t]=a(i[0]*10**(+i[1]-3*(e-8))*1e3)/1e3+n[e]}return r}function le(e){return g.getElementById(e)}function ne(e,t,l){e.setAttribute(t,l)}function ct(e,t){return e.getAttribute(t)}function re(e){return[e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value]}function ht(e){return[e.viewBox.baseVal.x,e.viewBox.baseVal.y,e.viewBox.baseVal.width,e.viewBox.baseVal.height]}function ie(e,t,l){t=null!=t?"translate("+t[0]+" "+t[1]+")":"";t+=null!=l?"scale("+l[0]+" "+l[1]+")":"",e.setAttribute("transform",t)}function oe(e,t,l){var n,r="string"==typeof t?g.createElementNS(B,t):t;for(n in l)ne(r,n,l[n]);return null!=e&&e.appendChild(r),r}function se(e,t,l,n,r,i="middle",o="Sans,Arial",s="black"){e=oe(e,"text",{x:l,y:n,fill:s,"font-size":r,"text-anchor":i,"font-family":o,"stroke-width":1});return e.append(g.createTextNode(t)),e}function ae(e,t,l,n,r,i="black",o="",s=1){return oe(e,"line",{x1:t,y1:l,x2:n,y2:r,stroke:i,"stroke-width":s,"stroke-dasharray":o,"vector-effect":"non-scaling-stroke"})}function gt(e,t="",l="black",n="",r=2){return oe(e,"polyline",{points:t,fill:"none",stroke:l,"stroke-width":r,"stroke-dasharray":n,"vector-effect":"non-scaling-stroke"})}function ce(e,t,l,n,r,i="none",o="none",s=2,a=0){return oe(e,"rect",{x:t,y:l,width:n,height:r,rx:a,stroke:o,"stroke-width":s,fill:i,"vector-effect":"non-scaling-stroke"})}ie(ee,[R[2]-18,R[1]-24]),gt(ee,"8,0 8,16 2,9 8,16 14,9"),gt(ee,"0,17 0,20 16,20 16,17"),ce(ee,0,0,21,21),ee.onclick=()=>{var e,t;ee.style.display="none",Q.style.cursor="auto",e='<svg width="'+(e=re(X))[2]+'" height="'+e[3]+'" xmlns="'+B+'">',e=new Blob([e,X.innerHTML,"</svg>"],{type:"image/svg+xml;charset=utf-8"}),e=URL.createObjectURL(e),(t=g.createElement("a")).href=e,t.download="snapshot_"+ge+".svg",oe(g.body,t),t.click(),g.body.removeChild(t),ee.style.display="block",Q.style.cursor="crosshair"},E.onclick=t=>{var l=re(Q),n=(a=ht(Q))[2]/l[2],r=a[3]/l[3],s=(t.offsetX-l[0])*n+a[0],s=(result=function(e,t,l,n,r,i){let o=null,s=f,a=0,c=0;var h=le("gp_"+e),g=h.children.length;for(let e=0;e<g;++e){var u=h.children[e],d=u.points;if("none"!=u.style.display)for(let e=1;e<d.length;++e){var v,y,m,x,p,w,b=d[e-1],k=d[e];t<b.x-n&&t<k.x-n||t>b.x+n&&t>k.x+n||l<b.y-r&&l<k.y-r||l>b.y+r&&l>k.y+r||(v=k.x-b.x,m=(v*(t-b.x)+(y=k.y-b.y)*(l-b.y))/(v*v+y*y),1<=(m=((v=b.x+v*m)-t)*(v-t)/n/n+((y=b.y+y*m)-l)*(y-l)/r/r))||m>s||(s=m,o=u,m=b.x<t?t-b.x:b.x-t,x=b.y<l?l-b.y:b.y-l,p=k.x<t?t-k.x:k.x-t,w=k.y<l?l-k.y:k.y-l,m<p&&m<n&&x<r?(a=b.x,c=b.y):p<n&&w<r?(a=k.x,c=k.y):i&&0!=ct(u,"stroke-width")?(a=v,c=y):o=null)}}return{ele:o,x:a,y:c}}(_,s,t=(t.offsetY-l[1])*r+a[1],a=6*n,c=6*r,pe)).ele;if(null!=s){var t=result.x,a=result.y,c="pl_"+_,s=s.id,c=s.slice(c.length,s.length),s=le("lti_"+_+c),h=ct(le("pl_"+_+c),"stroke"),g=function(e,t,l){return V=e[0]/100*t[2]+t[0],N=(1-e[1]/100)*t[3]+t[1],[V=l[0]?10**V:V,N=l[1]?10**N:N]}([t,a],J,D);let e=le("gpl_"+_+c);null==e&&(e=oe(Q,"g",{id:"gpl_"+_+c}));const d=oe(e,"g",{class:"marker_"+_}),v=oe(d,"g");c=ce(v,0,-33,1,33,h,"rgb(223,223,223)",1,rx=4),h=(ie(d,[t,a],[n,r]),d.onclick=e=>{e.ctrlKey?u(1):(d.remove(),1<e.detail&&nt(J))},null!=s&&(oe(null,text=se(v,s.textContent,2,-35,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),oe(null,c,{y:-48,height:48})),se(v,"x: "+at([g[0]]),2,-19,12,"start","Sans,Arial","white"),se(v,"y: "+at([g[1]]),2,-5,12,"start","Sans,Arial","white"),d.getBBox());const y=[h.width+4,h.height],m=(oe(null,c,{width:y[0]}),null!=s&&ae(v,0,-31,y[0],-31,stroke="white"),ae(d,0,0,6,-6));t=v.getBoundingClientRect();let i=t.right+5+we.offsetLeft>l[0]+l[2],o=t.y-5-we.offsetTop<l[1];function u(e){let t=5,l=-5,n=1,r=1;e&&([i,o]=[!o,i]),i&&(t=-y[0]-5,n=-1),o&&(l=y[1]+5,r=-1),ie(v,[t,l]),ie(m,null,[n,r])}u(!1),ce(d,-2,-2,4,4,"black"),oe(d,"circle",{r:6,fill:"none","pointer-events":"visible"})}},X.oncontextmenu=e=>{e.preventDefault()},Q.onmousedown=t=>{{let e=0;if(t.button==i||t.button==h&&t.ctrlKey)e=1;else if(t.button!=h)return;Q.style.cursor=e?"move":"zoom-in";const o=t.offsetX,s=t.offsetY,l=ce(X,o,s,0,0,"black"),n=e?0:.3;oe(null,l,{id:"zoom_rect"+_,"fill-opacity":n}),X.onmousemove=e=>{var t=o,l=s,n=le("zoom_rect"+_),r=e.offsetX,t=r-t,l=(e=e.offsetY)-l,i=0==ct(n,"fill-opacity");i||0<=t?ne(n,"width",t):oe(null,n,{width:-t,x:r}),i||0<=l?ne(n,"height",l):oe(null,n,{height:-l,y:e})}}},Q.ondblclick=()=>nt(J),X.onmousedown=e=>{e.preventDefault()},X.onmouseup=()=>{var t=le("zoom_rect"+_);if(Q.style.cursor="crosshair",(X.onmousemove=null)!=t){var l=0==ct(t,"fill-opacity"),n=re(t);if(t.remove(),!~l||0!=n[2]&&0!=n[3]){var t=ht(Q),r=re(Q);let e=[];e=l?[-n[2]/r[2],n[3]/r[3],1,1]:[(n[0]-r[0])/r[2],1-(n[1]+n[3]-r[1])/r[3],n[2]/r[2],n[3]/r[3]];l=[J[0]+J[2]*t[0]/100,J[1]+J[3]*(100-t[3]-t[1])/100,J[2]*t[2]/100,J[3]*t[3]/100];nt([l[0]+e[0]*l[2],l[1]+e[1]*l[3],e[2]*l[2],e[3]*l[3]])}}},0<fe.length&&(I.onwheel=e=>{G;var t=re(K),l=ht(K),t=G-t[3];return l[1]+=e.deltaY,l[1]<0&&(l[1]=0),t<l[1]&&(l[1]=t),K.viewBox.baseVal.y=l[1],Ne.y.baseVal.value=l[1],!1}),new ResizeObserver(()=>tt()).observe(X),tt()}}
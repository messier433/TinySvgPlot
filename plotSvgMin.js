{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=22,f=1,g=12,h=10,i="Lucida Sans Typewriter",j=20,k=4,l=4,m=400,n=4,o=24,p=12,q=[10,10],r=[10,10],s=[1,2,5,10],t=4*g,u=2*g,v=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"];function gE(e){return document.getElementById(e)}function sAt(e,t,l){e.setAttribute(t,l)}function gAt(e,t){return e.getAttribute(t)}function sz(e){return[e.x.baseVal.value,e.y.baseVal.value,e.width.baseVal.value,e.height.baseVal.value]}function sLi(n,a){if(a.length<2){let e=n.length,t=-1/0,l=1/0;for(;e--;)isFinite(n[e])&&(l=n[e]<l?n[e]:l,t=n[e]>t?n[e]:t);a=[l,t]}return a[0]==a[1]&&(a[0]=a[0]-.5,a[1]=a[1]+.5),a}function n2e(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(l.length);for(let t=0;t<l.length;++t){var o=l[t].toExponential(5).split(/e/);let e=b(+o[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),i[t]=a(o[0]*10**(+o[1]-3*(e-8))*1e3)/1e3+n[e]}return i}function lis(t,l,e){var n=b((e-t)/l*(1+1e-12))+1;out=Array(n);for(let e=0;e<n;++e)out[e]=t+l*e;return out}function los(e,t,l){return lis(e,t,l).map(c)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var n,a="string"==typeof t?document.createElementNS("http://www.w3.org/2000/svg",t):t;for(n in l)sAt(a,n,l[n]);return null!=e&&e.appendChild(a),a}function aST(e,t,l,n,a,i="middle",o="Sans,Arial",s="black"){e=aSE(e,"text",{x:l,y:n,fill:s,"font-size":a,"text-anchor":i,"font-family":o,"stroke-width":1});return e.append(document.createTextNode(t)),e}function aSL(e,t,l,n,a,i="black",o=""){return aSE(e,"line",{x1:t,y1:l,x2:n,y2:a,stroke:i,"stroke-width":1,"stroke-dasharray":o,"vector-effect":"non-scaling-stroke"})}function aSR(e,t,l,n,a,i="none",o="none",s=2,r=0){return aSE(e,"rect",{x:t,y:l,width:n,height:a,rx:r,stroke:o,"stroke-width":s,fill:i,"vector-effect":"non-scaling-stroke"})}function lC(e,t,l,n,a){var i=gE("svg_leg_"+n),e=e.offsetY-gAt(i,"y")+i.viewBox.baseVal.y,o=b((e-l/2)/(t+l)),i=gE("pl_"+n+"_"+o);if(null!=i){var s=i.style.display;if(0==a){e=gE("gpl_"+n+"_"+o);"none"===s?(gE("pl_"+n+"_"+o).style.display="block",gE("lgi_"+n+"_"+o).style.opacity=1,null!=e&&(e.style.display="block")):(gE("pl_"+n+"_"+o).style.display="none",gE("lgi_"+n+"_"+o).style.opacity=.3,null!=e&&(e.style.display="none"))}else for(let e=0;e<a;++e){var r=gE("gpl_"+n+"_"+e);"none"===s?(gE("pl_"+n+"_"+e).style.display="block",gE("lgi_"+n+"_"+e).style.opacity=1,null!=r&&(r.style.display="block")):e!=o&&(gE("pl_"+n+"_"+e).style.display="none",gE("lgi_"+n+"_"+e).style.opacity=.3,null!=r)&&(r.style.display="none")}}}function iMP(e){var t=gE("svg_draw_"+e),l=document.getElementsByClassName("tooltip_"+e);for(let e=0;e<l.length;++e){var n=sz(t),a=t.viewBox.baseVal.width/n[2],n=t.viewBox.baseVal.height/n[3];l[e].transform.baseVal[1].matrix.a=a,l[e].transform.baseVal[1].matrix.d=n}}function rS(e,t,l,n,a){var i=gE("svg_leg_"+e),o=gE("svg_draw_"+e),s=gE("svg_bg_"+e),r=gE("svg_top_"+e),g=gE("svg_bottom_"+e),h=gE("svg_left_"+e),c=sz(gE("svg_"+e)),d=sz(o),t=c[2]-t,c=c[3]-l;d[2]!=t&&(sAt(o,"width",t),sAt(s,"width",t),sAt(r,"width",t),sAt(g,"width",t),null!=i)&&(i.x.baseVal.value+=t-d[2]),d[3]!=c&&(sAt(o,"height",c),sAt(s,"height",c),sAt(h,"height",c),null!=i)&&(sAt(i,"height",l=n<(l=c-a)?n:l),i.viewBox.baseVal.height=l),iMP(e)}function sL(e,t,l){var n=gE("svg_leg_"+t),t=gE("rect_leg_"+t),a=sz(n),e=(n.viewBox.baseVal.y+=e.deltaY,l-a[3]);return n.viewBox.baseVal.y<0&&(n.viewBox.baseVal.y=0),n.viewBox.baseVal.y>e&&(n.viewBox.baseVal.y=e),t.y.baseVal.value=n.viewBox.baseVal.y,!1}function pC(l,n,a,i,o,s){var r=gE("svg_draw_"+n),g=sz(r),h=r.viewBox.baseVal.width/g[2],c=r.viewBox.baseVal.height/g[3],d=r.viewBox.baseVal.x,v=r.viewBox.baseVal.y,d=(l.offsetX-g[0])*h+d,d=(result=gNL(n,d,(l.offsetY-g[1])*c+v,6*h,6*c)).ele;if(null!=d){var l=result.x,g=result.y,v=d.id,d=v.slice(("pl_"+n).length,v.length),v=gE("lti_"+n+d),f=gAt(gE("pl_"+n+d),"stroke"),u=cC([l,g],a,s);let e=gE("gpl_"+n+d);null==e&&(e=aSE(r,"g",{id:"gpl_"+n+d}));r=aSE(e,"g",{class:"tooltip_"+n,transform:"translate("+l+" "+g+") scale("+h+" "+c+")"}),d=aSR(r,5,-9,0,32,f,"rgb(223,223,223)",1,rx=4);r.onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove(),1<e.detail&&sAL(n,a,a,i,o,s)};let t=null;null!=v&&(aSE(null,text=aST(r,v.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),t=aSL(r,5,-8,5,-8,stroke="white"),aSE(null,d,{y:-23,height:46})),aST(r,"x: "+n2e([u[0]]),7,4,12,"start","Sans,Arial","white"),aST(r,"y: "+n2e([u[1]]),7,18,12,"start","Sans,Arial","white");l=r.getBBox();aSE(null,d,{width:l.width+4}),null!=t&&sAt(t,"x2",l.width+4+5),aSR(r,-2,-2,4,4,"black"),aSE(r,"circle",{r:6,fill:"none","pointer-events":"visible"})}}function cC(e,t,l){return x=e[0]/100*t[2]+t[0],y=(1-e[1]/100)*t[3]+t[1],x=l[0]?10**x:x,y=l[1]?10**y:y,[x,y]}function gNL(e,l,n,a,i){let o=null,s=1/0,r=0,g=0;var h=gE("gp_"+e),c=h.children.length;for(let t=0;t<c;++t){var d=h.children[t].points;for(let e=1;e<d.length;++e){var v,f,u,y,_,x,p=d[e-1],w=d[e];l<p.x-a&&l<w.x-a||l>p.x+a&&l>w.x+a||n<p.y-i&&n<w.y-i||n>p.y+i&&n>w.y+i||(u=((v=w.x-p.x)*(l-p.x)+(f=w.y-p.y)*(n-p.y))/(v*v+f*f),1<=(u=((v=p.x+v*u)-l)*(v-l)/a/a+((f=p.y+f*u)-n)*(f-n)/i/i))||u>s||(s=u,o=h.children[t],u=p.x<l?l-p.x:p.x-l,y=p.y<n?n-p.y:p.y-n,_=w.x<l?l-w.x:w.x-l,x=w.y<n?n-w.y:w.y-n,g=u<_&&u<a&&y<i?(r=p.x,p.y):_<a&&x<i?(r=w.x,w.y):(r=v,f))}}return{ele:o,x:r,y:g}}function pM(t,l){if(t.button==e||t.button==f){var n=gE("svg_"+l);const i=t.offsetX,o=t.offsetY;var a=aSR(n,i,o,0,0,"black"),t=t.button!=e?0:.3;aSE(null,a,{id:"zoom_rect"+l,"fill-opacity":t}),n.onmousemove=e=>pDZ(e,l,i,o)}}function pDZ(e,t,l,n){var t=gE("zoom_rect"+t),a=e.offsetX,e=e.offsetY,l=a-l,n=e-n,i=0==gAt(t,"fill-opacity");i||0<=l?sAt(t,"width",l):aSE(null,t,{width:-l,x:a}),i||0<=n?sAt(t,"height",n):aSE(null,t,{height:-n,y:e})}function pZ(t,l,n,a,i){var o=gE("zoom_rect"+t),s=gE("svg_"+t);if((s.onmousemove=null)!=o){var s=0==gAt(o,"fill-opacity"),r=sz(o);if(o.remove(),!~s||0!=r[2]&&0!=r[3]){var o=gE("svg_draw_"+t),g=[o.viewBox.baseVal.x,o.viewBox.baseVal.y,o.viewBox.baseVal.width,o.viewBox.baseVal.height],o=sz(o);let e=[];e=s?[-r[2]/o[2],r[3]/o[3],1,1]:[(r[0]-o[0])/o[2],1-(r[1]+r[3]-o[1])/o[3],r[2]/o[2],r[3]/o[3]];s=[l[0]+l[2]*g[0]/100,l[1]+l[3]*(100-g[3]-g[1])/100,l[2]*g[2]/100,l[3]*g[3]/100];sAL(t,[s[0]+e[0]*s[2],s[1]+e[1]*s[3],e[2]*s[2],e[3]*s[3]],l,n,a,i)}}}function sAL(e,t,l,n,a,i){for(var o=gE("svg_draw_"+e),s=100*(t[0]-l[0])/l[2],r=100*(l[1]+l[3]-t[1]-t[3])/l[3],l=(o.viewBox.baseVal.width=100*t[2]/l[2],o.viewBox.baseVal.height=100*t[3]/l[3],o.viewBox.baseVal.x=s,o.viewBox.baseVal.y=r,gE("plr_"+e)),g=(aSE(null,l,{x:s,y:r}),document.getElementsByClassName("cg_"+e));0<g.length;)g[0].remove();cGr(e,t,n,a,i),iMP(e)}function cTi(e,t,l){var t=e/t,n=b(c(t));const a=d(t/10**n);var i=s.findIndex(function(e){return e>=a}),t=s[i]*10**n;return l&&1<=e&&t<1?1:t}function cGr(h,c,v,f,u){var y=gE("svg_bg_"+h),_=gE("svg_left_"+h),x=gE("svg_bottom_"+h),p=r;for(let r=0;r<2;++r){var w=0<r?_:x,E=cTi(c[2+r],q[r],u[r]),S=c[r]+c[2+r],m=d(c[r]/E)*E,S=b(S/E)*E,A=100*(0<r?c[r]+c[r+2]-S:m-c[r])/c[2+r],k=a((S-m)/E);let l=Array();l=u[r]?n2e(dec(m,E,S)):n2e(lis(m,E,S));const T=100*E/c[2+r];var m=aSE(y,"defs",{class:"cg_"+h}),B=aSE(m,"g",{id:"mg"+r+"_"+h});if(f[r]&&0<p[r]){let i=Array();u[r]&&1==E?(i=los(1,9/(p[r]-1),10)).forEach((e,t)=>{i[t]=i[t]*T}):i=lis(0,1/p[r]*T,T);for(let a=1;a<i.length-1;++a){let e=i[a],t=i[a],l=0,n=100;0<r&&([e,l,t,n]=[l,-e,n,-t]),aSL(B,e,l,t,n,"rgb(223,223,223)","2 4")}}let e="0%",t="99%",n="0%",i="100%",o="0%",s="1%";0<r&&([e,t,n,i,o,s]=[t,e,i,n,s,o]),v&&aSL(B,0,0,n,i,"rgb(223,223,223)"),aSL(B,e,t,n,i),aSL(B,0,0,o,s);for(let t=0;t<=k;++t){var V=A+T*t;let e=null;aSE(null,e=0<r?aST(w,l[k-t],sz(w)[2]-.5*g,V+"%",g,"end"):aST(w,l[t],V+"%",.9*g,g),{"dominant-baseline":"central",class:"cg_"+h});var L=0<r?0:V,V=0<r?V:0;aSE(y,"use",{href:"#mg"+r+"_"+h,x:L,y:V,class:"cg_"+h})}}}function plotSvg(s,a,r,f,{title:e="",subtitle:y="",xlabel:_="",ylabel:x="",xlim:w=[],ylim:E=[],legend:S=[],xScale:$="lin",yScale:ee="lin",grid:A=!0,gridMinor:B=[],legendLocation:V="northeastoutside"}={}){let L=[!1,!1];"log"==$&&(a=a.map(c),1<w.length&&(w=w.map(c),isNaN(w[0])||isNaN(w[1])?w=[]:(w[0]=w[0]==-1/0?0:w[0],w[1]=w[1]==-1/0?0:w[1])),L[0]=!0),"log"==ee&&(r=r.map(c),1<E.length&&(E=E.map(c),isNaN(E[0])||isNaN(E[1])?E=[]:(E[0]=E[0]==-1/0?0:E[0],E[1]=E[1]==-1/0?0:E[1])),L[1]=!0);var T=gE(s),N=document.createElement("div"),T=(T.appendChild(N),sAt(N,"style","width:100%;height:100%;min-width:"+m+"px;min-height:200px;overflow:none"),aSE(N,"svg",{id:"svg_"+s,width:"100%",height:"100%"})),N=sz(T);T.innerHTML+="<style>\n<![CDATA[\npolyline.l {\nstroke-width:2;\nvector-effect:non-scaling-stroke;\nfill:none;\n}\ntext.cll {\nfont-size:"+h+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+i+";\n}\n]]>\n</style>\n";let z=0,C=t;var M=e.split("\n"),R=y.split("\n");0<e.length&&(z+=(o+n)*M.length),0<y.length&&(z+=(p+n)*R.length),z+=10;let D=N[3]-z-u,Y=N[2]-C;0<_.length&&(D=D-g-n),0<x.length&&(C=C+g+n,Y=Y-g-n);var G=aSE(null,"g",{"pointer-events":"visible"});G.onclick=e=>lC(e,h,l,s,0),G.ondblclick=e=>lC(e,h,l,s,f);let P=0,Z=0;if(0<S.length&&0<f&&0<a.length){let e="";switch(V){case"northeast":yLegend=z+2*l,P=4*l,e="white";break;case"northeastoutside":yLegend=z,e="none";break;default:throw new Error("LegendLocation not supported")}var F=D-P,I=(T.appendChild(G),aSE(T,"defs")),X=(aSE(I,"line",{id:"ll_"+s,x1:0,y1:0,x2:j,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),aSE(G,"svg",{id:"svg_leg_"+s})),H=f;let n=S;S.length>f&&(n=S.slice(0,H));I=(Z=H*(h+l)+l)>F?F:Z,F=(aSE(null,X,{x:"100%",height:I}),aSR(X,0,0,0,"100%",e,"black"));aSE(null,F,{id:"rect_leg_"+s});for(let t=0;t<H;++t){var te=t%v.length,le=t*(h+l)+l,ne=new aSE(X,"g",{id:"lgi_"+s+"_"+t}),te=(aSE(ne,"use",{id:"lli_"+s+"_"+t,x:k,y:le+h/2,href:"#ll_"+s,stroke:v[te]}),aSE(ne,"text",{id:"lti_"+s+"_"+t,class:"cll",x:k+j+k,y:le+h/2}));let e="";t<n.length&&(e=n[t]),te.append(document.createTextNode(e))}var O=(O=G.getBBox().width+2*k)>m?m:O;sAt(F,"width","100%"),sAt(X,"width",O);let a=0;switch(V){case"northeast":a=-O-2*k-t,Y-=t;break;case"northeastoutside":a=-O-k,Y-=O+2*k;break;default:throw new Error("LegendLocation not supported")}aSE(null,X,{x:N[2]+a,y:yLegend,viewBox:"0 0 "+O+" "+I})}else Y-=t;F=[C,z,Y,D];let ae=[N[2]-F[2],N[3]-F[3]];var ie=aSE(T,"svg",{id:"svg_top_"+s,x:F[0],overflow:"visible",width:F[2]});let J=0;if(0<e.length)for(let e=0;e<M.length;++e)J=J+o+n,aST(ie,M[e],"50%",J,o);if(0<y.length)for(let e=0;e<R.length;++e)J=J+p+n,aST(ie,R[e],"50%",J,p);V=-N[3]+F[1]+F[3],I=aSE(T,"g",{transform:"translate("+F[0]+" "+V+")"}),e=aSE(I,"svg",{id:"svg_bottom_"+s,overflow:"visible",y:"100%",width:F[2]}),0<_.length&&aST(e,_,"50%",3*g,g),y=aSE(T,"svg",{id:"svg_left_"+s,width:F[0],y:F[1],overflow:"visible",height:F[3]}),0<x.length&&aSE(y,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":g,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:F[0]-4*g-n}).append(document.createTextNode(x)),N=sLi(a,w),V=sLi(r,E);let K=[N[0],V[0],N[1]-N[0],V[1]-V[0]];aSE(T,"svg",{id:"svg_bg_"+s,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:F[2],height:F[3],x:F[0],y:F[1]});var Q=aSE(T,"svg",{id:"svg_draw_"+s,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:F[2],height:F[3],x:F[0],y:F[1]});let U=[!1,!1];B.length<1?(U[0]="log"==$,U[1]="log"==ee):(U[0]=B[0],U[1]=B[1]);var I=cTi(K[2],q[0],L[0]),e=cTi(K[3],q[1],L[1]),W=(w.length<1&&4<=K[2]/I&&(K[0]=b(N[0]/I)*I,K[2]=d(N[1]/I)*I-K[0]),E.length<1&&4<=K[3]/e&&(K[1]=b(V[0]/e)*e,K[3]=d(V[1]/e)*e-K[1]),cGr(s,K,A,U,L),r.length/f),oe=a.length==r.length;if(!oe&&W!=a.length)throw new Error("Dimension must agree");var se=aSE(Q,"g",{id:"gp_"+s});for(let t=0;t<f;++t){var re=t%v.length,ge=aSE(se,"polyline",{class:"l",id:"pl_"+s+"_"+t,stroke:v[re]});for(let e=0;e<W;++e){var he,ce=oe?a[t*W+e]:a[e],de=r[t*W+e];isFinite(ce)&&isFinite(de)&&((he=Q.createSVGPoint()).x=100*(ce-K[0])/K[2],he.y=100-100*(de-K[1])/K[3],ge.points.appendItem(he))}}_=aSR(Q,0,0,"100%","100%","none","black");aSE(null,_,{id:"plr_"+s,"pointer-events":"visible"}),T.appendChild(G),_.onclick=e=>pC(e,s,K,A,U,L),T.oncontextmenu=e=>{e.preventDefault()},Q.onmousedown=e=>pM(e,s),Q.ondblclick=()=>sAL(s,K,K,A,U,L),T.onmousedown=e=>{e.preventDefault()},T.onmouseup=()=>pZ(s,K,A,U,L),0<S.length&&(G.onwheel=e=>sL(e,s,Z)),new ResizeObserver(()=>rS(s,ae[0],ae[1],Z,P)).observe(T)}}
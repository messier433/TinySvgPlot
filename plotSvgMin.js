{const a=Math.round,b=Math.floor,c=Math.log10,d=Math.ceil,e=2,f=1,g=12,h=10,i="Lucida Sans Typewriter",j=20,k=4,l=4,m=400,n=4,o=24,p=12,q=[10,10],r=[10,10],s=[1,2,5,10],t=4*g,u=2*g,v=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"];function gE(e){return document.getElementById(e)}function sAt(e,t,l){e.setAttribute(t,l)}function gAt(e,t){return e.getAttribute(t)}function sLi(a,n){if(n.length<2){let e=a.length,t=-1/0,l=1/0;for(;e--;)isFinite(a[e])&&(l=a[e]<l?a[e]:l,t=a[e]>t?a[e]:t);n=[l,t]}return n[0]==n[1]&&(n[0]=n[0]-.5,n[1]=n[1]+.5),n}function n2e(l){var n=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(l.length);for(let t=0;t<l.length;++t){var s=l[t].toExponential(5).split(/e/);let e=b(+s[1]/3)+8;e>n.length-1?e=n.length-1:e<0&&(e=0),i[t]=a(s[0]*10**(+s[1]-3*(e-8))*1e3)/1e3+n[e]}return i}function lis(t,l,e){var a=b((e-t)/l*(1+1e-12))+1;out=Array(a);for(let e=0;e<a;++e)out[e]=t+l*e;return out}function los(e,t,l){return lis(e,t,l).map(c)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var a,n="string"==typeof t?document.createElementNS("http://www.w3.org/2000/svg",t):t;for(a in l)sAt(n,a,l[a]);return null!=e&&e.appendChild(n),n}function aST(e,t,l,a,n,i="middle",s="Sans,Arial",o="black"){e=aSE(e,"text",{x:l,y:a,fill:o,"font-size":n,"text-anchor":i,"font-family":s,"stroke-width":1});return e.append(document.createTextNode(t)),e}function aSL(e,t,l,a,n,i="black",s=""){return aSE(e,"line",{x1:t,y1:l,x2:a,y2:n,stroke:i,"stroke-width":1,"stroke-dasharray":s,"vector-effect":"non-scaling-stroke"})}function aSR(e,t,l,a,n,i="none",s="none",o=2,r=0){return aSE(e,"rect",{x:t,y:l,width:a,height:n,rx:r,stroke:s,"stroke-width":o,fill:i,"vector-effect":"non-scaling-stroke"})}function lC(e,t,l,a,n){var i=gE("svg_leg_"+a),e=e.offsetY-gAt(i,"y"),s=b((e-l/2)/(t+l)),i=gE("pl_"+a+"_"+s);if(null!=i){var o=i.style.display;if(0==n){e=gE("gpl_"+a+"_"+s);"none"===o?(gE("pl_"+a+"_"+s).style.display="block",gE("lgi_"+a+"_"+s).style.opacity=1,null!=e&&(e.style.display="block")):(gE("pl_"+a+"_"+s).style.display="none",gE("lgi_"+a+"_"+s).style.opacity=.3,null!=e&&(e.style.display="none"))}else for(let e=0;e<n;++e){var r=gE("gpl_"+a+"_"+e);"none"===o?(gE("pl_"+a+"_"+e).style.display="block",gE("lgi_"+a+"_"+e).style.opacity=1,null!=r&&(r.style.display="block")):e!=s&&(gE("pl_"+a+"_"+e).style.display="none",gE("lgi_"+a+"_"+e).style.opacity=.3,null!=r)&&(r.style.display="none")}}}function iMP(e){var t=gE("svg_draw_"+e),l=document.getElementsByClassName("tooltip_"+e);for(let e=0;e<l.length;++e){var a=t.viewBox.baseVal.width/t.width.baseVal.value,n=t.viewBox.baseVal.height/t.height.baseVal.value;l[e].transform.baseVal[1].matrix.a=a,l[e].transform.baseVal[1].matrix.d=n}}function rS(e,t,l,a,n){var i=gE("svg_leg_"+e),s=gE("svg_draw_"+e),o=gE("svg_bg_"+e),r=gE("svg_top_"+e),g=gE("svg_bottom_"+e),h=gE("svg_left_"+e),v=gE("svg_"+e),t=v.width.baseVal.value-t,v=v.height.baseVal.value-l,l=s.width.baseVal.value,d=s.height.baseVal.value;l!=t&&(sAt(s,"width",t),sAt(o,"width",t),sAt(r,"width",t),sAt(g,"width",t),null!=i)&&(i.x.baseVal.value+=t-l),d!=v&&(sAt(s,"height",v),sAt(o,"height",v),sAt(h,"height",v),null!=i)&&(sAt(i,"height",r=a<(r=v-n)?a:r),i.viewBox.baseVal.height=r),iMP(e)}function sL(e,t,l){var a=gE("svg_leg_"+t),t=gE("rect_leg_"+t),e=(a.viewBox.baseVal.y+=e.deltaY,l-a.height.baseVal.value);return a.viewBox.baseVal.y<0&&(a.viewBox.baseVal.y=0),a.viewBox.baseVal.y>e&&(a.viewBox.baseVal.y=e),t.y.baseVal.value=a.viewBox.baseVal.y,!1}function pC(l,a,n,i,s,o){var r=gE("svg_draw_"+a),g=r.x.baseVal.value,h=r.y.baseVal.value,v=r.width.baseVal.value,d=r.height.baseVal.value,v=r.viewBox.baseVal.width/v,d=r.viewBox.baseVal.height/d,c=r.viewBox.baseVal.x,u=r.viewBox.baseVal.y,g=(l.offsetX-g)*v+c,c=(result=gNL(a,g,(l.offsetY-h)*d+u,6*v,6*d)).ele;if(null!=c){var g=result.x,l=result.y,h=c.id,u=h.slice(("pl_"+a).length,h.length),c=gE("lti_"+a+u),h=gAt(gE("pl_"+a+u),"stroke"),f=cC([g,l],n,o);let e=gE("gpl_"+a+u);null==e&&(e=aSE(r,"g",{id:"gpl_"+a+u}));r=aSE(e,"g",{class:"tooltip_"+a,transform:"translate("+g+" "+l+") scale("+v+" "+d+")"}),u=aSR(r,5,-9,0,32,h,"rgb(223,223,223)",1,rx=4);r.onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove(),1<e.detail&&sAL(a,n,n,i,s,o)};let t=null;null!=c&&(aSE(null,text=aST(r,c.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),t=aSL(r,5,-8,5,-8,stroke="white"),aSE(null,u,{y:-23,height:46})),aST(r,"x: "+n2e([f[0]]),7,4,12,"start","Sans,Arial","white"),aST(r,"y: "+n2e([f[1]]),7,18,12,"start","Sans,Arial","white");g=r.getBBox();aSE(null,u,{width:g.width+4}),null!=t&&sAt(t,"x2",g.width+4+5),aSR(r,-2,-2,4,4,"black"),aSE(r,"circle",{r:6,fill:"none","pointer-events":"visible"})}}function cC(e,t,l){return x=e[0]/100*t[2]+t[0],y=(1-e[1]/100)*t[3]+t[1],x=l[0]?10**x:x,y=l[1]?10**y:y,[x,y]}function gNL(e,l,a,n,i){let s=null,o=1/0,r=0,g=0;var h=gE("gp_"+e),v=h.children.length;for(let t=0;t<v;++t){var d=h.children[t].points;for(let e=1;e<d.length;++e){var c,u,f,y,x,_,b=d[e-1],w=d[e];l<b.x-n&&l<w.x-n||l>b.x+n&&l>w.x+n||a<b.y-i&&a<w.y-i||a>b.y+i&&a>w.y+i||(f=((c=w.x-b.x)*(l-b.x)+(u=w.y-b.y)*(a-b.y))/(c*c+u*u),1<=(f=((c=b.x+c*f)-l)*(c-l)/n/n+((u=b.y+u*f)-a)*(u-a)/i/i))||f>o||(o=f,s=h.children[t],f=b.x<l?l-b.x:b.x-l,y=b.y<a?a-b.y:b.y-a,x=w.x<l?l-w.x:w.x-l,_=w.y<a?a-w.y:w.y-a,g=f<x&&f<n&&y<i?(r=b.x,b.y):x<n&&_<i?(r=w.x,w.y):(r=c,u))}}return{ele:s,x:r,y:g}}function pM(t,l){if(t.button==e||t.button==f){var a=gE("svg_"+l);const i=t.offsetX,s=t.offsetY;var n=aSR(a,i,s,0,0,"black"),t=t.button!=e?0:.3;aSE(null,n,{id:"zoom_rect"+l,"fill-opacity":t}),a.onmousemove=e=>pDZ(e,l,i,s)}}function pDZ(e,t,l,a){var t=gE("zoom_rect"+t),n=e.offsetX,e=e.offsetY,l=n-l,a=e-a,i=0==gAt(t,"fill-opacity");i||0<=l?sAt(t,"width",l):aSE(null,t,{width:-l,x:n}),i||0<=a?sAt(t,"height",a):aSE(null,t,{height:-a,y:e})}function pZ(t,l,a,n,i){var s=gE("zoom_rect"+t),o=gE("svg_"+t);if((o.onmousemove=null)!=s){var o=0==gAt(s,"fill-opacity"),r=[s.x.baseVal.value,s.y.baseVal.value,s.width.baseVal.value,s.height.baseVal.value];if(s.remove(),0!=r[2]&&0!=r[3]){var s=gE("svg_draw_"+t),g=[s.viewBox.baseVal.x,s.viewBox.baseVal.y,s.viewBox.baseVal.width,s.viewBox.baseVal.height],s=[s.x.baseVal.value,s.y.baseVal.value,s.width.baseVal.value,s.height.baseVal.value];let e=[];e=o?[-r[2]/s[2],r[3]/s[3],1,1]:[(r[0]-s[0])/s[2],1-(r[1]+r[3]-s[1])/s[3],r[2]/s[2],r[3]/s[3]];o=[l[0]+l[2]*g[0]/100,l[1]+l[3]*(100-g[3]-g[1])/100,l[2]*g[2]/100,l[3]*g[3]/100];sAL(t,[o[0]+e[0]*o[2],o[1]+e[1]*o[3],e[2]*o[2],e[3]*o[3]],l,a,n,i)}}}function sAL(e,t,l,a,n,i){for(var s=gE("svg_draw_"+e),o=100*(t[0]-l[0])/l[2],r=100*(l[1]+l[3]-t[1]-t[3])/l[3],l=(s.viewBox.baseVal.width=100*t[2]/l[2],s.viewBox.baseVal.height=100*t[3]/l[3],s.viewBox.baseVal.x=o,s.viewBox.baseVal.y=r,gE("plr_"+e)),g=(aSE(null,l,{x:o,y:r}),document.getElementsByClassName("cg_"+e));0<g.length;)g[0].remove();cGr(e,t,a,n,i),iMP(e)}function cTi(e,t,l){var t=e/t,a=b(c(t));const n=d(t/10**a);var i=s.findIndex(function(e){return e>=n}),t=s[i]*10**a;return l&&1<=e&&t<1?1:t}function cGr(v,c,u,f,y){var x=gE("svg_bg_"+v),_=gE("svg_left_"+v),w=gE("svg_bottom_"+v);for(let h=0;h<2;++h){var p=0<h?_:w,E=cTi(c[2+h],q[h],y[h]),S=c[h]+c[2+h],m=d(c[h]/E)*E,S=b(S/E)*E,V=100*(0<h?c[h]+c[h+2]-S:m-c[h])/c[2+h],A=a((S-m)/E);let l=Array();l=y[h]?n2e(dec(m,E,S)):n2e(lis(m,E,S));const T=100*E/c[2+h];var m=aSE(x,"defs",{class:"cg_"+v}),k=aSE(m,"g",{id:"mg"+h+"_"+v});if(f[h]&&0<r[h]){const N=l[idx],C=l[idx],M=0,R=100;0<h&&([N,M,C,R]=[M,N,R,C]);let l=Array();y[h]&&1==E?(l=los(1,9/(r[h]-1),10)).forEach((e,t)=>{l[t]=(1-l[t])*T}):l=lis(0,1/r[h]*T,T);for(let e=1;e<l.length-1;++e)aSL(k,N,M,C,R,"rgb(223,223,223)","2 4")}let e="0%",t="99%",n="0%",i="100%",s="0%",o="1%";0<h&&([e,t,n,i,s,o]=[t,e,i,n,o,s]),u&&aSL(k,0,0,n,i,"rgb(223,223,223)"),aSL(k,e,t,n,i),aSL(k,0,0,s,o);for(let t=0;t<=A;++t){var B=V+T*t;let e=null;aSE(null,e=0<h?aST(p,l[A-t],p.width.baseVal.value-.5*g,B+"%",g,"end"):aST(p,l[t],B+"%",.9*g,g),{"dominant-baseline":"central",class:"cg_"+v});var L=0<h?0:B,B=0<h?B:0;aSE(x,"use",{href:"#mg"+h+"_"+v,x:L,y:B,class:"cg_"+v})}}}function plotSvg(s,a,r,f,{title:e="",subtitle:y="",xlabel:x="",ylabel:_="",xlim:w=[],ylim:E=[],legend:S=[],xScale:$="lin",yScale:ee="lin",grid:V=!0,gridMinor:A=[],legendLocation:B="northeastoutside"}={}){let L=[!1,!1];"log"==$&&(a=a.map(c),1<w.length&&(w=w.map(c),isNaN(w[0])||isNaN(w[1])?w=[]:(w[0]=w[0]==-1/0?0:w[0],w[1]=w[1]==-1/0?0:w[1])),L[0]=!0),"log"==ee&&(r=r.map(c),1<E.length&&(E=E.map(c),isNaN(E[0])||isNaN(E[1])?E=[]:(E[0]=E[0]==-1/0?0:E[0],E[1]=E[1]==-1/0?0:E[1])),L[1]=!0);var T=gE(s),N=document.createElement("div"),T=(T.appendChild(N),sAt(N,"style","width:100%;height:100%;min-width:"+m+"px;min-height:200px;overflow:none"),aSE(N,"svg",{id:"svg_"+s,width:"100%",height:"100%"})),N=T.width.baseVal.value,C=T.height.baseVal.value;T.innerHTML+="<style>\n<![CDATA[\npolyline.l {\nstroke-width:2;\nvector-effect:non-scaling-stroke;\nfill:none;\n}\ntext.cll {\nfont-size:"+h+"px;\nfill:black;\ndominant-baseline:central;\nfont-family:"+i+";\n}\n]]>\n</style>\n";let M=0,R=t;var z=e.split("\n"),D=y.split("\n");0<e.length&&(M+=(o+n)*z.length),0<y.length&&(M+=(p+n)*D.length);let Y=C-(M+=10)-u,G=N-R;0<x.length&&(Y=Y-g-n),0<_.length&&(R=R+g+n,G=G-g-n);var P=aSE(null,"g",{"pointer-events":"visible"});P.onclick=e=>lC(e,h,l,s,0),P.ondblclick=e=>lC(e,h,l,s,f);let Z=0,F=0;if(0<S.length&&0<f&&0<a.length){let e="";switch(B){case"northeast":yLegend=M+2*l,Z=4*l,e="white";break;case"northeastoutside":yLegend=M,e="none";break;default:throw new Error("LegendLocation not supported")}var I=Y-Z,X=(T.appendChild(P),aSE(T,"defs")),H=(aSE(X,"line",{id:"ll_"+s,x1:0,y1:0,x2:j,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),aSE(P,"svg",{id:"svg_leg_"+s})),te=f;let a=S;S.length>f&&(a=S.slice(0,te));X=(F=te*(h+l)+l)>I?I:F,I=(aSE(null,H,{x:"100%",height:X}),aSR(H,0,0,0,"100%",e,"black"));aSE(null,I,{id:"rect_leg_"+s});for(let t=0;t<te;++t){var le=t%v.length,ae=t*(h+l)+l,ne=new aSE(H,"g",{id:"lgi_"+s+"_"+t}),le=(aSE(ne,"use",{id:"lli_"+s+"_"+t,x:k,y:ae+h/2,href:"#ll_"+s,stroke:v[le]}),aSE(ne,"text",{id:"lti_"+s+"_"+t,class:"cll",x:k+j+k,y:ae+h/2}));let e="";t<a.length&&(e=a[t]),le.append(document.createTextNode(e))}var O=(O=P.getBBox().width+2*k)>m?m:O;sAt(I,"width","100%"),sAt(H,"width",O);let n=0;switch(B){case"northeast":n=-O-2*k-t,G-=t;break;case"northeastoutside":n=-O-k,G-=O+2*k;break;default:throw new Error("LegendLocation not supported")}aSE(null,H,{x:T.width.baseVal.value+n,y:yLegend,viewBox:"0 0 "+O+" "+X})}else G-=t;I=[R,M,G,Y];let ie=[N-I[2],C-I[3]];var se=aSE(T,"svg",{id:"svg_top_"+s,x:I[0],overflow:"visible",width:I[2]});let J=0;if(0<e.length)for(let e=0;e<z.length;++e)J=J+o+n,aST(se,z[e],"50%",J,o);if(0<y.length)for(let e=0;e<D.length;++e)J=J+p+n,aST(se,D[e],"50%",J,p);B=aSE(T,"g",{transform:"translate("+I[0]+" "+(-C+I[1]+I[3])+")"}),X=aSE(B,"svg",{id:"svg_bottom_"+s,overflow:"visible",y:"100%",width:I[2]}),0<x.length&&aST(X,x,"50%",3*g,g),N=aSE(T,"svg",{id:"svg_left_"+s,width:I[0],y:I[1],overflow:"visible",height:I[3]}),0<_.length&&aSE(N,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":g,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:I[0]-4*g-n}).append(document.createTextNode(_)),e=sLi(a,w),y=sLi(r,E);let K=[e[0],y[0],e[1]-e[0],y[1]-y[0]];aSE(T,"svg",{id:"svg_bg_"+s,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:I[2],height:I[3],x:I[0],y:I[1]});var Q=aSE(T,"svg",{id:"svg_draw_"+s,preserveAspectRatio:"none",viewBox:"0 0 100 100",width:I[2],height:I[3],x:I[0],y:I[1]});let U=[!1,!1];A.length<1?(U[0]="log"==$,U[1]="log"==ee):(U[0]=A[0],U[1]=A[1]);var C=cTi(K[2],q[0],L[0]),B=cTi(K[3],q[1],L[1]),W=(w.length<1&&4<=K[2]/C&&(K[0]=b(e[0]/C)*C,K[2]=d(e[1]/C)*C-K[0]),E.length<1&&4<=K[3]/B&&(K[1]=b(y[0]/B)*B,K[3]=d(y[1]/B)*B-K[1]),cGr(s,K,V,U,L),r.length/f),oe=a.length==r.length;if(!oe&&W!=a.length)throw new Error("Dimension must agree");var re=aSE(Q,"g",{id:"gp_"+s});for(let t=0;t<f;++t){var ge=t%v.length,he=aSE(re,"polyline",{class:"l",id:"pl_"+s+"_"+t,stroke:v[ge]});for(let e=0;e<W;++e){var ve,de=oe?a[t*W+e]:a[e],ce=r[t*W+e];isFinite(de)&&isFinite(ce)&&((ve=Q.createSVGPoint()).x=100*(de-K[0])/K[2],ve.y=100-100*(ce-K[1])/K[3],he.points.appendItem(ve))}}X=aSR(Q,0,0,"100%","100%","none","black");aSE(null,X,{id:"plr_"+s,"pointer-events":"visible"}),T.appendChild(P),X.onclick=e=>pC(e,s,K,V,U,L),T.oncontextmenu=e=>{e.preventDefault()},Q.onmousedown=e=>pM(e,s),Q.ondblclick=()=>sAL(s,K,K,V,U,L),T.onmousedown=e=>{e.preventDefault()},T.onmouseup=()=>pZ(s,K,V,U,L),0<S.length&&(P.onwheel=e=>sL(e,s,F)),new ResizeObserver(()=>rS(s,ie[0],ie[1],F,Z)).observe(T)}}
function gE(e){return document.getElementById(e)}function gM(e){let t=e.length,l=-1/0;for(;t--;)l=e[t]>l&&isFinite(e[t])?e[t]:l;return l}function gMi(e){let t=e.length,l=1/0;for(;t--;)l=e[t]<l&&isFinite(e[t])?e[t]:l;return l}function n2e(t){var l=["y","z","a","f","p","n","u","m","","k","M","G","T","P","E","Z","Y"],i=Array(t.length);for(idx=0;idx<t.length;++idx){var a=t[idx].toExponential(5).split(/e/);let e=Math.floor(+a[1]/3)+8;e>l.length-1?e=l.length-1:e<0&&(e=0),i[idx]=Math.round(a[0]*Math.pow(10,+a[1]-3*(e-8))*1e3)/1e3+l[e]}return i}function lis(e,t,l){for(numel=Math.floor((l-e)/t)+1,out=Array(numel),idx=0;idx<numel;++idx)out[idx]=e+t*idx;return out}function los(e,t,l){return lis(e,t,l).map(Math.log10)}function dec(e,t,l){return lis(e,t,l).map(e=>10**e)}function aSE(e,t,l){var i,a="string"==typeof t?document.createElementNS("http://www.w3.org/2000/svg",t):t;for(i in l)a.setAttribute(i,l[i]);return null!=e&&e.appendChild(a),a}function aST(e,t,l,i,a,n="middle",o="Sans,Arial",r="black"){e=aSE(e,"text",{x:l,y:i,fill:r,"font-size":a,"text-anchor":n,"font-family":o,"stroke-width":1});return e.append(document.createTextNode(t)),e}function aSL(e,t,l,i,a,n="black",o=""){return aSE(e,"line",{x1:t,y1:l,x2:i,y2:a,stroke:n,"stroke-width":1,"stroke-dasharray":o,"vector-effect":"non-scaling-stroke"})}function addSvgRec(e,t,l,i,a,n="none",o="none",r=2,s=0){return aSE(e,"rect",{x:t,y:l,width:i,height:a,rx:s,stroke:o,"stroke-width":r,fill:n,"vector-effect":"non-scaling-stroke"})}function lC(e,t,l,i,a){var n=gE("svg_leg_"+i),e=e.offsetY-n.y.baseVal.value,o=Math.floor((e-l/2)/(t+l)),n=gE("pl_"+i+"_"+o);if(null!=n){var r=n.style.display;if(0==a){e=gE("gpl_"+i+"_"+o);"none"===r?(gE("pl_"+i+"_"+o).style.display="block",gE("lgi_"+i+"_"+o).style.opacity=1,null!=e&&(e.style.display="block")):(gE("pl_"+i+"_"+o).style.display="none",gE("lgi_"+i+"_"+o).style.opacity=.3,null!=e&&(e.style.display="none"))}else for(idx=0;idx<a;++idx){var s=gE("gpl_"+i+"_"+idx);"none"===r?(gE("pl_"+i+"_"+idx).style.display="block",gE("lgi_"+i+"_"+idx).style.opacity=1,null!=s&&(s.style.display="block")):idx!=o&&(gE("pl_"+i+"_"+idx).style.display="none",gE("lgi_"+i+"_"+idx).style.opacity=.3,null!=s)&&(s.style.display="none")}}}function rS(e,t,l,i,a){var n=gE("svg_leg_"+e),o=gE("svg_draw_"+e),r=gE("svg_top_"+e),s=gE("svg_bottom_"+e),d=gE("svg_left_"+e),e=gE("svg_"+e),g=e.width.baseVal.value-t,h=e.height.baseVal.value-l,x=o.width.baseVal.value,c=o.height.baseVal.value;if(tooltips=document.getElementsByClassName("tooltip"),x!=g)for(o.width.baseVal.value=g,r.width.baseVal.value=g,s.width.baseVal.value=g,n.x.baseVal.value+=g-x,idx=0;idx<tooltips.length;++idx){var u=o.x.baseVal.value,v=tooltips[idx].transform.baseVal[0].matrix.e;tooltips[idx].transform.baseVal[0].matrix.e=u+(v-u)*g/x}if(c!=h)for(o.height.baseVal.value=h,d.height.baseVal.value=h,null!=n&&(n.height.baseVal.value=t=i<(t=h-a)?i:t,n.viewBox.baseVal.height=t),idx=0;idx<tooltips.length;++idx){var p=o.y.baseVal.value,f=tooltips[idx].transform.baseVal[0].matrix.f;tooltips[idx].transform.baseVal[0].matrix.f=p+(f-p)*h/c}}function sL(e,t,l){var i=gE("svg_leg_"+t),t=gE("rect_leg_"+t),e=(i.viewBox.baseVal.y+=e.deltaY,l-i.height.baseVal.value);return i.viewBox.baseVal.y<0&&(i.viewBox.baseVal.y=0),i.viewBox.baseVal.y>e&&(i.viewBox.baseVal.y=e),t.y.baseVal.value=i.viewBox.baseVal.y,!1}function pC(e,t,l,i,a,n,o,r,s,d){svgDraw=gE("svg_draw_"+t),svg=gE("svg_"+t);var g,h,x,c=e.offsetX-svgDraw.x.baseVal.value,e=e.offsetY-svgDraw.y.baseVal.value,u=l/svgDraw.width.baseVal.value,v=i/svgDraw.height.baseVal.value;result=gNL(t,c*=u,e*=v,6*u,6*v),null!=(closestEl=result.ele)&&(c=result.y,u=(e=result.x)/u+svgDraw.x.baseVal.value,v=c/v+svgDraw.y.baseVal.value,h=gE("lti_"+t+(g=(g=closestEl.id).slice(("pl_"+t).length,g.length))),x=gE("pl_"+t+g),lineColor=x.getAttribute("stroke"),sourceCoord=cC([e,c],l,i,[a,n],[o,r],s,d),null==(x=gE("gpl_"+t+g))&&(x=aSE(svg,"g",{id:"gpl_"+t+g})),(e=aSE(x,"g",{class:"tooltip",transform:"translate("+u+" "+v+")"})).onclick=e=>{"g"==e.srcElement.parentNode.tagName&&e.srcElement.parentNode.remove()},c=addSvgRec(e,5,-9,0,32,lineColor,"rgb(223,223,223)",1,rx=4),(l=null)!=h&&(aSE(null,text=aST(e,h.textContent,7,-11,12,"start","Sans,Arial","white"),{"font-weight":"bold"}),l=aSL(e,5,-8,5,-8,stroke="white"),aSE(null,c,{y:-23,height:46})),aST(e,"x: "+n2e([sourceCoord[0]]),7,4,12,"start","Sans,Arial","white"),aST(e,"y: "+n2e([sourceCoord[1]]),7,18,12,"start","Sans,Arial","white"),aSE(null,c,{width:(i=e.getBBox()).width+4}),null!=l&&l.setAttribute("x2",i.width+4+5),addSvgRec(e,-2,-2,4,4,"black"))}function pM(e,t){2==e.button&&(aSE(null,addSvgRec(svg=gE("svg_"+t),e.offsetX,e.offsetY,0,0,"black"),{id:"zoom_rect"+t,"fill-opacity":"0.3"}),svg.onmousemove=e=>pDZ(e,t),svg.onmouseup=e=>pZ(e,t))}function pDZ(e,t){(rectZoom=gE("zoom_rect"+t)).width.baseVal.value=e.offsetX-rectZoom.x.baseVal.value,rectZoom.height.baseVal.value=e.offsetY-rectZoom.y.baseVal.value}function pZ(e,t){(rectZoom=gE("zoom_rect"+t)).remove(),(svg=gE("svg_"+t)).onmousemove=null,svg.onmouseup=null}function cC(e,t,l,i,a,n,o){return x=e[0]/t*(i[1]-i[0])+i[0],y=(1-e[1]/l)*(a[1]-a[0])+a[0],x=n?Math.pow(10,x):x,y=o?Math.pow(10,y):y,[x,y]}function gNL(e,t,l,i,a){var n=null,o=1/0,r=gE("gp_"+e),s=r.children.length,d=0,g=0;for(idx=0;idx<s;++idx){var h=r.children[idx].points;for(idxPt=1;idxPt<h.length;++idxPt){var x,c,u,v,p,f,b,y,w=h[idxPt-1],E=h[idxPt];t<w.x-i&&t<E.x-i||t>w.x+i&&t>E.x+i||l<w.y-a&&l<E.y-a||l>w.y+a&&l>E.y+a||(b=E.x-w.x,c=t+i-w.x,u=l-a*(v=2*(0<=(p=(x=(y=E.y-w.y)*y<b*b)?y/b:b/y))-1)-w.y,f=t-i-w.x,v=l+a*v-w.y,f=x?v/f:f/v,(v=x?u/c:c/u)<p&&f<p)||p<v&&p<f||(x=(b*(t-w.x)+y*(l-w.y))/(b*b+y*y),(v=((c=w.x+b*x)-t)*(c-t)+((u=w.y+y*x)-l)*(u-l))<i*a&&v<o&&(o=v,n=r.children[idx],p=t>w.x?t-w.x:w.x-t,f=l>w.y?l-w.y:w.y-l,b=t>E.x?t-E.x:E.x-t,y=l>E.y?l-E.y:E.y-l,g=p<b&&p<i&&f<a?(d=w.x,w.y):b<i&&y<a?(d=E.x,E.y):(d=c,u)))}}return{ele:n,x:d,y:g}}function plotSvg(t,e,l,i,{title:a="",subtitle:n="",xlabel:o="",ylabel:r="",xlim:s=[],ylim:d=[],legend:g=[],xScale:X="lin",yScale:B="lin",grid:D=!0,gridMinor:Z=[],legendLocation:h="northeastoutside"}={}){var x=10,c=10,u=[1,2,5,10],v=["rgb(0,114,190)","rgb(218,83,25)","rgb(238,178,32)","rgb(126,47,142)","rgb(119,173,48)","rgb(77,191,239)","rgb(163,20,47)"],p=(logXEnbl=!1,"log"==X&&(e=e.map(Math.log10),1<s.length&&(s=s.map(Math.log10),isNaN(s[0])||isNaN(s[1])?s=[]:(s[0]=s[0]==-1/0?0:s[0],s[1]=s[1]==-1/0?0:s[1])),logXEnbl=!0),logYEnbl=!1,"log"==B&&(l=l.map(Math.log10),1<d.length&&(d=d.map(Math.log10),isNaN(d[0])||isNaN(d[1])?d=[]:(d[0]=d[0]==-1/0?0:d[0],d[1]=d[1]==-1/0?0:d[1])),logYEnbl=!0),gE(t)),f=document.createElement("div"),p=(p.appendChild(f),f.setAttribute("style","width:100%;height:100%;overflow:none"),aSE(f,"svg",{id:"svg_"+t,width:"100%",height:"100%"})),f=(f=p.width.baseVal.value)<1200?1200:f,b=(b=p.height.baseVal.value)<800?800:b,y=(p.innerHTML+="<style>\n<![CDATA[\n  polyline.l {\n    stroke-width:2;\n    vector-effect:non-scaling-stroke;\n    fill:none;\n  }\n  text.cll {\n    font-size:10px;\n    fill:black;\n    dominant-baseline:central;\n    font-family:Lucida Sans Typewriter;\n  }\n]]>\n</style>\n",0),w=48,z=a.split("\n"),R=n.split("\n"),E=(0<a.length&&(y+=28*z.length),0<n.length&&(y+=16*R.length),b-(y+=10)-24),m=f-w,_=(0<o.length&&(E=E-12-4),0<r.length&&(w=w+12+4,m=m-12-4),aSE(null,"g",{"pointer-events":"visible"})),F=(_.onclick=e=>lC(e,hLetter,4,t,0),_.ondblclick=e=>lC(e,hLetter,4,t,i),0);if(0<g.length&&0<i&&0<e.length){var O="";switch(h){case"northeast":yLegend=y+8,F=16,O="white";break;case"northeastoutside":yLegend=y,O="none";break;default:throw new Error("LegendLocation not supported")}hLegendMax=E-F,p.appendChild(_);var S=aSE(p,"defs"),k=(aSE(S,"line",{id:"ll_"+t,x1:0,y1:0,x2:20,y2:0,"stroke-width":2,"vector-effect":"non-scaling-stroke"}),wLegendMax=400,hLetter=10,aSE(_,"svg",{id:"svg_leg_"+t})),G=i,H=g,j=(g.length>i&&(H=g.slice(0,G)),G*(hLetter+4)+4),S=j>hLegendMax?hLegendMax:j,M=(aSE(null,k,{x:"100%",height:S}),addSvgRec(k,0,0,0,"100%",O,"black"));for(aSE(null,M,{id:"rect_leg_"+t}),lnIdx=0;lnIdx<G;++lnIdx){colorIdx=lnIdx%v.length,yOffset=lnIdx*(hLetter+4)+4;var q=new aSE(k,"g",{id:"lgi_"+t+"_"+lnIdx}),J=(aSE(q,"use",{id:"lli_"+t+"_"+lnIdx,x:4,y:yOffset+hLetter/2,href:"#ll_"+t,stroke:v[colorIdx]}),aSE(q,"text",{id:"lti_"+t+"_"+lnIdx,class:"cll",x:28,y:yOffset+hLetter/2})),q="";lnIdx<H.length&&(q=H[lnIdx]),J.append(document.createTextNode(q))}var T=(T=_.getBBox().width+8)>wLegendMax?wLegendMax:T,K=(M.setAttribute("width","100%"),k.setAttribute("width",T),0);switch(h){case"northeast":K=-T-8-48,m-=48;break;case"northeastoutside":K=-T-4,m-=T+8;break;default:throw new Error("LegendLocation not supported")}aSE(null,k,{x:p.width.baseVal.value+K,y:yLegend,viewBox:"0 0 "+T+" "+S})}else m-=48;var A=[f-(pltAr=[w,y,m,E])[2],b-pltAr[3]],Q=aSE(p,"svg",{id:"svg_top_"+t,x:pltAr[0],overflow:"visible",width:p.width.baseVal.value-A[0]}),V=0;if(0<a.length)for(idx=0;idx<z.length;++idx)V=V+24+4,aST(Q,z[idx],"50%",V,24);if(0<n.length)for(idx=0;idx<R.length;++idx)V=V+12+4,aST(Q,R[idx],"50%",V,12);var M=-b+pltAr[1]+pltAr[3],h=aSE(p,"g",{transform:"translate("+pltAr[0]+" "+M+")"}),U=aSE(h,"svg",{id:"svg_bottom_"+t,overflow:"visible",y:"100%",width:p.width.baseVal.value-A[0]}),W=(0<o.length&&aST(U,o,"50%",36,12),aSE(p,"svg",{id:"svg_left_"+t,y:pltAr[1],overflow:"visible",height:p.height.baseVal.value-A[1]})),L=(0<r.length&&aSE(W,"text",{"writing-mode":"sideways-lr",fill:"black","font-size":12,"text-anchor":"middle","font-family":"Sans,Arial","stroke-width":1,y:"50%",x:pltAr[0]-48-4}).append(document.createTextNode(r)),0),I=0,P=0,C=0,S=(s.length<2?(L=gMi(e),I=gM(e),L==I&&(L-=.5,I+=.5)):(L=s[0],I=s[1]),d.length<2?(P=gMi(l),C=gM(l),P==C&&(P-=.5,C+=.5)):(P=d[0],C=d[1]),p.width.baseVal.value-A[0]),f=p.height.baseVal.value-A[1],N=aSE(p,"svg",{id:"svg_draw_"+t,preserveAspectRatio:"none",viewBox:"0 0 "+pltAr[2]+" "+pltAr[3],width:S,height:f,x:pltAr[0],y:pltAr[1]}),w=!1,E=!1,E=Z.length<1?(w="log"==X,"log"==B):(w=Z[0],Z[1]),a=(I-L)/10,n=Math.floor(Math.log10(a)),$=Math.ceil(a/Math.pow(10,n)),b=u.findIndex(function(e){return $<=e}),a=u[b]*Math.pow(10,n),M=(logXEnbl?1<=I-L?1<(a=a<1?1:a)&&(x=x<a?x:a):x=0:x=5,(C-P)/10),n=Math.floor(Math.log10(M)),$=Math.ceil(M/Math.pow(10,n)),b=u.findIndex(function(e){return $<=e}),M=u[b]*Math.pow(10,n),h=(logYEnbl?1<=C-P?1<(M=M<1?1:M)&&(c=c<M?c:M):c=0:c=5,s.length<1&&4<=(I-L)/a&&(L=Math.floor(L/a)*a,I=Math.ceil(I/a)*a),d.length<1&&4<=(C-P)/M&&(P=Math.floor(P/M)*M,C=Math.ceil(C/M)*M),Math.ceil(L/a)*a),o=Math.floor(I/a)*a,r=Math.ceil(P/M)*M,S=Math.floor(C/M)*M,ee=pltAr[2]*(h-L)/(I-L),te=pltAr[3]*(S-C)/(C-P),le=100*(h-L)/(I-L),ie=100*(S-C)/(C-P),ae=Math.round((o-h)/a),ne=Math.round((S-r)/M),f=(xTickLabel=logXEnbl?n2e(dec(h,a,o)):n2e(lis(h,a,o)),yTickLabel=logYEnbl?n2e(dec(r,M,S)):n2e(lis(r,M,S)),dXTick=pltAr[2]*a/(I-L),dXTickPct=100*a/(I-L),dYTick=pltAr[3]*M/(C-P),dYTickPct=100*M/(C-P),aSE(N,"defs")),oe=aSE(f,"g",{id:"mgy_"+t});if(E&&0<c)for(logYEnbl&&1==M?(minorTickPos=los(1,9/(c-1),10)).forEach((e,t)=>{minorTickPos[t]=(1-minorTickPos[t])*dYTick}):minorTickPos=lis(0,1/c*dYTick,dYTick),idx=1;idx<minorTickPos.length-1;++idx)aSL(oe,0,minorTickPos[idx],"100%",minorTickPos[idx],"rgb(223,223,223)","2 4");for(D&&aSL(oe,0,0,"100%",0,"rgb(223,223,223)"),aSL(oe,0,0,"1%",0),aSL(oe,"99%",0,"100%",0),idx=0;idx<=ne;++idx){var re=-ie+dYTickPct*idx,se=-te+dYTick*idx;(J=aST(W,yTickLabel[ne-idx],pltAr[0]-6,re+"%",12,"end")).setAttribute("dominant-baseline","central"),aSE(N,"use",{href:"#mgy_"+t,y:se})}var X=aSE(N,"defs"),de=aSE(X,"g",{id:"mgx_"+t});if(w&&0<x)for(logXEnbl&&1==a?(minorTickPos=los(1,9/(x-1),10)).forEach((e,t)=>{minorTickPos[t]*=dXTick}):minorTickPos=lis(0,1/x*dXTick,dXTick),idx=1;idx<minorTickPos.length-1;++idx)aSL(de,minorTickPos[idx],0,minorTickPos[idx],"100%","rgb(223,223,223)","2 4");for(D&&aSL(de,0,0,0,"100%","rgb(223,223,223)"),aSL(de,0,0,0,"1%"),aSL(de,0,"99%",0,"100%"),idx=0;idx<=ae;++idx){var ge=dXTickPct*idx+le,he=dXTick*idx+ee;aST(U,xTickLabel[idx],ge+"%",12*1.4,12),aSE(N,"use",{href:"#mgx_"+t,x:he})}var xe=l.length/i,ce=e.length==l.length;if(!ce&&xe!=e.length)throw new Error("Dimension must agree");var ue=aSE(N,"g",{id:"gp_"+t});for(lnIdx=0;lnIdx<i;++lnIdx){var ve=e.length,Y=(new Array(2*ve),colorIdx=lnIdx%v.length,document.createElementNS("http://www.w3.org/2000/svg","polyline"));for(Y.setAttribute("class","l"),Y.setAttribute("id","pl_"+t+"_"+lnIdx),Y.setAttribute("stroke",v[colorIdx]),ptIdx=0;ptIdx<xe;++ptIdx){var pe,fe=ce?e[lnIdx*xe+ptIdx]:e[ptIdx],be=l[lnIdx*xe+ptIdx];isFinite(fe)&&isFinite(be)&&((pe=N.createSVGPoint()).x=pltAr[2]*(fe-L)/(I-L),pe.y=pltAr[3]-pltAr[3]*(be-P)/(C-P),Y.points.appendItem(pe))}ue.appendChild(Y)}addSvgRec(N,0,0,pltAr[2],pltAr[3],"none","black").setAttribute("pointer-events","visible"),p.appendChild(_),N.onclick=e=>pC(e,t,pltAr[2],pltAr[3],L,I,P,C,logXEnbl,logYEnbl),p.oncontextmenu=e=>{e.preventDefault()},N.onmousedown=e=>pM(e,t),p.onmousedown=e=>{e.preventDefault()},0<g.length&&(_.onwheel=e=>sL(e,t,j)),new ResizeObserver(()=>rS(t,A[0],A[1],j,F)).observe(p)}